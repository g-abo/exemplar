<!DOCTYPE html>

<html>
<head>
<!-- This page was generated by CAT-SOOP 19.0.6+hg.3.118aecfb.  miau. -->
<meta charset="utf-8"/>
<title>Flood Fill | Course Readings | 6.101 Spring 2024</title>
<link href="https://py.mit.edu/_static/spring24/logo.gif" rel="icon" type="image/gif"/>
<!-- include catsoop base css -->
<link href="https://py.mit.edu/_static/_base/themes/base.css" rel="stylesheet" type="text/css"/>
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    function toggleAttribute(elt, attr){
        elt.setAttribute(attr, elt.getAttribute(attr) === "true" ? "false" : "true");
    }

    catsoop.topMenuFocus = function(event) {
        var elt = event.target;
        var target = event.relatedTarget;
        if (elt.classList.contains('menu-submenu')){
            var topmenu = elt.parentNode.parentNode;
            if (target && !target.classList.contains("menu-submenu") && target !== topmenu.children[1]) {
                clearMenu(topmenu);
            }
        }else if (!target.classList.contains('cs_top_menu_item')){
            clearMenu(elt.parentNode);
        }
    }

    window.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu){
       menu.children[1].checked = false;
    }
    // @license-end
    </script>
<!-- dark mode -->
<script src="https://py.mit.edu/_static/_base/js/darkreader/darkreader.min.js" type="text/javascript"></script>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.dark_mode_settings = null;
    if (catsoop.dark_mode_settings === null){
        catsoop.dark_mode_settings = JSON.parse(localStorage.getItem('catsoop_dark_mode_settings'));
        if (catsoop.dark_mode_settings === null){
            catsoop.dark_mode_settings = {'mode': 'disabled', 'brightness': 100, 'contrast': 90, 'sepia': 10, 'grayscale': 0};
        }
    }
    localStorage.setItem('catsoop_dark_mode_settings', JSON.stringify(catsoop.dark_mode_settings));
    catsoop.dark_mode = catsoop.dark_mode_settings.mode;
    delete catsoop.dark_mode_settings.mode;
    if (catsoop.dark_mode === 'enabled' || catsoop.dark_mode === 'auto'){
        DarkReader[catsoop.dark_mode == 'enabled' ? 'enable' : 'auto'](catsoop.dark_mode_settings);
    }
    
    document.addEventListener("DOMContentLoaded", function(event) {
        if (DarkReader.isEnabled()) {
            var invertfilter = 'invert(100%) hue-rotate(180deg)' +
                               ' brightness(' + catsoop.dark_mode_settings.brightness + '%)' +
                               ' contrast(' + catsoop.dark_mode_settings.contrast + '%)' +
                               ' grayscale(' + catsoop.dark_mode_settings.grayscale + '%)' +
                               ' sepia(' + catsoop.dark_mode_settings.sepia + '%)'
            var inverter = document.createElement('style');
            inverter.innerText = 'img.catsoop-darkmode-invert, video.catsoop-darkmode-invert {filter: ' + invertfilter + ';}\n\n'
            document.head.appendChild(inverter);
        }
    });
    // @license-end
    </script>
<!-- load in mathjax and CAT-SOOP-specific math rendering  -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    MathJax = {
      startup: {
        typeset: false,
      }
    }

    catsoop.render_math = function (elt) {
        if(elt.classList.contains('cs_displaymath')){
            var b = "\\[";
            var e = "\\]";
        }else{
            var b = "\\(";
            var e = "\\)";
        }
        elt.innerText = b + elt.innerText + e;
        MathJax.typeset([elt]);
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function (elt){
        if (elt === null) {
            return;
        }
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while(mathelts.length > 0){
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
          catsoop.render_all_math(document);
    });
    // @license-end
    </script>
<script id="MathJax-script" src="https://py.mit.edu/_static/_base/js/mathjax/tex-chtml-full-speech.js"></script>
<!-- load in diagram stuff -->
<script src="https://py.mit.edu/_static/_base/js/cs_diagrams.js" type="text/javascript"></script>
<script type="text/javascript">
        catsoop.diagram_sources = {};
    </script>
<!-- Syntax Highlighting -->
<script src="https://py.mit.edu/_static/_base/js/highlight/highlight.min.js" type="text/javascript"></script>
<script src="https://py.mit.edu/_static/_base/js/highlightjs-line-numbers.js" type="text/javascript"></script>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.syntax_highlighting = function (elt) {
        if (elt === null) {
            return;
        }
        elt.querySelectorAll('pre > code:not(.highlighted)').forEach((block) => {
            hljs.highlightBlock(block);
            var wrap = document.createElement("section");
            wrap.setAttribute("aria-label", "Code block");
            block.parentNode.replaceWith(wrap);
            wrap.append(block.parentNode);
            block.classList.add('highlighted');
        });
        elt.querySelectorAll('code.highlight-lines').forEach(function(b){
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0){
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
            b.classList.remove('highlight-lines');
        });
    }
    window.addEventListener('DOMContentLoaded', function(){
        catsoop.syntax_highlighting(document);
    });
    // @license-end
    </script>
<style>
      :root {
        --cs-base-bg-color: #0350ba;
        --cs-light-bg-color: #629ced;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<style>
.cs_top_menu_item {
  font-size: 0.88rem;
}
div.dropdown {
  -moz-transform: translateY(-1px);
}
img {
  max-width:100% !important;
}
</style>
<style>
[id^=cs_qdiv].question-lab101 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style2 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style2 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style1 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style1 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style3 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style3 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style4 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style4 [id$=nsubmits_left] {
  display: none;
}
</style>
<style>
h2.cs_section_title {
   margin-top: 3em;
}
h3.cs_section_title {
   margin-top: 3em;
}
h4.cs_section_title {
   margin-top: 2em;
}
code.hljs {
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
img.envdia {
  border-radius: 5px;
  border: 2px #ccc solid;
}
img.pixels {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}
button[id$=clearanswer] {
  display: none;
}
.flex { display: flex; flex-wrap: wrap; }
.flex > pre { flex: 1; }
.flex > img { flex: 0 1; }
</style>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function (){
    document.querySelectorAll("img.envdia").forEach(function (b){
        b.classList.add("catsoop-darkmode-invert")
    });
});
</script>
<script src="https://py.mit.edu/_static/spring24/readings/multistep.js" type="text/javascript"></script>
<link href="https://py.mit.edu/_static/spring24/readings/multistep.css" rel="stylesheet"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.addEventListener("DOMContentLoaded", function(){
    sessionStorage.setItem("last-non-settings", catsoop.this_path);
});
// @license-end
</script>
<script src="https://py.mit.edu/_static/_base/js/codemirror/codemirror.bundle.min.js" type="text/javascript"></script>
<script src="https://py.mit.edu/_static/_handler/default/cs_ajax.js" type="text/javascript"></script>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
</head>
<body style="margin: 0px;">
<header id="cs_header">
<div aria-role="menubar" class="nav-container">
<div class="cs_header_text"><a href="https://py.mit.edu/spring24"><img src="https://py.mit.edu/_static/spring24/logo.gif"/> 6.101</a></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_a47c0b052b07cf284d5c1a10c5c01779">Information<span aria-hidden="true" class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_a47c0b052b07cf284d5c1a10c5c01779" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox"/>
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/basics" onblur="catsoop.topMenuFocus(event);" role="menuitem">Basics and Schedule</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/grading" onblur="catsoop.topMenuFocus(event);" role="menuitem">Grading Policies</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/academic_integrity" onblur="catsoop.topMenuFocus(event);" role="menuitem">Academic Integrity</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/help" onblur="catsoop.topMenuFocus(event);" role="menuitem">Getting Help</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/staff" onblur="catsoop.topMenuFocus(event);" role="menuitem">Staff List</a></div></div>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/readings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Readings</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/queue" onblur="catsoop.topMenuFocus(event);" role="menuitem">Queue</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/progress" onblur="catsoop.topMenuFocus(event);" role="menuitem">Progress</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/infrastructure" onblur="catsoop.topMenuFocus(event);" role="menuitem">Infrastructure</a>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_9c670d3da7e5c39f267148ccd70741ca">gvargas1<span aria-hidden="true" class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_9c670d3da7e5c39f267148ccd70741ca" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox"/>
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/ssh_keys" onblur="catsoop.topMenuFocus(event);" role="menuitem">Manage SSH Keys</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/_util/user_settings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Settings</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/readings/flood_fill?loginaction=logout" onblur="catsoop.topMenuFocus(event);" role="menuitem">Log Out</a></div></div><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_top_navigation" id="cs_breadcrumbs"><li><a href="https://py.mit.edu/spring24">Home</a></li><li><a href="https://py.mit.edu/spring24/readings">Course Readings</a></li><li><a href="https://py.mit.edu/spring24/readings/flood_fill">Flood Fill</a></li></nav>
<div class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<div class="cs_page_body" role="main">
<center><h1 class="cs_content_header">Flood Fill and Maze Path Finding</h1></center>
<div class="callout callout-warning" markdown="">
<p>This reading is relatively new, and your feedback will help us
improve it!  If you notice mistakes (big or small), if you have questions, if
anything is unclear, if there are things not covered here that you'd like to
see covered, or if you have any other suggestions, please get in touch during
office hours or open lab hours, or via e-mail at <code>6.101-help@mit.edu</code>.</p>
</div>
<h2 aria-hidden="true">Table of Contents</h2><ul aria-label="Table of Contents" role="navigation"><li><a href="#_introduction">1) Introduction</a></li><li><a href="#_some_cool_useful_python_features">2) Some Cool/Useful Python Features</a></li><ul><li><a href="#_built_in_function_zip">2.1) Built-in Function <code>zip</code></a></li><li><a href="#_tuple_unpacking">2.2) Tuple Unpacking</a></li><li><a href="#_the_unpacking_operator">2.3) The <code>*</code> Unpacking Operator</a></li><li><a href="#_list_comprehensions">2.4) List Comprehensions</a></li></ul><li><a href="#_flood_fill">3) Flood Fill</a></li><ul><li><a href="#_following_along">3.1) Following Along</a></li><li><a href="#_helper_functions">3.2) Helper Functions</a></li><li><a href="#_high_level_strategy">3.3) High-Level Strategy</a></li><li><a href="#_a_first_attempt_at_code">3.4) A First Attempt at Code</a></li></ul><li><a href="#_debugging">4) Debugging</a></li><ul><li><a href="#_high_level_strategy_2">4.1) High-level Strategy</a></li><li><a href="#_print_debugging">4.2) Print Debugging</a></li><ul><li><a href="#_aside_truthiness">4.2.1) Aside: Truthiness</a></li><li><a href="#_back_to_the_code">4.2.2) Back to the Code!</a></li></ul><li><a href="#_interpreting_errors">4.3) Interpreting Errors</a></li><li><a href="#_printing_more_complex_things">4.4) "Printing" More Complex Things</a></li><li><a href="#_printing_just_before_the_error">4.5) Printing Just Before the Error</a></li><ul><li><a href="#_aside_f_strings">4.5.1) Aside: "F-Strings"</a></li><li><a href="#_back_to_the_code_2">4.5.2) Back to the Code!</a></li></ul><li><a href="#_avoiding_extra_work">4.6) Avoiding Extra Work</a></li><li><a href="#_timing_the_program">4.7) Timing the Program</a></li><li><a href="#_using_the_right_data_structure">4.8) Using the Right Data Structure</a></li></ul><li><a href="#_finding_a_path_through_a_maze">5) Finding a Path Through a Maze</a></li><li><a href="#_summary">6) Summary</a></li></ul>


<p><a class="anchor" name="catsoop_section_1"></a><a class="anchor" name="_introduction"></a><h2 class="cs_section_title">1) Introduction<a class="cs_permalink" href="#_introduction">§</a></h2></p>
<p>For the last couple of weeks worth of readings, we've been kind of down in the
weeds, so to speak, looking at the details of Python's operation through the
lens of our environment model.  In this reading, we're going to come at things
from a much higher level and think about constructing a program.  Over the
term, we'll tend to kind of alternate between these two perspectives, and we'll
hopefully see how one informs the other.</p>
<p>Our main focus for this reading is going to be writing a program to implement a
behavior we call <em>flood fill</em>, an operation on images which we'll describe in
much more detail below.  Before we get there, though, let's take a moment to
introduce (or review) a couple of useful features of Python.</p>
<p><a class="anchor" name="catsoop_section_2"></a><a class="anchor" name="_some_cool_useful_python_features"></a><h2 class="cs_section_title">2) Some Cool/Useful Python Features<a class="cs_permalink" href="#_some_cool_useful_python_features">§</a></h2></p>
<p>Before we dive in to this week's material, we'll spend a bit of time to provide
a brief introduction to a couple of nice built-in features of Python, which we
might make use of in code in readings and/or recitations in the future.</p>
<p>These introductions will go by a little bit quickly, so we encourage you to try
things out on your own computer, to read <a href="https://docs.python.org/3/index.html">Python's documentation</a>, and/or to ask
the staff for help with these new structures.</p>
<p><a class="anchor" name="catsoop_section_2_1"></a><a class="anchor" name="_built_in_function_zip"></a><h3 class="cs_section_title">2.1) Built-in Function <code>zip</code><a class="cs_permalink" href="#_built_in_function_zip">§</a></h3></p>
<p><code>zip</code> is a nice Python built-in that allows us to easily find corresponding
elements in multiple iterable objects.  ("Iterable" means we may use <code>for</code> loops
to step through all their elements.)  For example, consider the following code,
which is designed to perform an element-wise subtraction of two lists:</p>
<pre><code class="language-python">def subtract_lists(l1, l2):
    assert len(l1) == len(l2)
    out = []
    for ix in range(len(l1)):
        out.append(l1[ix] - l2[ix])
    return out
</code></pre>
<p>We can come at this problem in a slightly different way using the <code>zip</code>
built-in function in Python.  <code>zip</code> takes multiple iterable objects as input,
and it returns a structure that can be looped over.  Let's look at a small
example to get a bit familiar with <code>zip</code> before we use it to rewrite
<code>subtract_lists</code> from above.</p>
<p>Imagine we have two lists, <code>x</code> and <code>y</code>, defined as below:</p>
<pre><code class="language-python">x = [100, 200, 300, 400]
y = [9, 8, 7, 6]
</code></pre>
<p>If we call <code>zip</code> on these two objects, Python gives us back a <code>zip</code> object:</p>
<pre><code class="language-python">print(zip(x, y))  # prints &lt;zip object at SOME_MEMORY_LOCATION&gt;
</code></pre>
<p>That doesn't look very useful on its own, but <code>zip</code> objects exist to be looped
over.  For example, we can look at the following code:</p>
<pre><code class="language-python">for element in zip(x, y):
    print(element)
</code></pre>
<p>This prints the following:</p>
<pre><code class="language-nohighlight">(100, 9)
(200, 8)
(300, 7)
(400, 6)
</code></pre>
<p>Can you see the pattern?  Each element that this <code>zip</code> object produces is a
tuple containing corresponding elements from <code>x</code> and <code>y</code>.  That is, the first
tuple we see contains <code>x[0]</code> and <code>y[0]</code>; then the next contains <code>x[1]</code> and
<code>y[1]</code>; and so on.  So (assuming <code>x</code> and <code>y</code> have the same length) this is equivalent to the following code:</p>
<pre><code class="language-python">for i in range(len(x)):
    print((x[i], y[i]))
</code></pre>
<p><a class="anchor" name="catsoop_section_2_2"></a><a class="anchor" name="_tuple_unpacking"></a><h3 class="cs_section_title">2.2) Tuple Unpacking<a class="cs_permalink" href="#_tuple_unpacking">§</a></h3></p>
<p>The <code>zip</code> function is often used in combination with another handy Python feature: using <em>multiple assignment</em> to name each element of a tuple.  For example:</p>
<pre><code class="language-python">i, j = (100, 9)
</code></pre>
<p>This code has the effect of assigning <em>two</em> variables, <code>i</code> and <code>j</code>, to the corresponding parts of the tuple.
So <code>i</code> ends up with the value <code>100</code>, and <code>j</code> with the value <code>9</code>.
You can do this with any number of variables, and with lists as well:</p>
<pre><code class="language-python">x, y, width, height = [0, 0, 100, 200]
</code></pre>
<p>If the tuple or list on the righthand side doesn't have exactly the same number of elements as there are variable names on the left side, then this code would raise an error.</p>
<p>Since <code>zip</code> creates tuples, tuple unpacking is a handy way to name the elements of the lists that are being zipped together.  For example:</p>
<pre><code class="language-python">for x_value, y_value in zip(x, y):
    print(x_value + y_value)
</code></pre>
<p>For each 2-element tuple that <code>zip</code> returns, the variables <code>x_value</code> and <code>y_value</code> are assigned to the two parts of the tuple --- meaning, really, that <code>x_value</code> ends up stepping through the elements of the <code>x</code> list, while <code>y_value</code> simultaneously steps through the corresponding elements of the <code>y</code> list.
This code prints the following:</p>
<pre><code class="language-nohighlight">109
208
307
406
</code></pre>
<p>This is useful in the context of our list-subtraction problem, which we can rewrite to make use of <code>zip</code> and tuple unpacking:</p>
<pre><code class="language-python">def subtract_lists(l1, l2):
    assert len(l1) == len(l2)
    out = []
    for i, j in zip(l1, l2):
        out.append(i - j)
    return out
</code></pre>
<p>Using <code>zip</code> is never strictly necessary, but there are many situations where
using it can produce some very nice code.  We will see more examples throughout
6.101 readings and recitations, and we encourage you to practice with it on
your own!</p>
<p>For now, try out some additional examples to answer the following questions:</p>
<p>
<!--START question zip1 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_zip1" style="position: static">
<div id="zip1_rendered_question">
<div id="catsoop_preamble_zip1"></div>
<div id="catsoop_prompt_zip1" style="display: inline;">What happens if the arguments we give to <code>zip</code> have different lengths?<br/></div><div aria-labelledby="catsoop_prompt_zip1" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="zip1_opts_0" name="zip1_opts" type="radio" value="0"/><label for="zip1_opts_0">We will get an exception.</label></div>
<div style="margin-bottom: 10px;"><input checked="" id="zip1_opts_1" name="zip1_opts" type="radio" value="1"/><label for="zip1_opts_1">We will only get a number of tuples equal to the length of the shortest of all of the inputs.</label></div>
<div style="margin-bottom: 10px;"><input id="zip1_opts_2" name="zip1_opts" type="radio" value="2"/><label for="zip1_opts_2">We will get a number of tuples equal to the length of the longest of all the inputs, as though we had added <code>None</code> to the end of the shorter inputs to make the lengths equal.</label></div>
</div><input id="zip1" name="zip1" type="hidden" value="1"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=zip1_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("zip1").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="zip1_buttons">
<button class="submit btn btn-catsoop" id="zip1_submit" onclick="catsoop.submit('zip1');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="zip1_clearanswer" onclick="catsoop.clearanswer('zip1');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="zip1_loading_wrapper" role="status">
<span id="zip1_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="zip1_score_display" role="status"></span>
<div class="nsubmits_left" id="zip1_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="zip1_solution_container">
<div id="zip1_solution">
<b>Solution:</b> We will only get a number of tuples equal to the length of the shortest of all of the inputs.
</div>
<div id="zip1_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="zip1_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question zip1 -->
</p>
<p>
<!--START question zip2 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_zip2" style="position: static">
<div id="zip2_rendered_question">
<div id="catsoop_preamble_zip2"></div>
<div id="catsoop_prompt_zip2" style="display: inline;">What happens if we give more than two arguments to <code>zip</code>?<br/></div><div aria-labelledby="catsoop_prompt_zip2" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="zip2_opts_0" name="zip2_opts" type="radio" value="0"><label for="zip2_opts_0">We will get an exception.</label></input></div>
<div style="margin-bottom: 10px;"><input id="zip2_opts_1" name="zip2_opts" type="radio" value="1"/><label for="zip2_opts_1">All arguments beyond the second will be ignored.</label></div>
<div style="margin-bottom: 10px;"><input checked="" id="zip2_opts_2" name="zip2_opts" type="radio" value="2"/><label for="zip2_opts_2">The tuples that we get will be longer than two elements (they will have one element for each input we gave to <code>zip</code>).</label></div>
</div><input id="zip2" name="zip2" type="hidden" value="2"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=zip2_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("zip2").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="zip2_buttons">
<button class="submit btn btn-catsoop" id="zip2_submit" onclick="catsoop.submit('zip2');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="zip2_clearanswer" onclick="catsoop.clearanswer('zip2');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="zip2_loading_wrapper" role="status">
<span id="zip2_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="zip2_score_display" role="status"></span>
<div class="nsubmits_left" id="zip2_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="zip2_solution_container">
<div id="zip2_solution">
<b>Solution:</b> The tuples that we get will be longer than two elements (they will have one element for each input we gave to <code>zip</code>).
</div>
<div id="zip2_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>For example, here is some code that zips together three lists, representing the red/green/blue values of corresponding pixels in an image:</p>
<pre><code class="language-python">red_values =   [255, 128, 0,   0]
green_values = [0,   255, 128, 0]
blue_values =  [0,   0,   255, 128]

luminance_values = []
for red, green, blue in zip(red_values, green_values, blue_values):
    luminance_values.append(0.299*red + 0.587*green + 0.114*blue)
</code></pre>
</div>
</div>
<div aria-atomic="true" id="zip2_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question zip2 -->
</p>
<p><a class="anchor" name="catsoop_section_2_3"></a><a class="anchor" name="_the_unpacking_operator"></a><h3 class="cs_section_title">2.3) The <code>*</code> Unpacking Operator<a class="cs_permalink" href="#_the_unpacking_operator">§</a></h3></p>
<p>We can also unpack a tuple or list into its individual elements when we are calling a function.
For example, here is a function we'll be using in the example code in this reading:</p>
<p><code>get_pixel(image, row, col)</code>: return the color of the pixel at location <span class="cs_math_to_render">(row, col)</span> in the given image.</p>
<p>This function expects row and column as separate arguments, but our code will be working with two-element <code>(row,col)</code> pairs, like <code>location = (23, 11)</code>.  We can extract the parts of the pair and pass them as separate arguments using the unpacking operator <code>*</code>:</p>
<pre><code class="language-python">get_pixel(image, *location)
</code></pre>
<p>which in this case is the same as</p>
<pre><code class="language-python">get_pixel(image, location[0], location[1])
</code></pre>
<p>As with tuple unpacking, we can use this operator not just on tuples, but also on lists, and the tuple or list can have any length.
But if it has the wrong length, so that we end up trying to give the wrong number of arguments to the function, then Python will raise an error.</p>
<p><a class="anchor" name="catsoop_section_2_4"></a><a class="anchor" name="_list_comprehensions"></a><h3 class="cs_section_title">2.4) List Comprehensions<a class="cs_permalink" href="#_list_comprehensions">§</a></h3></p>
<p>Let's also discuss one more very helpful feature of Python, which you may have seen before.
It is often the case, when we're writing programs, that we want to build new
lists based on the contents of other lists.  For example, let's imagine we have
a list defined for us, called <code>L</code>:</p>
<pre><code class="language-python">L = [9, 8, 7, 6, 5, 4, 3]
</code></pre>
<p>and let's imagine we wanted to make a new list that contains the double of each
odd number in <code>L</code>.  Here is one way we could write that piece of code:</p>
<pre><code class="language-python">out = []
for number in L:
    if number % 2 == 1:  # if number is odd
        out.append(number * 2)  # add double that number to our output
</code></pre>
<p>This form of program is very common, the general structure being:</p>
<pre><code class="language-python">out = []
for VARIABLE_NAME in SOME_ITERABLE_OBJECT:
    if SOME_CONDITION:
        out.append(SOME_EXPRESSION)
</code></pre>
<p>Python gives us a convenient short-hand notation for this kind of structure,
which we call a "list comprehension."  We can more concisely create a list like
the above by using the following general structure instead:</p>
<pre><code class="language-python">[SOME_EXPRESSION for VARIABLE_NAME in SOME_ITERABLE_OBJECT if SOME_CONDITION]
</code></pre>
<p>So, for our example from above, we could have done something like the following
instead:</p>
<pre><code class="language-python">out = [number * 2 for number in L if number % 2 == 1]
</code></pre>
<p>If we had instead wanted the double of <em>every</em> number in <code>L</code>, we could have
omitted the conditional altogether:</p>
<pre><code class="language-python">out = [number * 2 for number in L]
</code></pre>
<p>You can also put multiple nested <code>for</code> loops and/or <code>if</code> conditions into a list comprehension.
The easiest way to think about this is to first imagine how you would write it with <code>for</code> and <code>if</code> statements.
Then take those <code>for</code>s and <code>if</code>s and just move them to the end of your list comprehension, in the same order.
So:</p>
<pre><code class="language-python">out = []
for x in &lt;sequence of x&gt;:
    if &lt;condition on x&gt;:
        for y in &lt;sequence of y&gt;:
            if &lt;condition on y&gt;:
                out.append(&lt;some expression using x,y&gt;)
</code></pre>
<p>... becomes:</p>
<pre><code class="language-python">[
    &lt;some expression using x,y&gt;
    for x in &lt;sequence of x&gt;
    if &lt;condition on x&gt;
    for y in &lt;sequence of y&gt;
    if &lt;condition on y&gt;
]
</code></pre>
<p>Notice that the <code>for</code>s and <code>if</code>s are in exactly the same order in both ways of
writing the code.  We have also written the list comprehension on multiple
lines here for clarity.
(Python allows multiple lines inside parentheses, but it doesn't require them like it did when we were using <code>for</code> loops.)
Breaking a long list comprehension onto multiple indented lines is definitely a good idea.  Finally,
note that the colons after the <code>for</code> and <code>if</code> need to be omitted when you're
writing a list comprehension, because it's an expression, not a block of
statements.</p>
<p>Can the <code>if</code> in a list comprehension be followed by <code>else</code> or <code>elif</code>, like a normal <code>if</code> statement?
It turns out the answer is no, because the purpose of this <code>if</code> is to <em>filter</em> the resulting list -- producing an element if the condition is true but omitting it entirely if not.  So the "else" part is always just "skip this element," rather than code you can write.  In cases where you want <code>else</code> behavior, then you need to put it in the leading expression instead, using Python's "one-line if" syntax (also called the conditional expression or ternary operator):</p>
<pre><code class="language-python">[(SOME_EXPRESSION if SOME_CONDITION else OTHER_EXPRESSION) for VARIABLE_NAME in SOME_ITERABLE_OBJECT]
</code></pre>
<p>It's worth mentioning that it is never <em>necessary</em> to use list-comprehension
syntax, but it is a very common and convenient Python idiom.  We will use it a
lot in example code in 6.101, and it's worth practicing in your own code as
well!</p>
<p>Now that we've seen a few example list comprehensions, try your hand at
answering the following questions (and if you get stuck, that's OK; feel free
to ask for help/clarification!).</p>
<p>
<!--START question listcomp1 --><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_listcomp1" style="position: static">
<div id="listcomp1_rendered_question">
<div id="catsoop_preamble_listcomp1"></div>
<div id="catsoop_prompt_listcomp1" style="display: inline;">Consider the following piece of code, which constructs a list called <code>out</code>:
<pre><code class="lang-python">
out = []
for val in x:
    if val &lt; 0:
        out.append(-val)
</code></pre>
Firstly, try to read this code and make sure you understand what it is trying to do.  Then, write a list comprehension in the box below that produces the same list (you may assume that <code>x</code> is defined for you):<br/> <br/><tt>out =</tt> </div><input aria-labelledby="catsoop_prompt_listcomp1" id="listcomp1" name="listcomp1" size="50" type="text" value="[-val for val in x if val&lt;0]">
</input></div><div>
<span id="listcomp1_buttons">
<button class="submit btn btn-catsoop" id="listcomp1_submit" onclick="catsoop.submit('listcomp1');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="listcomp1_clearanswer" onclick="catsoop.clearanswer('listcomp1');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="listcomp1_loading_wrapper" role="status">
<span id="listcomp1_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="listcomp1_score_display" role="status"></span>
<div class="nsubmits_left" id="listcomp1_nsubmits_left" role="status">You have submitted this assignment 3 times.</div></div>
<div class="solution" id="listcomp1_solution_container">
<div id="listcomp1_solution">
<p><b>Solution:</b> <tt>[-val for val in x if val &lt; 0]</tt><p>
</p></p>
</div>
<div id="listcomp1_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="listcomp1_message" role="status"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/><br/></div>
</div>
</section>
<!--END question listcomp1 -->
</p>
<p>
<!--START question listcomp2 --><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_listcomp2" style="position: static">
<div id="listcomp2_rendered_question">
<div id="catsoop_preamble_listcomp2"></div>
<div id="catsoop_prompt_listcomp2" style="display: inline;">Assuming we have a list of numbers defined for us called <code>y</code>, write a list comprehension that makes a new list containing the squares of all the numbers in <code>y</code>.<br/> <br/><tt>squares =</tt> </div><input aria-labelledby="catsoop_prompt_listcomp2" id="listcomp2" name="listcomp2" size="50" type="text" value="[val**2 for val in y]"/>
</div><div>
<span id="listcomp2_buttons">
<button class="submit btn btn-catsoop" id="listcomp2_submit" onclick="catsoop.submit('listcomp2');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="listcomp2_clearanswer" onclick="catsoop.clearanswer('listcomp2');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="listcomp2_loading_wrapper" role="status">
<span id="listcomp2_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="listcomp2_score_display" role="status"></span>
<div class="nsubmits_left" id="listcomp2_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="listcomp2_solution_container">
<div id="listcomp2_solution">
<p><b>Solution:</b> <tt>[val**2 for val in y]</tt><p>
</p></p>
</div>
<div id="listcomp2_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="listcomp2_message" role="status"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/><br/></div>
</div>
</section>
<!--END question listcomp2 -->
</p>
<div class="question"><b>Check Yourself:</b><p>Can you use this list-comprehension idea to write an even more concise version
of <code>subtract_lists</code> from above?
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><br/>Here is one solution:
<pre><code class="language-python">def subtract_lists(l1, l2):
    assert len(l1) == len(l2)
    return [i - j for i, j in zip(l1, l2)]
</code></pre></div></div></p><p><span id="queue_checkyourself_1"></span></p></div>
<p>With these features in hand, let's turn our attention to the problem for this week's reading.</p>
<p><a class="anchor" name="catsoop_section_3"></a><a class="anchor" name="_flood_fill"></a><h2 class="cs_section_title">3) Flood Fill<a class="cs_permalink" href="#_flood_fill">§</a></h2></p>
<p>In this week's reading, we'll continue using a similar image representation to
the one we used in Labs 1 and 2, adding a new feature (common in many
image-editing programs) known as "flood fill" (or, sometimes, "paint bucket").
The idea in that context is that, when using the paint-bucket tool and clicking
on a particular spot in an image, the result will be an image where the color
that was clicked on is replaced with a new color (but only in the contiguous
region around the pixel that was clicked).  For example, consider the following
small image:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/flood_fill/ff_example_1.png" width="150"/>
</center>
<p>If we were to use the paint-bucket tool and click anywhere in the circle to
replace it with an orange color, we would see the following as a result:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/flood_fill/ff_example_2.png" width="150"/>
</center>
<p>Note that the whole blue region around the spot where we clicked has turned
orange but that the blue triangle did not change color since it was not
connected to the blue circle.</p>
<p>If we were then to click anywhere in the grey background to replace it with a
cyan color, we would see the following as a result:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/flood_fill/ff_example_3.png" width="150"/>
</center>
<p>This is the problem we will tackle this week.  We will approach this
problem by writing a function called <span class="hl"><code class="lang-py">flood_fill</code></span>, described as follows:</p>
<pre><code class="language-python">def flood_fill(image, location, new_color):
    """
    Given an image, replace the same-colored region around a given location
    with a given color.  Mutates the original image to reflect the change.

    Parameters:
      * image: the image to operate on
      * location: a (row, col) tuple representing the starting location of the
                  flood-fill process
      * new_color: the replacement color, as an (r, g, b) tuple where all values
                   are between 0 and 255, inclusive
    """
    pass
</code></pre>
<div class="callout callout-note"><div class="callout-title">Note: Color Representation</div>
<p>Note that the choice of representation here (in particular using a tuple to
represent a color) is very similar to the representation we are using in Image Processing 2.
You may wish to take another look at Lab 2's description
of color images before continuing on.</p>
</div>
<p><a class="anchor" name="catsoop_section_3_1"></a><a class="anchor" name="_following_along"></a><h3 class="cs_section_title">3.1) Following Along<a class="cs_permalink" href="#_following_along">§</a></h3></p>
<p>We encourage you to follow along in your own text editor as we develop this
program over the course of the reading.  As usual, we encourage you to type
out the programs and go through all the same steps we describe in the reading
so that you can experience the process for yourself.</p>
<p>The following zip file has some starter code that you can use to get started:
<a href="https://py.mit.edu/_static/spring24/readings/flood_fill/flood_fill.zip"><tt>flood_fill.zip</tt></a></p>
<p>The relevant code is in <code>flood_fill.py</code>, and a few example images are included
as well.  This code uses a library called
<a href="https://www.pygame.org/wiki/about"><code>pygame</code></a> to display images to the screen
while it is running, so, if you want to follow along, you will need to install
<code>pygame</code>, which you should be able to do with the following command (or the
equivalent for your Python setup):</p>
<pre><code class="language-nohighlight">$ pip3 install --upgrade pygame
</code></pre>
<p>If you are having trouble installing <code>pygame</code>, please feel free to reach out
in open lab hours or via the <a href="mailto:6.101-help@mit.edu">6.101-help@mit.edu</a> mailing list!</p>
<p><a class="anchor" name="catsoop_section_3_2"></a><a class="anchor" name="_helper_functions"></a><h3 class="cs_section_title">3.2) Helper Functions<a class="cs_permalink" href="#_helper_functions">§</a></h3></p>
<p>Throughout this reading, we will make use of a few helper functions to make
reading and writing the code a little bit nicer.  In particular, we will assume the
existence of the following functions when writing our code for <code>flood_fill</code>:</p>
<ul>
<li><code>get_width(image)</code>: given an image, return its width in pixels (as an integer).</li>
<li><code>get_height(image)</code>: given an image, return its height in pixels (as an integer).</li>
<li><code>get_pixel(image, row, col)</code>: return the color of the pixel at location <span class="cs_math_to_render">(row, col)</span> in the given image.</li>
<li><code>set_pixel(image, row, col, color)</code>: mutate the given image to replace the color at location <span class="cs_math_to_render">(row, col)</span> with the given color.</li>
</ul>
<p>The <code>flood_fill.py</code> file contains implementations of these functions
corresponding to a <code>pygame</code>-based image representation, but we could also
implement versions of these functions for our image representation from the image-processing
labs.  With those helpers in hand, we will have set up a nice set of
abstractions for ourselves; and, if we write our <code>flood_fill</code> function using
those functions exclusively (rather than directly accessing the underlying
image representation), then our same <code>flood_fill</code> code can be used for either
representation without any changes!</p>
<p>As we look at more complex and interesting programs, it is increasingly important to create helper functions like this, as part of structuring our code for easier understanding and easier change.</p>
<p>In the box below, fill in the definitions of these functions, assuming that
<span class="cs_math_to_render">(x=0, y=0)</span> is in the upper-left corner of the image, that <span class="cs_math_to_render">x</span> increases as we
move to the right, and that <span class="cs_math_to_render">y</span> increases as we move down.  You may assume that
the given images are all in the format from Labs 1 and 2.</p>
<p>
<!--START question ff_helpers --><section aria-label="Question">
<div class="question question-pythoncode" id="cs_qdiv_ff_helpers" style="position: static">
<div id="ff_helpers_rendered_question">
<div id="catsoop_preamble_ff_helpers"></div>
<div id="catsoop_prompt_ff_helpers" style="display: inline;"></div>
<textarea id="ff_helpers" name="ff_helpers">def get_width(image):
    return image["width"]
def get_height(image):
    return image["height"]
def get_pixel(image, row, col):
    return image["pixels"][row*int(image["width"]) + col]
def set_pixel(image, row, col, color):
    image["pixels"][row*int(image["width"]) + col] = color
</textarea>
<script type="text/javascript">
var cs_codemirror_ff_helpers = catsoop.codemirror.editorFromTextArea(document.getElementById('ff_helpers'), 'python');
</script>
</div><div>
<span id="ff_helpers_buttons">
<button class="submit btn btn-catsoop" id="ff_helpers_submit" onclick="catsoop.submit('ff_helpers');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="ff_helpers_clearanswer" onclick="catsoop.clearanswer('ff_helpers');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="ff_helpers_loading_wrapper" role="status">
<span id="ff_helpers_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="ff_helpers_score_display" role="status"></span>
<div class="nsubmits_left" id="ff_helpers_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="ff_helpers_solution_container">
<div id="ff_helpers_solution">
Here is the solution we wrote:<br/>
<pre><code class="lang-python" id="ff_helpers_soln_highlight">def get_width(image):
    return image['width']

def get_height(image):
    return image['height']

def get_pixel(image, row, col):
    return image['pixels'][row * get_width(image) + col]

def set_pixel(image, row, col, color):
    image['pixels'][row * get_width(image) + col] = color
</code></pre>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
hljs.highlightBlock(document.getElementById("ff_helpers_soln_highlight"));
// @license-end
</script>
</div>
<div id="ff_helpers_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="ff_helpers_message" role="status">
<br/> Your score on your most recent submission was: 100.00%<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/>
<br/><details><summary class="btn btn-catsoop">Show/Hide Detailed Results</summary><div class="response" id="ff_helpers_result_showhide"><h2>Test Results:</h2>
<center><h3>Test 01</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 4, 'width': 3, 'pixels': [(230, 70, 167), (28, 153, 192), (154, 120, 163), (113, 255, 21), (98, 81, 158), (12, 112, 204), (94, 52, 175), (255, 119, 71), (73, 221, 141), (162, 28, 101), (106, 86, 21), (37, 82, 127)]}<br/>ans = get_height(im)</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">4</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">4</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 02</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 9, 'width': 8, 'pixels': [(151, 119, 206), (138, 220, 206), (238, 220, 225), (96, 222, 22), (203, 79, 109), (223, 34, 105), (178, 18, 16), (56, 36, 125), (72, 103, 29), (63, 219, 87), (101, 172, 25), (62, 68, 43), (243, 86, 200), (226, 232, 215), (73, 56, 69), (45, 33, 125), (11, 154, 28), (213, 171, 200), (194, 232, 129), (68, 199, 106), (152, 191, 76), (12, 94, 63), (100, 246, 139), (161, 0, 102), (49, 249, 150), (87, 76, 164), (136, 85, 19), (123, 41, 167), (76, 254, 8), (22, 54, 174), (231, 37, 71), (174, 38, 193), (128, 86, 170), (150, 52, 15), (98, 30, 20), (212, 236, 236), (178, 220, 89), (223, 78, 220), (44, 249, 38), (12, 125, 41), (174, 203, 102), (37, 70, 12), (74, 56, 31), (254, 127, 160), (8, 178, 207), (174, 194, 200), (19, 230, 150), (223, 247, 246), (111, 248, 6), (104, 246, 104), (179, 104, 119), (183, 231, 135), (119, 30, 228), (89, 199, 242), (171, 233, 88), (97, 211, 235), (78, 106, 237), (88, 111, 241), (56, 87, 55), (226, 27, 179), (31, 205, 79), (12, 184, 165), (130, 113, 67), (147, 100, 132), (102, 162, 51), (21, 183, 190), (251, 146, 179), (60, 119, 222), (75, 163, 195), (237, 165, 191), (77, 77, 62), (137, 147, 219)]}<br/>ans = get_height(im)</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">9</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">9</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 03</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 6, 'width': 2, 'pixels': [(3, 74, 92), (125, 208, 249), (4, 194, 247), (99, 169, 200), (66, 94, 228), (90, 135, 49), (134, 214, 229), (239, 249, 15), (25, 11, 212), (162, 72, 45), (116, 244, 9), (43, 236, 64)]}<br/>ans = get_width(im)</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">2</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">2</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 04</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 6, 'width': 4, 'pixels': [(60, 171, 37), (206, 101, 53), (76, 117, 84), (88, 63, 206), (69, 199, 187), (222, 182, 77), (36, 26, 86), (139, 226, 111), (124, 104, 78), (95, 105, 100), (189, 12, 43), (1, 125, 154), (110, 217, 110), (66, 189, 240), (114, 131, 113), (28, 204, 175), (46, 249, 154), (65, 97, 95), (188, 54, 189), (116, 87, 51), (75, 46, 111), (13, 155, 54), (120, 83, 102), (131, 20, 73)]}<br/>ans = get_width(im)</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">4</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">4</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 05</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 5, 'width': 2, 'pixels': [(149, 107, 221), (97, 246, 151), (181, 195, 236), (119, 5, 150), (245, 141, 137), (214, 232, 245), (133, 42, 211), (3, 217, 236), (159, 94, 138), (172, 241, 209)]}<br/>ans = get_pixel(im, 3, 1)</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(3, 217, 236)</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(3, 217, 236)</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 06</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 4, 'width': 8, 'pixels': [(12, 159, 157), (10, 237, 110), (0, 96, 166), (78, 247, 141), (204, 136, 242), (208, 119, 18), (213, 17, 162), (217, 27, 14), (56, 240, 182), (40, 135, 239), (106, 69, 94), (155, 121, 215), (78, 179, 1), (123, 130, 40), (189, 95, 131), (39, 207, 41), (128, 75, 104), (68, 254, 62), (221, 100, 121), (240, 2, 138), (174, 129, 7), (40, 239, 155), (175, 154, 37), (140, 152, 63), (234, 95, 236), (65, 158, 133), (102, 141, 97), (99, 183, 213), (38, 120, 92), (144, 182, 42), (100, 219, 48), (11, 221, 242)]}<br/>ans = get_pixel(im, 2, 3)</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(240, 2, 138)</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(240, 2, 138)</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 07</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 3, 'width': 7, 'pixels': [(45, 67, 178), (217, 158, 244), (116, 143, 56), (140, 210, 86), (159, 143, 243), (88, 212, 31), (98, 235, 177), (216, 175, 234), (206, 21, 183), (199, 57, 88), (239, 169, 217), (242, 102, 155), (71, 156, 80), (113, 226, 181), (157, 214, 232), (133, 203, 39), (216, 4, 58), (140, 20, 194), (55, 8, 132), (169, 226, 185), (128, 117, 198)]}<br/>ans = get_pixel(im, 2, 0)</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(157, 214, 232)</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(157, 214, 232)</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 08</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 4, 'width': 8, 'pixels': [(245, 83, 102), (175, 97, 168), (73, 229, 92), (134, 5, 24), (82, 110, 118), (159, 182, 206), (84, 12, 204), (7, 8, 255), (76, 114, 22), (129, 30, 142), (205, 127, 137), (253, 229, 145), (122, 225, 158), (114, 240, 89), (152, 133, 227), (141, 58, 10), (76, 78, 55), (242, 194, 172), (175, 145, 49), (38, 171, 45), (249, 122, 3), (197, 78, 7), (10, 105, 32), (146, 199, 222), (96, 246, 166), (201, 35, 185), (56, 190, 189), (222, 29, 68), (110, 217, 136), (12, 153, 63), (113, 148, 96), (237, 200, 251)]}<br/>res = set_pixel(im, 1, 4, (89, 183, 46))<br/>ans = (res, im["pixels"])</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(None, [(245, 83, 102), (175, 97, 168), (73, 229, 92), (134, 5, 24), (82, 110, 118), (159, 182, 206), (84, 12, 204), (7, 8, 255), (76, 114, 22), (129, 30, 142), (205, 127, 137), (253, 229, 145), (89, 183, 46), (114, 240, 89), (152, 133, 227), (141, 58, 10), (76, 78, 55), (242, 194, 172), (175, 145, 49), (38, 171, 45), (249, 122, 3), (197, 78, 7), (10, 105, 32), (146, 199, 222), (96, 246, 166), (201, 35, 185), (56, 190, 189), (222, 29, 68), (110, 217, 136), (12, 153, 63), (113, 148, 96), (237, 200, 251)])</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(None, [(245, 83, 102), (175, 97, 168), (73, 229, 92), (134, 5, 24), (82, 110, 118), (159, 182, 206), (84, 12, 204), (7, 8, 255), (76, 114, 22), (129, 30, 142), (205, 127, 137), (253, 229, 145), (89, 183, 46), (114, 240, 89), (152, 133, 227), (141, 58, 10), (76, 78, 55), (242, 194, 172), (175, 145, 49), (38, 171, 45), (249, 122, 3), (197, 78, 7), (10, 105, 32), (146, 199, 222), (96, 246, 166), (201, 35, 185), (56, 190, 189), (222, 29, 68), (110, 217, 136), (12, 153, 63), (113, 148, 96), (237, 200, 251)])</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 09</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 2, 'width': 10, 'pixels': [(141, 209, 55), (78, 140, 123), (190, 255, 89), (50, 105, 47), (242, 146, 59), (14, 104, 43), (33, 117, 84), (222, 164, 65), (45, 96, 153), (81, 23, 167), (50, 115, 189), (66, 1, 41), (13, 63, 207), (169, 119, 15), (63, 44, 186), (234, 34, 28), (203, 253, 19), (213, 208, 74), (220, 18, 201), (156, 197, 110)]}<br/>res = set_pixel(im, 0, 6, (13, 22, 236))<br/>ans = (res, im["pixels"])</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(None, [(141, 209, 55), (78, 140, 123), (190, 255, 89), (50, 105, 47), (242, 146, 59), (14, 104, 43), (13, 22, 236), (222, 164, 65), (45, 96, 153), (81, 23, 167), (50, 115, 189), (66, 1, 41), (13, 63, 207), (169, 119, 15), (63, 44, 186), (234, 34, 28), (203, 253, 19), (213, 208, 74), (220, 18, 201), (156, 197, 110)])</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(None, [(141, 209, 55), (78, 140, 123), (190, 255, 89), (50, 105, 47), (242, 146, 59), (14, 104, 43), (13, 22, 236), (222, 164, 65), (45, 96, 153), (81, 23, 167), (50, 115, 189), (66, 1, 41), (13, 63, 207), (169, 119, 15), (63, 44, 186), (234, 34, 28), (203, 253, 19), (213, 208, 74), (220, 18, 201), (156, 197, 110)])</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
<p></p><hr/><p></p>
<center><h3>Test 10</h3>
<i></i></center><p></p>
The test case was:<br/>
<p><tt>#Your Code Here<br/>im = {'height': 9, 'width': 7, 'pixels': [(219, 133, 179), (168, 215, 253), (235, 163, 248), (56, 81, 189), (52, 126, 37), (163, 218, 37), (100, 139, 180), (132, 249, 141), (181, 170, 202), (147, 119, 133), (192, 188, 104), (147, 63, 91), (163, 190, 237), (138, 198, 99), (205, 156, 81), (167, 240, 181), (36, 213, 188), (206, 76, 129), (237, 248, 80), (74, 108, 152), (106, 31, 242), (27, 223, 230), (213, 193, 14), (162, 198, 50), (59, 124, 189), (162, 47, 128), (26, 68, 61), (19, 96, 211), (97, 64, 159), (247, 249, 252), (145, 210, 9), (136, 102, 211), (113, 234, 110), (143, 37, 123), (149, 164, 56), (52, 228, 126), (29, 143, 254), (193, 187, 176), (236, 77, 71), (128, 40, 223), (48, 219, 28), (142, 234, 184), (176, 53, 63), (255, 221, 214), (214, 123, 25), (13, 230, 68), (123, 78, 11), (72, 138, 149), (108, 56, 224), (93, 176, 191), (203, 143, 89), (225, 23, 242), (134, 73, 232), (59, 78, 58), (174, 133, 170), (125, 176, 205), (198, 11, 66), (114, 8, 176), (41, 50, 14), (108, 139, 118), (83, 155, 8), (246, 243, 30), (60, 187, 44)]}<br/>res = set_pixel(im, 7, 1, (66, 187, 93))<br/>ans = (res, im["pixels"])</tt></p><p> </p>
<p>Our solution produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(None, [(219, 133, 179), (168, 215, 253), (235, 163, 248), (56, 81, 189), (52, 126, 37), (163, 218, 37), (100, 139, 180), (132, 249, 141), (181, 170, 202), (147, 119, 133), (192, 188, 104), (147, 63, 91), (163, 190, 237), (138, 198, 99), (205, 156, 81), (167, 240, 181), (36, 213, 188), (206, 76, 129), (237, 248, 80), (74, 108, 152), (106, 31, 242), (27, 223, 230), (213, 193, 14), (162, 198, 50), (59, 124, 189), (162, 47, 128), (26, 68, 61), (19, 96, 211), (97, 64, 159), (247, 249, 252), (145, 210, 9), (136, 102, 211), (113, 234, 110), (143, 37, 123), (149, 164, 56), (52, 228, 126), (29, 143, 254), (193, 187, 176), (236, 77, 71), (128, 40, 223), (48, 219, 28), (142, 234, 184), (176, 53, 63), (255, 221, 214), (214, 123, 25), (13, 230, 68), (123, 78, 11), (72, 138, 149), (108, 56, 224), (93, 176, 191), (66, 187, 93), (225, 23, 242), (134, 73, 232), (59, 78, 58), (174, 133, 170), (125, 176, 205), (198, 11, 66), (114, 8, 176), (41, 50, 14), (108, 139, 118), (83, 155, 8), (246, 243, 30), (60, 187, 44)])</tt></font></p><p> </p>
<p>Your submission produced the following value for <tt>ans</tt>:
<br/><font color="blue"><tt style="white-space: pre-wrap">(None, [(219, 133, 179), (168, 215, 253), (235, 163, 248), (56, 81, 189), (52, 126, 37), (163, 218, 37), (100, 139, 180), (132, 249, 141), (181, 170, 202), (147, 119, 133), (192, 188, 104), (147, 63, 91), (163, 190, 237), (138, 198, 99), (205, 156, 81), (167, 240, 181), (36, 213, 188), (206, 76, 129), (237, 248, 80), (74, 108, 152), (106, 31, 242), (27, 223, 230), (213, 193, 14), (162, 198, 50), (59, 124, 189), (162, 47, 128), (26, 68, 61), (19, 96, 211), (97, 64, 159), (247, 249, 252), (145, 210, 9), (136, 102, 211), (113, 234, 110), (143, 37, 123), (149, 164, 56), (52, 228, 126), (29, 143, 254), (193, 187, 176), (236, 77, 71), (128, 40, 223), (48, 219, 28), (142, 234, 184), (176, 53, 63), (255, 221, 214), (214, 123, 25), (13, 230, 68), (123, 78, 11), (72, 138, 149), (108, 56, 224), (93, 176, 191), (66, 187, 93), (225, 23, 242), (134, 73, 232), (59, 78, 58), (174, 133, 170), (125, 176, 205), (198, 11, 66), (114, 8, 176), (41, 50, 14), (108, 139, 118), (83, 155, 8), (246, 243, 30), (60, 187, 44)])</tt></font><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></p>
</div></details></div>
</div>
</section>
<!--END question ff_helpers -->
</p>
<p><a class="anchor" name="catsoop_section_3_3"></a><a class="anchor" name="_high_level_strategy"></a><h3 class="cs_section_title">3.3) High-Level Strategy<a class="cs_permalink" href="#_high_level_strategy">§</a></h3></p>
<p>With those pieces in hand, we can make our first attempt at a high-level plan.
Before reading on, it's worth taking a bit of time to think for yourself about
this problem.  Can you come up with a high-level strategy for solving this
problem?  We'll discuss one such approach below.</p>
<p>Ultimately, we want to color in all of the pixels in one contiguous region.
But, when we first start, we only know the first pixel that we are interested
in.  So, we will need an approach that will allow us to "discover" new locations
that need to be colored in, as we are coloring in those that we already know
about.</p>
<p>Here is one possible high-level strategy, which we will use as a starting point
for our conversation in this reading:</p>
<ul>
<li>Store the original color of the starting location in the image (let's call it <span class="cs_math_to_render">C_0</span>).</li>
<li>Keep a list <span class="cs_math_to_render">L</span> of all locations we need to color in, starting with only the location that we started at.</li>
<li>While we still have locations to color in (while <span class="cs_math_to_render">L</span> is nonempty), repeat the following:
<ul>
<li>Pick a location from <span class="cs_math_to_render">L</span>, remove it from <span class="cs_math_to_render">L</span>, and color it in with our new color.</li>
<li>Add that location's neighbors to <span class="cs_math_to_render">L</span>, so long as they have color <span class="cs_math_to_render">C_0</span>.</li>
</ul>
</li>
</ul>
<p>We put a single pixel in <span class="cs_math_to_render">L</span> as a starting point and then grow
from there.  <span class="cs_math_to_render">L</span> keeps track of all the pixels that we know about so
far but that we haven't colored yet.</p>
<p>On each iteration of the algorithm, we're going to pull one pixel location out
of <span class="cs_math_to_render">L</span>, color it in, and then add all four of its neighbors back into <span class="cs_math_to_render">L</span>.
Then, for each of those, we'll pull them off <span class="cs_math_to_render">L</span> eventually, recolor them,
and add <em>their</em> neighbors back to <span class="cs_math_to_render">L</span>, and so on.  But, if we ever reach a
neighbor that is a different color than the original starting pixel, we won't
add that neighbor to <span class="cs_math_to_render">L</span> because we shouldn't color it.  This process
continues until <span class="cs_math_to_render">L</span> is empty.</p>
<p>The hope is that, eventually, we will add every location within the region that
we first clicked on to our list of locations to color in, and we will
eventually work our way through the whole list of locations; so, in this way, we
hope eventually to color in all of the right spots.</p>
<p>This strategy of gradually accumulating things that we need to act on and then
considering them one-by-one is a common approach to solving a wide variety of
problems, as we'll see over the next couple of weeks of labs and readings in
6.101.  In this kind of setup, we'll refer to the list <span class="cs_math_to_render">L</span> as an <em>agenda</em>
(sometimes also called a <em>work queue</em>).</p>
<div class="question"><b>Check Yourself:</b><p><p>Think a bit about this plan.  Will this work as expected?  Do you see any
potential issues with it?  Are there any details we've left out of the plan
above that might affect its operation?</p>
<p>If you're having trouble understanding the high-level idea, that's OK; it's
somewhat complex!  In that case, we encourage you to ask for
help/clarification, either in-person or via 6.101-help.
</p></p><p><span id="queue_checkyourself_2"></span></p></div>
<p><a class="anchor" name="catsoop_section_3_4"></a><a class="anchor" name="_a_first_attempt_at_code"></a><h3 class="cs_section_title">3.4) A First Attempt at Code<a class="cs_permalink" href="#_a_first_attempt_at_code">§</a></h3></p>
<p>For now, there is no need to try to write out code for this part for yourself,
but you are welcome to give it a shot if you would like!</p>
<p>When you're ready, take a look at the code below, which is an attempt to
implement the strategy described above, and answer the question that follows
it.</p>
<p>It's also worth noting that this code makes use of some interesting
features of Python that we expect some of you may not have seen before.
These new features are called out in the code and will be explained later in this reading,
but, if something in the code below doesn't make sense and it isn't explained later,
please feel free to ask (either in-person or via 6.101-help)!</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><pre><code class="language-python">def flood_fill(image, location, new_color):
    # store the original color that we clicked on
    # (recall that "*location" is equivalent to "location[0],location[1]")
    original_color = get_pixel(image, *location)

    # helper function to get neighboring locations of a given row, col coordinate
    def get_neighbors(cell):
        row, col = cell
        return [(row+1, col), (row-1, col), (row, col+1), (row, col-1)]

    # all of the cells we need to color in
    to_color = []

    # while there are still things to color in
    # ("while to_color" is equivalent to "while len(to_color) != 0")
    while to_color:
        # remove a single (row, col) tuple from to_color and call it this_cell
        this_cell = to_color.pop(0)

        # replace that spot with the given color
        set_pixel(image, *this_cell, new_color)

        # add each neighbor to to_color
        for neighbor in get_neighbors(this_cell):
            to_color.append(neighor)
</code></pre></div></div>
<div class="question"><b>Check Yourself:</b><p>How well does this code match the plan described above?  Is anything missing?</p><p><span id="queue_checkyourself_3"></span></p></div>
<p>
<!--START question ff_code_assessment --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_ff_code_assessment" style="position: static">
<div id="ff_code_assessment_rendered_question">
<div id="catsoop_preamble_ff_code_assessment"></div>
<div id="catsoop_prompt_ff_code_assessment" style="display: inline;">Which of the following most accurately describes the code as written above?<br/></div><div aria-labelledby="catsoop_prompt_ff_code_assessment" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="ff_code_assessment_opts_0" name="ff_code_assessment_opts" type="radio" value="0"/><label for="ff_code_assessment_opts_0">It contains a Python syntax error.</label></div>
<div style="margin-bottom: 10px;"><input id="ff_code_assessment_opts_1" name="ff_code_assessment_opts" type="radio" value="1"/><label for="ff_code_assessment_opts_1">It will raise an exception when it runs.</label></div>
<div style="margin-bottom: 10px;"><input id="ff_code_assessment_opts_2" name="ff_code_assessment_opts" type="radio" value="2"/><label for="ff_code_assessment_opts_2">It will not raise an exception but it will color in too many spots.</label></div>
<div style="margin-bottom: 10px;"><input checked="" id="ff_code_assessment_opts_3" name="ff_code_assessment_opts" type="radio" value="3"/><label for="ff_code_assessment_opts_3">It will not raise an exception but it will color in too few spots.</label></div>
<div style="margin-bottom: 10px;"><input id="ff_code_assessment_opts_4" name="ff_code_assessment_opts" type="radio" value="4"/><label for="ff_code_assessment_opts_4">It will work as expected.</label></div>
</div><input id="ff_code_assessment" name="ff_code_assessment" type="hidden" value="3"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=ff_code_assessment_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("ff_code_assessment").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="ff_code_assessment_buttons">
<button class="submit btn btn-catsoop" id="ff_code_assessment_submit" onclick="catsoop.submit('ff_code_assessment');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="ff_code_assessment_clearanswer" onclick="catsoop.clearanswer('ff_code_assessment');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="ff_code_assessment_loading_wrapper" role="status">
<span id="ff_code_assessment_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="ff_code_assessment_score_display" role="status"></span>
<div class="nsubmits_left" id="ff_code_assessment_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="ff_code_assessment_solution_container">
<div id="ff_code_assessment_solution">
<b>Solution:</b> It will not raise an exception but it will color in too few spots.
</div>
<div id="ff_code_assessment_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="ff_code_assessment_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question ff_code_assessment -->
</p>
<p><a class="anchor" name="catsoop_section_4"></a><a class="anchor" name="_debugging"></a><h2 class="cs_section_title">4) Debugging<a class="cs_permalink" href="#_debugging">§</a></h2></p>
<p>As a running example for today, let's consider the following image, which is
included in the zip file above as <code>flood_input.png</code>:</p>
<center>
<img class="pixels" src="https://py.mit.edu/_static/spring24/readings/flood_fill/flood_input.png" style="border: 2px solid grey;" width="400"/>
</center>
<p>
<!--START question input_height_and_width --><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_input_height_and_width" style="position: static">
<div id="input_height_and_width_rendered_question">
<div id="catsoop_preamble_input_height_and_width"></div>
<div id="catsoop_prompt_input_height_and_width" style="display: inline;">Either add something to <code>flood_fill.py</code> or use your code from Lab 2 to determine the height and the width of this image.  What are they?  Enter your answer below, as a tuple of integers <code>(height, width)</code>:<br/></div><input aria-labelledby="catsoop_prompt_input_height_and_width" id="input_height_and_width" name="input_height_and_width" size="50" type="text" value="(100,100)">
</input></div><div>
<span id="input_height_and_width_buttons">
<button class="submit btn btn-catsoop" id="input_height_and_width_submit" onclick="catsoop.submit('input_height_and_width');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="input_height_and_width_clearanswer" onclick="catsoop.clearanswer('input_height_and_width');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="input_height_and_width_loading_wrapper" role="status">
<span id="input_height_and_width_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="input_height_and_width_score_display" role="status"></span>
<div class="nsubmits_left" id="input_height_and_width_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="input_height_and_width_solution_container">
<div id="input_height_and_width_solution">
<p><b>Solution:</b> <tt>(100, 100)</tt><p>
</p></p>
</div>
<div id="input_height_and_width_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="input_height_and_width_message" role="status"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/><br/></div>
</div>
</section>
<!--END question input_height_and_width -->
</p>
<p>But, before we get too lost in the sheer beauty of this image, let's remember
that our goal for this reading is not just art appreciation but implementing
flood fill.  As such, we'll use this image to test our flood-fill implementation
as we work.</p>
<p>Let's start by using the code from above to change the color of the unsettling
humanoid creature on the left.  We'll do this by calling <code>flood_fill</code> with a
location in the center of that creature.</p>
<div class="response" markdown="">
<p>Here's how you call <code>flood_fill</code> on your own computer:</p>
<ol>
<li>Run <code>python flood_fill.py</code>.</li>
<li>In the image that pops up, click on any pixel, and it will call <code>flood_fill</code> with that location.</li>
<li>The <code>new_color</code> used for flood fill is purple by default, but you can switch to using another color by typing a letter on your keyboard: <code>r</code> for red, <code>w</code> for white, <code>k</code> for black, <code>g</code> for green, <code>b</code> for blue, <code>c</code> for cyan, <code>y</code> for yellow, <code>p</code> for purple, <code>o</code> for orange, <code>n</code> for brown, <code>e</code> for grey.</li>
</ol>
</div>
<p>So what happens when you run the code and click on a location?</p>
<p>Oops. In fact, the code does nothing.  This behavior may be a little bit
surprising!  Let's try debugging it.  Along the way, we will be seeing some
common techniques for debugging and testing your code.</p>
<p><a class="anchor" name="catsoop_section_4_1"></a><a class="anchor" name="_high_level_strategy_2"></a><h3 class="cs_section_title">4.1) High-level Strategy<a class="cs_permalink" href="#_high_level_strategy_2">§</a></h3></p>
<p>Here's the general strategy to pursue whenever you have a bug:</p>
<ol>
<li><strong>Locate</strong>: find where the bug is happening.</li>
<li><strong>Understand</strong>: understand the cause of the bug.</li>
<li><strong>Fix</strong> the bug.</li>
<li><strong>Verify</strong> that the fix worked.</li>
<li><strong>Learn the bug's lesson</strong>.  Every bug is a learning opportunity in disguise!  What can we learn from this one, and how can we avoid making similar mistakes in the future?</li>
</ol>
<p>It's very important to avoid jumping straight to step 3.  Making random changes
to your code hoping to fix it is not a strategy for successful programming, nor
an efficient way to fix the issue!  It's a recipe for creating a complex and
confusing spaghetti of code, or for "band-aids" that address the immediate
symptom without fixing the underlying cause (which will likely rear its ugly
head again somewhere down the line).  Locate and understand the bug first, then
plan how to fix it and execute your plan.  Sometimes the fix is a simple
change, but sometimes it requires rethinking your approach to the problem.</p>
<p><a class="anchor" name="catsoop_section_4_2"></a><a class="anchor" name="_print_debugging"></a><h3 class="cs_section_title">4.2) Print Debugging<a class="cs_permalink" href="#_print_debugging">§</a></h3></p>
<p>The most common debugging technique -- available in virtually every programming
environment you might use -- is printing.  Printing is useful in a broad
variety of different scenarios, but, for now, let's see how to use this to ask
the question: where is this bug?  Is our <code>flood_fill</code> code being run at all?
Let's put in some print statements, just to decide: is <code>flood_fill</code> being
called or not?</p>
<div class="question"><b>Check Yourself:</b><p><p>Where should we put print statements here to answer the question of whether
the function is being called or not?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide Our Approach</button><div summary="Show/Hide Our Approach"><p>We'll take the following approach (the four calls we've added to <code>print</code> are
highlighted in yellow).</p>
<div id="code-example-prints-1" markdown="">
<pre><code class="language-python highlight-lines">def flood_fill(image, location, new_color):
    print('start of function')

    # store the original color that we clicked on
    # (recall that "*location" is equivalent to "location[0],location[1]")
    original_color = get_pixel(image, *location)

    # helper function to get neighboring locations of a given row, col coordinate
    def get_neighbors(cell):
        row, col = cell
        return [(row+1, col), (row-1, col), (row, col+1), (row, col-1)]

    # all of the cells we need to color in
    to_color = []

    print('before loop')

    # while there are still things to color in
    # ("while to_color" is equivalent to "while len(to_color) != 0")
    while to_color:
        # remove a single (row, col) tuple from to_color and call it this_cell
        this_cell = to_color.pop(0)
        print('inside loop', this_cell)

        # replace that spot with the given color
        set_pixel(image, *this_cell, new_color)

        # add each neighbor to to_color
        for neighbor in get_neighbors(this_cell):
            to_color.append(neighor)

    print('after loop')
</code></pre>
</div>
<p>Why did we choose those places for our print statements?  Well, to be honest,
we're already starting to think a little bit ahead.  The first print statement
(which prints <code>"start of function"</code>) is the one that really answers the
question that we originally posed.  Since it's the very first thing at the top
of the function, that value will be printed if we call <code>flood_fill</code> at all.</p>
<p>The other print statements are actually going a little bit deeper; we've added
those so that we can get a sense of how the process we planned out above
evolves once the function is called.</p>
<style>
#code-example-prints-1 > section span[data-line-number="2"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-prints-1 > section span[data-line-number="16"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-prints-1 > section span[data-line-number="23"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-prints-1 > section span[data-line-number="32"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
</div></div>
</p><p><span id="queue_checkyourself_4"></span></p></div>
<p>When running the code with the print statements added, here's what we see
printed to the screen when we click the middle of the creature in the image:</p>
<pre><code class="language-plain">start of function
before loop
after loop
</code></pre>
<p>This output answers our original question: yes, the <code>flood_fill</code> function is
running.  But, it also tells us something else.  Notice that we don't see
"inside loop" anywhere in our output!  What does this mean about how our
program was running?</p>
<p><a class="anchor" name="catsoop_section_4_2_1"></a><a class="anchor" name="_aside_truthiness"></a><h4 class="cs_section_title">4.2.1) Aside: Truthiness<a class="cs_permalink" href="#_aside_truthiness">§</a></h4></p>
<p>While we're thinking about that, it's worth bringing up another feature of the
code: the condition of the <code>while</code> loop probably looks a little strange.  Why
is it just <code>while to_color:</code>?  Why not some kind of Boolean expression?  It
turns out that Python, like many languages, allows types other than Boolean to
appear in places where a Boolean is expected, like the condition of a <code>while</code>
or <code>if</code> statement.  For these other types, Python uses the object's
"truthiness" (yes, that's the real term people use) to decide whether to take
the given action.  Each object in Python, regardless of type, is either
"truthy" or "falsy."  Which objects are truthy and falsy depends on the type
we're dealing with, but here are a few examples:</p>
<center>
<table border="1">
<tr><th>Type</th><th>Falsy Values</th><th>Truthy Values</th></tr>
<tr><td><code>bool</code></td><td><code>False</code></td><td><code>True</code></td></tr>
<tr><td><code>list</code></td><td><code>[]</code> (empty list)</td><td>all other lists</td></tr>
<tr><td><code>tuple</code></td><td><code>()</code> (empty tuple)</td><td>all other tuples</td></tr>
<tr><td><code>str</code></td><td><code>""</code> (empty string)</td><td>all other strings</td></tr>
<tr><td><code>int</code></td><td><code>0</code></td><td>all other integers</td></tr>
</table>
</center>
<p>In general, the convention in Python is that values that are empty in some sense
are falsy, and all other values are truthy.</p>
<p><a class="anchor" name="catsoop_section_4_2_2"></a><a class="anchor" name="_back_to_the_code"></a><h4 class="cs_section_title">4.2.2) Back to the Code!<a class="cs_permalink" href="#_back_to_the_code">§</a></h4></p>
<p>So, what does this mean for the code we were just considering?  We were looking
at a looping structure like the following:</p>
<pre><code class="language-py">while to_color:
    # ...
</code></pre>
<p>So, now, we can see why we never entered the loop: the agenda <code>to_color</code> was
initialized to an empty list, so <code>while to_color</code> found that it was falsy and
immediately skipped the loop.</p>
<p>It's worth mentioning that we could have written this loop differently.  Given
Python's notion of truthiness, the structure above is equivalent to either of
the following forms:</p>
<pre><code class="language-py">while to_color != []:
    # ...
</code></pre>
<pre><code class="language-py">while len(to_color) &gt; 0:
    # ...
</code></pre>
<p>While the first form is nice for its compactness, either of the other two forms
is arguably clearer in its intentions; so, stylistically, it may make sense to
write out the slightly longer (but more explicit) form.</p>
<p>Regardless of how we write that looping condition, we can think about the bug
here by recalling our plan: we were supposed to start with our original pixel
location in the agenda and then loop until we run out of locations in the
agenda.</p>
<p>Answer the following question about this code and then view the related
answer/explanation to get a sense of how to proceed from here.</p>
<p>
<!--START question code_bug_line --><section aria-label="Question">
<div class="question question-smallbox" id="cs_qdiv_code_bug_line" style="position: static">
<div id="code_bug_line_rendered_question">
<div id="catsoop_preamble_code_bug_line"></div>
<div id="catsoop_prompt_code_bug_line" style="display: inline;">Given our plan from earlier, which single line should we change
in the code above to fix this bug (that we never enter the
loop)?  Enter the Python code that should be changed:<br/></div><input aria-labelledby="catsoop_prompt_code_bug_line" id="code_bug_line" name="code_bug_line" type="text" value="to_color = []"/>
</div><div>
<span id="code_bug_line_buttons">
<button class="submit btn btn-catsoop" id="code_bug_line_submit" onclick="catsoop.submit('code_bug_line');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="code_bug_line_clearanswer" onclick="catsoop.clearanswer('code_bug_line');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="code_bug_line_loading_wrapper" role="status">
<span id="code_bug_line_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="code_bug_line_score_display" role="status"></span>
<div class="nsubmits_left" id="code_bug_line_nsubmits_left" role="status">You have submitted this assignment 27 times.</div></div>
<div class="solution" id="code_bug_line_solution_container">
<div id="code_bug_line_solution">
<b>Solution:</b> to_color = []
</div>
<div id="code_bug_line_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>The agenda is supposed to have the pixels we're going to investigate next, so
we need to start it off with the location of our starting pixel:</p>
<pre><code class="language-python"># all of the cells we need to color in
to_color = [location]
</code></pre>
</div>
</div>
<div aria-atomic="true" id="code_bug_line_message" role="status"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question code_bug_line -->
</p>
<p>Great! Our first bug located, understood, and hopefully fixed.  Now, let's carry
on and continue testing, by once again trying to color in the character in
our testing image.</p>
<p><a class="anchor" name="catsoop_section_4_3"></a><a class="anchor" name="_interpreting_errors"></a><h3 class="cs_section_title">4.3) Interpreting Errors<a class="cs_permalink" href="#_interpreting_errors">§</a></h3></p>
<p>When we run the code again with this change, here's what we get this time:</p>
<pre><code class="language-plain">start of function
before loop
inside loop (40, 60)

Traceback (most recent call last)
  File "flood_fill.py", line 29, in &lt;module&gt;
    flood_fill(image, (event.pos[1] // SCALE, event.pos[0] // SCALE) cur_color)
  File "flood_fill.py", line 29, in flood_fill
    to_color.append(neighor)
                    ^^^^^^^
NameError: name 'neighor' is not defined. Did you mean: 'neighbor'?
</code></pre>
<p>Oh no, it's an error!  Unexpected things (like exceptions) happen all the time,
even to experienced programmers.  But, even after you've been programming for
a long time, errors like this can be frustrating, especially after putting a
lot of work into the code that caused the error.</p>
<p>So, how should we respond when we encounter an error like this?  Well, firstly,
it's OK to take a moment to feel that frustration; it's normal.  But, let's not
let that frustration affect us too much; let's take a deep breath (maybe take a
short walk or have a cup of tea) and turn toward understanding what went wrong.
Our first step here should be to <em>read the error message.</em>   It's tempting, when
you're just getting started programming, to try to ignore the jargon and scary
nonsense in the error and try to plow ahead without it.</p>
<p>But, it's much better to take the time to read the error message.  Once you
learn to interpret them (which does take some time and practice), these error
messages turn out to contain a lot of useful information!  The error tells us
not only what happened, but it also tells us <em>where</em> in the code it happened --
that's step 1 of debugging, and an error message like this is giving it to us
for free!</p>
<p>The bottom of the error tells us exactly which line failed:
<code>to_color.append(neighor)</code>, and it even tells us why: it can't find the name
<code>neighor</code>.  And why not?  Because, if we look closely, it turns out that we've
made a typo: while we meant to type <code>neighbor</code> (referring to an adjacent cell),
we accidentally left off the "b", ending with <code>neighor</code> instead.</p>
<p>At this point, it's worth noting that we've done both steps 1 and 2 in our
bug-squashing process (namely, locating and understanding the bug) just by
reading the error message carefully.  As you encounter new messages, if you
have trouble understanding what they are trying to tell you about your code,
please feel free to use a web search containing the error message or to reach
out to us for help.</p>
<p>Now that we've identified the error, we can go in and fix it by changing that:</p>
<pre><code class="language-python">to_color.append(neighbor)
</code></pre>
<p><a class="anchor" name="catsoop_section_4_4"></a><a class="anchor" name="_printing_more_complex_things"></a><h3 class="cs_section_title">4.4) "Printing" More Complex Things<a class="cs_permalink" href="#_printing_more_complex_things">§</a></h3></p>
<p>Let's run it again:</p>
<pre><code class="language-plain">start of function
before loop
... (many locations are printed)
inside loop (75, 74)
inside loop (73, 74)
inside loop (72, 75)
inside loop (73, 73)
inside loop (73, 74)
inside loop (71, 76)
inside loop (71, 76)
inside loop (71, 76)
inside loop (72, 75)
inside loop (75, 76)
... (many more locations are printed)
</code></pre>
<p>OK, we're printing a lot of stuff, so there is evidence that Python is doing
something here; but, in terms of our output, still nothing seems to be happening,
and we're never seeing a result.  Maybe it's an infinite loop?</p>
<p>But, the printing isn't telling us a whole lot, so let's output something
different.  Let's "print" the displayed image as we go -- in other words, let's
update the output image on screen every time we change a pixel.  This is a bit
advanced, but the general lesson is that it's often useful to find the
equivalent of a print statement in the domain you're working in.  Since we're
using images, we want to put the image on the screen in order to help us debug
it.  Seeing the intermediate results of the image as we go will serve a similar
purpose as printing text, and it may be easier for us to diagnose what's going
on.</p>
<p>If you are following along on your own computer, you can enable this behavior
by uncommenting the bottom two lines in the <code>set_pixel</code> function in <code>flood_fill.py</code>:</p>
<pre><code class="language-py">    # screen.blit(image, (0, 0))
    # pygame.display.flip()
</code></pre>
<p>Now, let's see what happens when we try to fill the cat's face instead, using
grey.  Feel free to try clicking the middle of the cat's face on your own
computer and/or watching the video below, which shows the results:</p>
<center>
<video controls="" id="video_c0c390d54e9e36c1dd28798dc522987d" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/cat_face.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/cat_face.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>Horrifying.</p>
<div class="response" markdown="">
<p>If you are following along on your own computer, you may find that the image window refuses to close when you click on its X button, and you can't stop the program!
This is because Python is so busy running <code>flood_fill</code> that it never gets around to responding to your mouse click on the window's close button.</p>
<p>When this happens, you need to switch back to the terminal window where you started <code>python flood_fill</code> and use Control-C to stop the program there.
That's a more reliable way to end a misbehaving Python program.</p>
</div>
<p>The good news is that, by showing the updated pixel colors to the screen as
we're going, we can see that some progress is being made.  But, there is a
problem, in that our function is currently misbehaving and eating the poor
cat's face; it looks like we're coloring <em>all</em> the pixels of the cat's face,
not paying any attention to whether they match the original red color we
clicked on or not.  What are we missing?  Before clicking to open the box below,
think about this for a while (and, if it's helpful, feel free to try tweaking
the code, adding more print statements, etc.).  What is causing this issue, and
what can we change in our code to fix it?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide Our Explanation</button><div summary="Show/Hide Our Explanation">Remember that our strategy was to stop when we reach a pixel that isn't the
same color as the original pixel.  We shouldn't add those pixels to the agenda.
But, we forgot to include that check in our implementation.  Let's add an <code>if</code>
statement in the loop that looks at the neighbors (and also change the comment
to reflect the change!):
<pre><code class="language-python"># add each neighbor to to_color, but only if it's the same color as original_color
for neighbor in get_neighbors(this_cell):
    if get_pixel(image, *neighbor) == original_color:
        to_color.append(neighbor)
</code></pre>
<p>This actually looks like a good place to use a list comprehension!  Here's one way to do it:</p>
<pre><code class="language-python">to_color += [
    neighbor
    for neighbor in get_neighbors(this_cell)
    if get_pixel(image, *neighbor) == original_color
]
</code></pre>
<p>Note that we are using <code>+=</code> here to <em>append</em> the list of neighbors to the end of our agenda.</p></div></div>
<p><a class="anchor" name="catsoop_section_4_5"></a><a class="anchor" name="_printing_just_before_the_error"></a><h3 class="cs_section_title">4.5) Printing Just Before the Error<a class="cs_permalink" href="#_printing_just_before_the_error">§</a></h3></p>
<p>Now let's try filling the cat's face again:</p>
<center>
<video controls="" id="video_b15cd530df01b3247ef6852e800c123c" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/cat_face_2.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/cat_face_2.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>Great!  This looks right.  If you're keeping count, we've now identified,
localized, and fixed three bugs! <img alt="party_ball emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iIzI5MkYzMyIgZD0iTTI2IDljLTMuNTkxIDAtNi4yNy0xLjY0OC03Ljk4OS00LjkwNUMxNi4zODUgNy4zMTQgMTMuOTkzIDkgMTEgOWMtLjU1MiAwLTEtLjQ0OC0xLTFzLjQ0OC0xIDEtMWMyLjcyOSAwIDQuNzY1LTEuOTU3IDYuMDUxLTUuODE2QzE3LjE4OC43NzUgMTcuNTY5LjUgMTggLjVzLjgxMi4yNzUuOTQ5LjY4NEMyMC4yNzEgNS4xNTEgMjIuNTEyIDcgMjYgN2MuNTUzIDAgMSAuNDQ4IDEgMXMtLjQ0NyAxLTEgMXoiLz48cGF0aCBmaWxsPSIjRkZBQzMzIiBkPSJNMTQuNzExIDkuNjU0YzMuMzY0IDMuMzY2LjQ5OCA1Ljk1NC0yLjg2OCA5LjMxOS0zLjM2NSAzLjM2NS01Ljk1NCA2LjIzMi05LjMxOSAyLjg2OC0zLjM2Ni0zLjM2Ni0zLjM2Ni04LjgyMiAwLTEyLjE4NyAzLjM2Ni0zLjM2NiA4LjgyMS0zLjM2NiAxMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMTUuNTQyIDEwLjk3MmMxLjU4NCAxLjU4NS4yNDggNS40ODYtMi45ODMgOC43MTctMy4yMzEgMy4yMzEtNy4xMzIgNC41NjgtOC43MTcgMi45ODItMS41ODQtMS41ODQtLjI0OC01LjQ4NiAyLjk4Mi04LjcxNyAzLjIzMi0zLjIzIDcuMTM0LTQuNTY2IDguNzE4LTIuOTgyeiIvPjxwYXRoIGZpbGw9IiNGRkFDMzMiIGQ9Ik0yMS4yODkgOS42NTRjLTMuMzYzIDMuMzY2LS40OTggNS45NTQgMi44NjggOS4zMTkgMy4zNjUgMy4zNjUgNS45NTQgNi4yMzIgOS4zMTkgMi44NjggMy4zNjUtMy4zNjYgMy4zNjUtOC44MjIgMC0xMi4xODctMy4zNjUtMy4zNjYtOC44Mi0zLjM2Ni0xMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMjAuNDU5IDEwLjk3MmMtMS41ODUgMS41ODUtLjI0OSA1LjQ4NiAyLjk4MiA4LjcxNyAzLjIzIDMuMjMxIDcuMTMzIDQuNTY4IDguNzE3IDIuOTgyIDEuNTg0LTEuNTg0LjI0OC01LjQ4Ni0yLjk4My04LjcxNy0zLjIzLTMuMjMtNy4xMzMtNC41NjYtOC43MTYtMi45ODJ6Ii8+PHBhdGggZmlsbD0iI0FBOEREOCIgZD0iTTIyLjQxIDE4LjIyMWMuMTk5LS4xNi40NTktLjI0NC43MzQtLjIxNS44NjcuMDk0IDEuNTk4LjM5NiAyLjEwOS44NzMuNTQxLjUwNS44MDcgMS4xODMuNzM0IDEuODYyLS4xMjkgMS4xOTEtMS4zMjQgMi4yODUtMy4zNjMgMi4wNjUtLjc5My0uMDg1LTEuMTQ2LjE3LTEuMTU4LjI5MS0uMDE0LjEyMS4yNzcuNDQ2IDEuMDcuNTMyLjg2Ny4wOTQgMS41OTguMzk2IDIuMTA5Ljg3My41NDEuNTA1LjgwOSAxLjE4My43MzQgMS44NjItLjEyOSAxLjE5Mi0xLjMyNCAyLjI4NS0zLjM2MSAyLjA2Ni0uNTc4LS4wNjItLjg4My4wNTctMS4wMTIuMTM0LS4xMDMuMDYzLS4xNDQuMTI0LS4xNDguMTU4LS4wMTIuMTIuMjc1LjQ0NSAxLjA3LjUzMS41NDkuMDYuOTQ3LjU1My44ODcgMS4xMDItLjA1OS41NDktLjU1MS45NDYtMS4xMDIuODg3LTIuMDM3LS4yMTktMi45NzMtMS41NDItMi44NDQtMi43MzUuMTI5LTEuMTkyIDEuMzI0LTIuMjg1IDMuMzYzLTIuMDY1LjU3OC4wNjMuODgxLS4wNTcgMS4wMS0uMTM0LjEwNC0uMDYyLjE0NS0uMTIzLjE0OC0uMTU3LjAxNC0uMTIxLS4yNzUtLjQ0Ni0xLjA3LS41MzItMi4wMzctLjIyLTIuOTczLTEuNTQyLTIuODQ0LTIuNzM1LjEyOS0xLjE5MiAxLjMyNC0yLjI4NiAzLjM2MS0yLjA2NC41NzguMDYyLjg4My0uMDU4IDEuMDEyLS4xMzUuMTAzLS4wNjIuMTQ0LS4xMjMuMTQ4LS4xNTcuMDEyLS4xMjEtLjI3Ny0uNDQ2LTEuMDctLjUzMi0uNTQ5LS4wNTktLjk0Ny0uNTUzLS44ODctMS4xMDIuMDMyLS4yNzYuMTcxLS41MTIuMzctLjY3M3oiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMTUuMjY2IDM1LjgyOGMtMS45NzMuNTU3LTMuMzM0LS4zMjItMy42NTgtMS40NzctLjMyNC0xLjE1NC4zNzgtMi42MTUgMi4zNS0zLjE3Ljc3LS4yMTYgMS4wMDEtLjU4NC45Ny0uNzAxLS4wMzQtLjExOS0uNDI1LS4zMTItMS4xOTMtLjA5Ni0xLjk3Mi41NTYtMy4zMzMtLjMyNC0zLjY1Ny0xLjQ3OS0uMzI2LTEuMTU1LjM3OC0yLjYxNCAyLjM1MS0zLjE2OS43NjktLjIxNyAxLjAwMS0uNTg2Ljk2Ny0uNzAzLS4wMzMtLjExNi0uNDIzLS4zMTEtMS4xOTItLjA5NS0uNTMuMTQ5LTEuMDg0LS4xNTktMS4yMzMtLjY5LS4xNDgtLjUzMy4xNjEtMS4wODQuNjkzLTEuMjM0IDEuOTcxLS41NTUgMy4zMzMuMzIyIDMuNjU5IDEuNDc5LjMyNCAxLjE1NC0uMzc5IDIuNjEzLTIuMzUyIDMuMTctLjc3LjIxNi0xLjAwMS41ODQtLjk2Ny43MDEuMDMyLjExNy40MjIuMzEyIDEuMTkuMDk2IDEuOTc0LS41NTYgMy4zMzQuMzIyIDMuNjU5IDEuNDc5LjMyNSAxLjE1My0uMzc4IDIuNjEyLTIuMzUyIDMuMTY5LS43NjguMjE1LS45OTkuNTg2LS45NjcuNzAxLjAzNC4xMTguNDIzLjMxMiAxLjE5Mi4wOTcuNTMyLS4xNTEgMS4wODMuMTU5IDEuMjMzLjY5LjE0OS41MzEtLjE2MSAxLjA4NC0uNjkzIDEuMjMyeiIvPjxjaXJjbGUgZmlsbD0iIzVDOTEzQiIgY3g9IjIuNSIgY3k9IjI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjciIGN5PSIzMSIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjMwIiBjeT0iMjciIHI9IjIiLz48Y2lyY2xlIGZpbGw9IiM1QzkxM0IiIGN4PSIyNS41IiBjeT0iMzEuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjNUM5MTNCIiBjeD0iMTcuNSIgY3k9IjE5LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjciIGN5PSIyMyIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjI3LjUiIGN5PSIxNi41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiNGRkNDNEQiIGN4PSIxMi41IiBjeT0iMTQuNSIgcj0iMS41Ii8+PC9zdmc+" title="party_ball"/> <img alt="partying_face emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTciIGN5PSIxOSIgcj0iMTciLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMTcuOTk5IiBjeT0iMjYiIHJ4PSIyIiByeT0iMi41Ii8+PHBhdGggZmlsbD0iIzY2NDUwMCIgZD0iTTguMTExIDIxLjM4M2MtLjE4MiAwLS4zNjctLjA1LS41MzItLjE1NC0uNDY3LS4yOTQtLjYwNy0uOTExLS4zMTMtMS4zNzkuOTE2LTEuNDUzIDMuNzAxLTMuOTM4IDcuNjktMi45NjIuNTM2LjEzMS44NjQuNjczLjczMyAxLjIwOS0uMTMyLjUzNi0uNjc2Ljg2Mi0xLjIwOS43MzMtMy42MDQtLjg4Mi01LjUwMiAyLjA1Ni01LjUyMSAyLjA4Ni0uMTkxLjMwMi0uNTE2LjQ2Ny0uODQ4LjQ2N3ptMTEuOTczLTMuNzQyYy0uMjkgMC0uNTc2LS4xMjUtLjc3NC0uMzY2LS4zNS0uNDI3LS4yODgtMS4wNTguMTQtMS40MDggMy4xNzYtMi42MDQgNi43NjItMS41NjIgOC4yMTUtLjY0Ni40NjcuMjk0LjYwNy45MTIuMzEyIDEuMzc5LS4yOTMuNDY1LS45MDguNjA3LTEuMzc2LjMxNS0uMTM4LS4wODQtMy4wNTItMS44MjMtNS44ODQuNDk5LS4xODYuMTUzLS40MS4yMjctLjYzMy4yMjd6Ii8+PHBhdGggZmlsbD0iI0UyQTYyRCIgZD0iTTEzLjM0NiAzMS4yNzNjLS4wNjggMC0uMTM3LS4wMDktLjIwNS0uMDI4LS4zOTgtLjExMy0uNjMtLjUyNy0uNTE3LS45MjYuNDM3LTEuNTQuMjU4LTMuMDI5LS40OS00LjA4Ni0uNDk3LS43MDItMS4yMDUtMS4xMzEtMS45NDMtMS4xNzgtLjQxNC0uMDI1LS43MjgtLjM4Mi0uNzAyLS43OTVzLjM4MS0uNzUxLjc5NS0uNzAxYzEuMTkzLjA3NCAyLjMxMy43MzMgMy4wNzMgMS44MDcgMS4wMTEgMS40MjkgMS4yNyAzLjM4My43MDkgNS4zNjEtLjA5My4zMzEtLjM5NC41NDYtLjcyLjU0NnptMTEuMDM3LTMuMDYxYy0uMTQyIDAtLjI4NS0uMDQtLjQxMi0uMTI0LTEuMTY3LS43Ny0xLjgyLTIuMTE3LTEuNzkyLTMuNjk1LjAyOS0xLjYzNS44MDktMy4xNTMgMS45ODQtMy44NjkuMzUzLS4yMTYuODE0LS4xMDQgMS4wMy4yNTEuMjE2LjM1NC4xMDQuODE0LS4yNTEgMS4wMy0uNzM1LjQ0OC0xLjI0NCAxLjQ5OS0xLjI2NCAyLjYxNC0uMDIgMS4wNTUuMzg5IDEuOTM2IDEuMTE4IDIuNDE3LjM0Ni4yMjguNDQxLjY5My4yMTMgMS4wMzktLjE0NC4yMTktLjM4Mi4zMzctLjYyNi4zMzd6Ii8+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTE3LjE3OSAyLjcyYy0uMDQzLS4wNDktLjExLS4wNzYtLjE4OS0uMDkxIDAgMC0xNS45MjQtMy4wMjMtMTYuNjEzLTIuNDE1Qy0uMzExLjgyMy43NCAxNi45OTguNzQgMTYuOTk4Yy4wMDUuMDgxLjAyMy4xNS4wNjcuMTk5LjYwNC42ODQgNC43NTgtMi4wMDQgOS4yNzktNi4wMDEgNC41MjItMy45OTggNy42OTctNy43OTIgNy4wOTMtOC40NzZ6Ii8+PHBhdGggZmlsbD0iI0VBNTk2RSIgZD0iTS4zNDkuMjcxQy4zMzQuMzAxLjMyMS4zNDIuMzExLjM5NC40NyAxLjc2NSAyLjAwNiAxMy4wNDYgMi45NjMgMTYuNTcyYzEuNDM2LS44MDMgMi44OTUtMS44OTQgNC42MDktMy4yNTNDNi4xMTYgMTAuNjU0IDEuMTU4LjE0Ni4zNDkuMjcxeiIvPjxwYXRoIGZpbGw9IiMzQjg4QzMiIGQ9Ik0yOS45MDIgMjkuMjI5bC0xMC41NzMtMS4zMDNjLTEuMTMtLjEwMi0zLjExNy0uMTEyLTMuMDE1LTEuOTAyLjA5My0xLjYyMyAyLjA0LTEuMzczIDMuNDc5LTEuMTZsMTAuNjM4IDEuNzc0LS41MjkgMi41OTF6Ii8+PHBhdGggZmlsbD0iIzg4QzlGOSIgZD0iTTMwLjQzIDI2LjYzOWwtNC4yMjItLjcyNGMtLjQ5NC0uMDg5LS45MzQuNjQ3LS45NTYgMS40MjYtLjAyNS44NjYuMjI3IDEuMzA0LjcyNiAxLjQwNmw0LjE0NC41MTIuMzA4LTIuNjJ6Ii8+PHBhdGggZmlsbD0iIzNCODhDMyIgZD0iTTM0LjkxOCAyNi4zNDFsLTIuNjIyIDIuNDExLTQuNjg3LTUuMDk3IDIuNjIyLTIuNDExYzEuMzYxLTEuMjUyIDMuNDk5LTEuMTYyIDQuNzUxLjE5OWwuMTM1LjE0N2MxLjI1MSAxLjM2MiAxLjE2MiAzLjQ5OS0uMTk5IDQuNzUxeiIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKC00Mi41OTcgMjkuOTU0IDI2LjIwNSkiIGZpbGw9IiM4OEM5RjkiIGN4PSIyOS45NTIiIGN5PSIyNi4yMDMiIHJ4PSIyLjc3IiByeT0iMy40NjIiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InJvdGF0ZSgtNDIuNTk3IDI5Ljk1NCAyNi4yMDUpIiBmaWxsPSIjMjY5IiBjeD0iMjkuOTUyIiBjeT0iMjYuMjAzIiByeD0iMS4zODUiIHJ5PSIyLjA3NyIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjIuNSIgY3k9IjMzLjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjI5IiBjeT0iMiIgcj0iMiIvPjxwYXRoIGZpbGw9IiNFQTU5NkUiIGQ9Ik00Ljg2NCAyOS4yNDZMMi41MjYgMjMuNjMuNDEyIDI5LjY3NXpNMjYgNWwtNCAxIDEtNHoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMzEuOTk5IDEzTDM2IDcuOTk5IDMzIDZ6Ii8+PC9zdmc+" title="partying_face"/> <img alt="celebration emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0ZDQUI0MCIgZD0iTTI3Ljk5OSAzNmMtLjQ0OCAwLS44NTUtLjMwMy0uOTY5LS43NTgtLjAzNi0uMTM2LS45MjYtMy40MzYtNC4yNzMtNC4yNzJDMTguMDU0IDI5Ljc5NCAxOCAyMy4yNzcgMTggMjNjMC0uNTUyLjQ0Ny0uOTk4Ljk5OC0uOTk5LjU1NC4wMzQgMSAuNDQ1IDEuMDAyLjk5NyAwIC4wNTMuMDU0IDUuMjM0IDMuMjQyIDYuMDMyIDQuNTMgMS4xMzIgNS42ODIgNS41NCA1LjcyNyA1LjcyOC4xMzUuNTM1LS4xOTEgMS4wNzgtLjcyNyAxLjIxMi0uMDgxLjAyLS4xNjMuMDMtLjI0My4wM3oiLz48cGF0aCBmaWxsPSIjQkIxQTM0IiBkPSJNMTggMjVjLTEuMSAwLTEuNTk4LS44MDUtMS4xMDUtMS43ODlsMS4yMTEtMi40MjJjLjQ5Mi0uOTg0IDEuMjk3LS45ODQgMS43ODkgMGwxLjIxMSAyLjQyMkMyMS41OTggMjQuMTk1IDIxLjEgMjUgMjAgMjVoLTJ6Ii8+PHBhdGggZmlsbD0iI0JCMUEzNCIgZD0iTTI4IDljMCA2LTcgMTItOSAxMnMtOS02LTktMTJjMC01Ljc5OSA0LjU4Mi05IDktOXM5IDMuMjAxIDkgOXoiLz48cGF0aCBmaWxsPSIjRkNBQjQwIiBkPSJNMjAgMjJoLTJjLS41NTIgMC0xLS40NDctMS0xcy40NDgtMSAxLTFoMmMuNTUzIDAgMSAuNDQ3IDEgMXMtLjQ0NyAxLTEgMXoiLz48L3N2Zz4=" title="celebration"/>
We can take a moment now to celebrate by filling in the cat's ears and body as
well, so that we end up with a nice grey cat:</p>
<center>
<video controls="" id="video_873942809d24e4ffc80de9a622bbdb04" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/cat_full.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/cat_full.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>Woo-hoo!  It seems to work on the cat.  This is also a time to remind ourselves
that this process (of repeatedly discovering, identifying, localizing, and
fixing bugs) is a natural part of the programming process.  While careful
planning and good style can helps us avoid lots of bugs we might make
otherwise, it's still very hard to get things right on the first try.  Errors
are still going to creep into the code of even the most experienced programmer,
and we should do our best to embrace the act of debugging for what it is: an
important part of the programming process, as well as an important part of the
<em>learning</em> process.</p>
<p>Alright, onward!  Let's celebrate further by coloring in this drab sky with a
nice light blue color.  Here, we click toward the right side of the sky:</p>
<center>
<video controls="" id="video_0d96992d402149cdef1ab56f564290f0" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_1.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_1.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>Oh no!  We've been making good progress, but at this point, the program crashes,
showing us another error message, which will look something like the following:</p>
<pre><code class="language-plain">Traceback (most recent call last):
  File "flood_fill.py", line 126, in &lt;module&gt;
    flood_fill(image, (event.pos[1] // SCALE, event.pos[0] // SCALE), cur_color)
  File "flood_fill.py", line 29, in flood_fill
    if get_pixel(image, *neighbor) == original_color:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "flood_fill.py", line 45, in get_pixel
    color = image.get_at((col * SCALE, row * SCALE))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
IndexError: pixel index out of range
</code></pre>
<p>Oops.  Another bug.  But, this isn't the end of the world.  We've prepared for
this, and we know what to do: we take a moment to feel our frustration, and
then we take a deep breath.  And, in fact, we maybe ought to take a moment to
celebrate too, because every bug is a learning opportunity in disguise, and,
when we get an error message, we're already much of the way towards finding,
understanding, and fixing it.</p>
<p>This error is a little bit more complex than the one we saw earlier, but let's
try to break it down.  We're getting the message <code>"IndexError: pixel index out
of range"</code>, and the first place that it happens (look at the bottom of the
traceback) is in <code>get_pixel</code>, which is a function we probably wrote a long time
ago (in last week's lab, in fact).  We've been using that function a lot -- is
that really where the bug is?</p>
<p>But, let's look at how we got there.  The error message includes a traceback of the calls that led down to the point where we had the error.
These are actually the active frames on the stack (the same stack we draw in an environment diagram), so a traceback is often called a <em>stack trace</em>.</p>
<p>If we look just above <code>get_pixel</code> in the traceback, we see that <code>get_pixel</code> is being called by
the code we just wrote in <code>flood_fill</code>:</p>
<pre><code class="language-python">if get_pixel(image, *neighbor) == original_color:
</code></pre>
<p>While it's not impossible that there is an issue with <code>get_pixel</code> (and we
should keep in mind that that's a place to look if we can't figure things out
here), code that we just wrote is a much more likely location for the actual
bug.  So, we have a possible location; but, before we go diving into the code,
let's see if we can understand more about the cause of the bug.  What does the
image look like just before the error happens?</p>
<center>
<img class="pixels" src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_break.png" style="border: 2px solid grey;" width="300"/>
</center>
<p>Ah!  The right corner of that blue diamond, representing the pixels we've
painted so far, has just touched the right edge of the image.  It's happening
when we try to go off the edge of the image, hence the message "pixel index
out of range".</p>
<p>So, we've localized the error, and we have a hypothesis as to what is going
wrong (as of right now, we think our function might be trying to color in pixels
outside the bounds of the image).  But, let's try to validate that hypothesis a
bit more before we go diving into the code.</p>
<p>And, to help us out, here's our old friend, <code>print</code>.  Let's put a print <em>before</em>
the line where the error happened in this code, showing every variable that
might be relevant to causing the bug:</p>
<pre><code class="language-python"># add each neighbor to to_color, but only if it's the same color as original_color
for neighbor in get_neighbors(this_cell):
    print(neighbor, original_color)
    if get_pixel(image, *neighbor) == original_color:
        to_color.append(neighbor)
</code></pre>
<p>This is a helpful tactic for exploring an error: look where the error happened
and try to print relevant variables just before it.  This strategy is great
because, since the exception stops Python, the very last thing that gets
printed will be the thing that caused the error:</p>
<pre><code class="language-plain">... (lots of printing)
(44, 97) (255, 255, 255)
inside loop (45, 99)
(46, 99) (255, 255, 255)
(44, 99) (255, 255, 255)
(45, 100) (255, 255, 255)
Traceback (most recent call last):
  File "flood_fill.py", line 127, in &lt;module&gt;
    flood_fill(image, (event.pos[1] // SCALE, event.pos[0] // SCALE), cur_color)
  File "flood_fill.py", line 30, in flood_fill
    if get_pixel(image, *neighbor) == original_color:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "flood_fill.py", line 46, in get_pixel
    color = image.get_at((col * SCALE, row * SCALE))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
IndexError: pixel index out of range
</code></pre>
<p>Aha! It looks like we did indeed reach a point where <code>neighbor</code> was <code>(45, 100)</code>,
which is outside the bounds of our 100x100 image.</p>
<p><a class="anchor" name="catsoop_section_4_5_1"></a><a class="anchor" name="_aside_f_strings"></a><h4 class="cs_section_title">4.5.1) Aside: "F-Strings"<a class="cs_permalink" href="#_aside_f_strings">§</a></h4></p>
<p>Sometimes, when you are printing multiple variables, it can be hard to tell them
apart.  So, here is one more useful Python idiom: you can use format strings
(also called "f-strings") to automatically add a label for each variable.
Here's how.</p>
<p>First, a format string is a string prefixed by the letter f, which can have
expressions embedded in it.  For example, <code>f'{1+2}'</code> evaluates to the string
<code>'3'</code>, and (in this context) <code>f'{neighbor}'</code> evaluates to the string
representation of the variable <code>neighbor</code>, say, <code>'(100, 45)'</code>.</p>
<p>The second part of the trick is to put <code>=</code> just before the <code>}</code>, which precedes
the value of the expression with the original expression itself.  So
<code>f'{1+2=}'</code> evaluates to <code>'1+2=3'</code>, and <code>f'{neighbor=}'</code> to <code>'neighbor=(100,
45)'</code>.</p>
<p>So if you change your print statement to:</p>
<pre><code class="language-python">    print(f'{neighbor=} {original_color=}')
</code></pre>
<p>then your output will be labeled with the variable names too, which is super
useful for helping us keep track of everything we're printing.</p>
<pre><code class="language-plain">... (lots of printing)
neighbor=(45, 99) original_color=(255, 255, 255)
neighbor=(43, 99) original_color=(255, 255, 255)
neighbor=(44, 100) original_color=(255, 255, 255)

Traceback ...
IndexError: pixel index out of range
</code></pre>
<p><a class="anchor" name="catsoop_section_4_5_2"></a><a class="anchor" name="_back_to_the_code_2"></a><h4 class="cs_section_title">4.5.2) Back to the Code!<a class="cs_permalink" href="#_back_to_the_code_2">§</a></h4></p>
<p>OK, this further validates our hypothesis from above, so, at this point, we
can be reasonably confident that we've located and understood the bug: as
it currently stands, our code is trying to color in pixels that are outside
the bounds of the original image.</p>
<p>Now that we have found and understood the bug, we can make a plan for fixing
it, and, eventually, we can write some code.  Take some time here to think
about some questions:</p>
<ul>
<li>What do we need to change about the code's behavior to fix this bug?</li>
<li>What are all of the places we could make the necessary change(s)?</li>
<li>Are there pros and cons to the different approaches we could take here?</li>
</ul>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide Our Explanation</button><div summary="Show/Hide Our Explanation"><p>We've already identified the core issue: we shouldn't be coloring in
pixels that are outside the bounds of the image!  But, we have some options for how
to fix it!  We should think through them a little bit before we start writing
any code.  Among other options, maybe we could:</p>
<ol>
<li>Change <code>set_pixel</code> so that, if it gets an out-of-bounds location, it returns immediately rather than trying to color it in.</li>
<li>We could add a conditional just above <code>set_pixel</code> so that we only ever attempt that call if <code>location</code> is in-bounds.</li>
<li>We could change our conditional just above <code>to_color.append(neighbor)</code> so that we only add neighbors that are in-bounds to the agenda.</li>
<li>We could change our notion of a "neighbor" by modifying <code>get_neighbors</code> such that it only includes valid locations in its output.</li>
</ol>
<p>What are some of the pros and cons of these approaches?  Potential pitfalls?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide Comparison</button><div summary="Show/Hide Comparison"><p>Option <strong>1</strong> is a tempting change to make because it's very local to the issue
we noticed.  And it's likely that this would help us make the error message go
away.  But, it has a downside: if we made this change, we'd still be considering
those out-of-bounds pixels in our agenda and adding their neighbors in, so
we'd spend a lot of time still thinking about pixels that are outside our
image!</p>
<p>Option <strong>2</strong> can have the same downside if we're not careful.  If we were to
take this approach, it would be safest to indent <em>the whole rest of the
function</em>, including the piece that considers adding neighbors, which prevents
considering <em>too many</em> out-of-bounds pixels (since we won't add the neighbors
of any out-of-bounds pixels), but this approach still waits until we've pulled
the out-of-bounds pixel out of our agenda, rather than not
adding it to the agenda in the first place.</p>
<p>Options <strong>3</strong> and <strong>4</strong> both do a better job of addressing the issue early:
both avoid ever adding any out-of-bounds locations to the agenda.  Both of
these are plausible solutions, but there are still a few tradeoffs.  Option
<strong>4</strong>, redefining the notion of a neighbor, lets us keep the core code for
flood fill relatively clean (without a lot of extra conditions), so we're going
to take that approach here.  But, it might be good additional practice to try
turning both of these approaches into code, so you can get a feel for your own
personal preferences between the two.</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide Code</button><div summary="Show/Hide Code"><p>Here is the code that we came up with for changing <code>get_neighbors</code> so that it
only includes in-bounds locations as valid neighbors.  Here, we start by finding
all possible neighbors by looking in all four directions from the given
location, and then we use a list comprehension to filter out the locations that
are out of bounds.</p>
<pre><code class="language-python">    def get_neighbors(cell):
        row, col = cell
        potential_neighbors = [(row+1, col), (row-1, col),
                               (row, col+1), (row, col-1)]
        return [
            (nr, nc)
            for nr, nc in potential_neighbors
            if 0 &lt;= nr &lt; get_height(image) and 0 &lt;= nc &lt; get_width(image)
        ]
</code></pre>
</div></div>
</div></div>
</div></div>
<p><a class="anchor" name="catsoop_section_4_6"></a><a class="anchor" name="_avoiding_extra_work"></a><h3 class="cs_section_title">4.6) Avoiding Extra Work<a class="cs_permalink" href="#_avoiding_extra_work">§</a></h3></p>
<p>Having made this change, we can try running the code again and clicking near
the edge of the image to see whether we have fixed our issue.  Feel free to try
this on your own computer, or here is a video of our code working through this
example:</p>
<center>
<video controls="" id="video_21206a973bed17396e19445a1d7054e3" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_2.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_2.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>OK, we've made some progress!  Now, when we click on the sky, it's no longer
crashing as soon as it touches the boundary.  But, it also seems to slow down as
it goes, until finally it doesn't seem to be making any progress at all, and
the sky is nowhere near being filled!  What is going on?</p>
<p>It's a little bit hard to tell just from the output here, but there is some
additional information in our print statements, which are still going to the
terminal and showing the location of every pixel we're coloring in.  Let's take
a careful look:</p>
<pre><code class="language-plain">...
(36, 98)
(37, 99)
(37, 99)
(36, 98)
(36, 98)
(37, 99)
...
</code></pre>
<p>Wait, there's a lot of repetition here!  And we can also see this repetition in
the following visualization, which briefly flashes each pixel in red as we're
coloring it (notice how the pixels on the edges of the colored-in region, whose
color we've already changed, are being repeatedly colored in):</p>
<center>
<video controls="" id="video_6febebd448a26c081f391c214fc4b108" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_3.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_3.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>So, now, we've seen this in two different ways, but this is perhaps still a
confusing issue to encounter.  Why is our code as written trying to color in
the same spot repeatedly?  When we come back to a pixel we've already colored
in, shouldn't its color now be different from the original pixel's color, and,
thus, shouldn't we avoid coloring it in again through the following check?</p>
<pre><code class="language-py">for neighbor in get_neighbors(this_cell):
    if get_pixel(image, *neighbor) == original_color:
        to_color.append(neighbor)
</code></pre>
<p>Take a moment to think about this and see if you can figure out why the code
end up coloring in the same cells multiple times, before continuing on.</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide Explanation</button><div summary="Show/Hide Explanation">The complication here has to do with the fact that we end up adding locations
to the agenda multiple times before we color them in.
<p>Let's look more closely at what we're doing.</p>
<p>We start with the location we clicked on the agenda.</p>
<p>Then, we pull that location off the agenda, color it in, and add its neighbors
to the agenda.  In so doing, we've now added each location that is one step
away from the starting location to the agenda.  We're working through the
agenda in the same order we added things to the agenda, so we'll color in each
of those pixels and add their neighbors.</p>
<p>But, here is where we can first notice the issue: some of those locations we've
just added to the agenda were neighbors of multiple of the locations we've
already colored in!  For example, the pixel to the upper-right of the original
location is a neighbor of both the pixel to the right of the original location
and the pixel above the original location, so it will be added to the agenda
twice before coloring it in!</p>
<p>We end up adding pixels within 2 steps of the original pixel to the agenda
twice, before we've been able to color them at all.  And those within 3 steps,
more than twice!  And, in fact, as we get farther and farther away from the
original pixel, there are more and more paths through the pixel grid that can
reach the pixel we're adding to the agenda, and we'll add it to the agenda once
for each such path.  The number of paths grows explosively, so our agenda does
too.  This program won't just be slow, and we can't just go get a sandwich and
come back and hope it will be done; it will take longer than the lifetime of
the universe for this to finish, even on this small 100x100 image.</p></div></div>
<p>Fixing this efficiency issue is not a simple one-line change.  We need to
change our strategy substantially.  In particular, let's add a structure that
will help us avoid adding locations to the agenda more than once.  Our strategy
will be to introduce a new variable to keep track of <em>every location we've ever
added to the agenda</em> (we'll call this <code>visited</code>), and we'll adjust our code
such that we only add pixels to the agenda if they have never been added to the
agenda.</p>
<p>To accomplish this, we'll make some changes to the main loop in our code
(highlighted in yellow below):</p>
<div id="code-example-visited-1" markdown="">
<pre><code class="language-python highlight-lines">def flood_fill(image, location, new_color):
    original_color = get_pixel(image, *location)

    def get_neighbors(cell):
        row, col = cell
        potential_neighbors = [(row+1, col), (row-1, col), (row, col+1), (row, col-1)]
        return [
            (nr, nc)
            for nr, nc in potential_neighbors
            if 0 &lt;= nr &lt; get_height(image) and 0 &lt;= nc &lt; get_width(image)
        ]

    to_color = [location]  # agenda: all of the cells we need to color in
    visited = [location]  # all pixels ever added to the agenda

    while to_color:
        this_cell = to_color.pop(0)
        set_pixel(image, *this_cell, new_color)
        for neighbor in get_neighbors(this_cell):
            if (neighbor not in visited
                    and get_pixel(image, *neighbor) == original_color):
                to_color.append(neighbor)
</code></pre>
</div>
<style>
#code-example-visited-1 > section span[data-line-number="14"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-visited-1 > section span[data-line-number="20"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>Answer the following question about the code, paying careful attention to the
pieces we changed.</p>
<p>
<!--START question multiplechoice_speed_check --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_multiplechoice_speed_check" style="position: static">
<div id="multiplechoice_speed_check_rendered_question">
<div id="catsoop_preamble_multiplechoice_speed_check"></div>
<div id="catsoop_prompt_multiplechoice_speed_check" style="display: inline;">With the code written exactly as above, how does its speed compare
to that of the original function?</div>
<select aria-labelledby="catsoop_prompt_multiplechoice_speed_check" id="multiplechoice_speed_check" name="multiplechoice_speed_check">
<option value="-1">--</option>
<option value="0">The new code is more than 100x faster</option>
<option value="1">The new code is around 100x faster</option>
<option value="2">The new code is around 10x faster</option>
<option value="3">The new code is around 5x faster</option>
<option selected="" value="4">The two take almost exactly the same amount of time</option>
<option value="5">The new code is around 5x slower</option>
<option value="6">The new code is around 10x slower</option>
<option value="7">The new code is around 100x slower</option>
<option value="8">The new code is more than 100x slower</option></select>
</div><div>
<span id="multiplechoice_speed_check_buttons">
<button class="submit btn btn-catsoop" id="multiplechoice_speed_check_submit" onclick="catsoop.submit('multiplechoice_speed_check');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="multiplechoice_speed_check_clearanswer" onclick="catsoop.clearanswer('multiplechoice_speed_check');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="multiplechoice_speed_check_loading_wrapper" role="status">
<span id="multiplechoice_speed_check_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="multiplechoice_speed_check_score_display" role="status"></span>
<div class="nsubmits_left" id="multiplechoice_speed_check_nsubmits_left" role="status">You have submitted this assignment 5 times.</div></div>
<div class="solution" id="multiplechoice_speed_check_solution_container">
<div id="multiplechoice_speed_check_solution">
<b>Solution:</b> The two take almost exactly the same amount of time
</div>
<div id="multiplechoice_speed_check_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>Have we fixed it?  Oops, no.  The code is still slow.  Can
you see what we forgot to do?</p>
<p>We initialized <code>visited</code> but didn't update it when we added a pixel to the
agenda!  Let's put that in:</p>
<pre><code class="language-python">if (neighbor not in visited
        and get_pixel(image, *neighbor) == original_color):
    to_color.append(neighbor)
    visited.append(neighbor)
</code></pre>
<p>and, with that change, we are now able to run the program!</p>
</div>
</div>
<div aria-atomic="true" id="multiplechoice_speed_check_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question multiplechoice_speed_check -->
</p>
<p><a class="anchor" name="catsoop_section_4_7"></a><a class="anchor" name="_timing_the_program"></a><h3 class="cs_section_title">4.7) Timing the Program<a class="cs_permalink" href="#_timing_the_program">§</a></h3></p>
<p>Aha!  Now, with the change suggested in the explanation to the question above,
we can color the sky, and the other pieces as well, to make the picture even
more beautiful (if you can believe that).  You can try this out on code on your
machine, and/or you can see it play out in the video below:</p>
<center>
<video controls="" id="video_d2d31ccf6b75d30cf3e8908f14bf871e" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_fixed_list.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/sky_fixed_list.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>We've come a long way since we started.  We've fixed a lot of bugs along the
way, and our code is finally capable of accomplishing its goal!</p>
<p>But, something here is still perhaps a little bit bothersome: filling in this
image took quite a long time, despite its being a small image!  The details will
depend on the machine that this code is running on, but, regardless, this code
takes more time than we might expect.  In a regular image-editing program,
using a paint-bucket tool on a 100x100 image would be instantaneous, but, here,
it took a noticeable amount of time!</p>
<p>One subtle thing to note here is that our code is actually being slowed down
substantially by our debugging statements (both the <code>print</code>ing we're doing
and, more noticeably, the fact that we are updating the display of the image
after each pixel we change).  Let's remove our print statements and also
comment out the two lines in <code>set_pixel</code> responsible for drawing the image
after every change (the two that we uncommented near the start of the
reading).  Instead, we'll just display the results of the whole operation once
it's done.  In general, this is a good idea for your own programs as well.
Print statements are great for debugging, but, once we've localized, understood,
and squashed the bug for which we added those statements, it's a good idea to
remove them.</p>
<p>After doing that, it seems much faster.  But, how fast is it, really?  Let's
measure how long it's taking, using a function from Python's standard library,
<code>time.time()</code>.  This function returns a float value representing the number
of seconds since January 1, 1970, at midnight UTC.  That exact detail doesn't
matter too much for us, but what does matter is that it is a stable measure
of time in units of seconds.  So, if we call that function twice and compute
the difference of the respective results, it will tell us the number of seconds
that elapsed between the two calls.</p>
<p>So, let's print the difference between the clock before and the clock after
working through the flood-fill process:</p>
<div id="code-example-time" markdown="">
<pre><code class="language-python highlight-lines">import time

def flood_fill(image, location, new_color):
    original_color = get_pixel(image, *location)

    def get_neighbors(cell):
        row, col = cell
        potential_neighbors = [(row+1, col), (row-1, col), (row, col+1), (row, col-1)]
        return [
            (nr, nc)
            for nr, nc in potential_neighbors
            if 0 &lt;= nr &lt; get_height(image) and 0 &lt;= nc &lt; get_width(image)
        ]

    start = time.time()

    to_color = [location]  # agenda: all of the cells we need to color in
    visited = [location]  # all pixels ever added to the agenda

    while to_color:
        this_cell = to_color.pop(0)
        set_pixel(image, *this_cell, new_color)
        for neighbor in get_neighbors(this_cell):
            if (neighbor not in visited
                    and get_pixel(image, *neighbor) == original_color):
                to_color.append(neighbor)
                visited.append(neighbor)

    print(f'this took {time.time() - start} seconds')
</code></pre>
</div>
<style>
#code-example-time > section span[data-line-number="1"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-time > section span[data-line-number="15"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-time > section span[data-line-number="29"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>Now let's fill in the sky again.  The results will vary quite a bit from
machine to machine, but, even on a relatively modern computer, you're likely to
see something like the following:</p>
<pre><code class="language-plain">this took 0.5847759246826172 seconds
</code></pre>
<p>That's definitely faster than before.  But, more than half a second for this
operation?  That still seems incredibly slow for a modern computer filling a
tiny image.</p>
<p>So, while we appear to have a <em>working</em> program now, there's still room for
improvement!  Let's see what we can do to speed things up here.</p>
<p><a class="anchor" name="catsoop_section_4_8"></a><a class="anchor" name="_using_the_right_data_structure"></a><h3 class="cs_section_title">4.8) Using the Right Data Structure<a class="cs_permalink" href="#_using_the_right_data_structure">§</a></h3></p>
<p>Let's start by making a small change to our code.  Feel free to follow along
here as well.  Let's make the following two changes:</p>
<ul>
<li>Replace <code>visited = [location]</code> with <code>visited = {location}</code>, using squiggly brackets instead of round brackets.</li>
<li>Replace <code>visited.append(neighbor)</code> with <code>visited.add(neighbor)</code>.</li>
</ul>
<p>Running the code again after this change, you're likely to see a <em>substantial</em>
improvement in terms of time (maybe even as big as 10x!):</p>
<pre><code class="language-plain">this took 0.07046723365783691 seconds
</code></pre>
<p>What is going on here?  How can such a small change to the code make such a big
difference in terms of runtime?  The short answer is that those two small
changes mean that we are now using a Python <code>set</code> object, rather than a list,
to store the locations we've already colored in.  We'll spend a lot more time
with sets in an upcoming recitation; but, for now, we'll just briefly
introduce sets and talk a tiny bit about the key behavior that caused this
speedup.</p>
<p>Like lists, sets are <em>containers</em>, in that a set represents a collection of
objects; and, like lists, sets are <em>mutable</em> (we can modify them after creation
time by adding or removing elements).  But, sets are different from lists in
several ways:</p>
<ul>
<li>Sets can only contain certain kinds of elements.</li>
<li>The elements in a set do not have an order.</li>
<li>Elements can't appear more than once in the same set.</li>
<li>Membership tests take roughly the same amount of time, regardless of how big the set is or what element we're looking for.</li>
</ul>
<p>In our original represention (using a list to represent <code>visited</code>), the real
culprit for the slowdown was the check for <code>neighbor not in visited</code>.  When
doing a "membership test" (checking to see whether an element is in the list,
using the <code>in</code> keyword), Python has to scan the full list one element at a
time, checking each one against the element we're looking for.  And, as we
visit more pixel locations in the image, <code>visited</code> gets longer and longer, so
this check will get slower and slower!</p>
<p>The substantial speedup we see from a set here is because that membership check
(<code>neighbor not in visited</code>) runs in <em>constant time</em>, meaning that it takes
roughly the same amount of time, even as the set grows.  For our flood-fill
program, this means that, even as our <code>visited</code> set grows in size, the check for
whether <code>neighbor</code> is in the <code>visited</code> set remains fast.</p>
<p>One word of caution before we move on: sets are absolutely the right choice of
data structure in this particular case, but it can be tempting to draw too
strong a conclusion from this.  It's tempting to say that "sets are faster than
lists" and then replace all your lists with sets!  But, that won't always work.  If
you need your data structure to maintain the order of its elements, or if you
need the ability to hold multiple equivalent objects, then a set won't work in
those cases.  And, for other cases where a set would work, a list may still be
the right choice; it all depends on the specifics of the kinds of operations
we're performing on those structures.  In general, the idea is that, when we're
writing programs, we have a lot of decisions to make about what is stored and
how we represent it; and we want to be careful to choose the right tool for the
job at hand.</p>
<p><a class="anchor" name="catsoop_section_5"></a><a class="anchor" name="_finding_a_path_through_a_maze"></a><h2 class="cs_section_title">5) Finding a Path Through a Maze<a class="cs_permalink" href="#_finding_a_path_through_a_maze">§</a></h2></p>
<p>At this point, we have a working and relatively efficient program for
performing a flood fill!  Here is the code where we're leaving it off for now:</p>
<pre><code class="language-python highlight-lines">def flood_fill(image, location, new_color):
    # store the original color that we clicked on
    # (recall that "*location" is equivalent to "location[0],location[1]")
    original_color = get_pixel(image, *location)

    # helper function to get neighboring locations of a given row, col coordinate
    # (only returning in-bounds neighbors)
    def get_neighbors(cell):
        row, col = cell
        potential_neighbors = [(row+1, col), (row-1, col), (row, col+1), (row, col-1)]
        return [
            (nr, nc)
            for nr, nc in potential_neighbors
            if 0 &lt;= nr &lt; get_height(image) and 0 &lt;= nc &lt; get_width(image)
        ]

    to_color = [location]  # agenda: all of the cells we need to color in
    visited = {location}  # visited set: all pixels ever added to the agenda

    # while there are still things to color in
    # ("while to_color" is equivalent to "while len(to_color) != 0")
    while to_color:
        # remove a single (row, col) tuple from to_color and call it this_cell
        this_cell = to_color.pop(0)

        # replace that spot with the given color
        set_pixel(image, *this_cell, new_color)

        # add each neighbor to to_color so long as it matches the color we
        # originally clicked
        for neighbor in get_neighbors(this_cell):
            if (neighbor not in visited
                    and get_pixel(image, *neighbor) == original_color):
                to_color.append(neighbor)
                visited.add(neighbor)
</code></pre>
<p>Let's take a look at applying this to a different image, though, a maze.  The
following video is slowed down so that we can see the way in which our flood-fill
program works its way through a maze.  Here, we start from the upper left
corner, and the end of the maze is the spot in the lower right.</p>
<center>
<video controls="" id="video_cd257cbde4891ca44cbedda0eb6edb40" style="border: 2px solid grey" width="300">
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/maze_flood.mp4" type="video/mp4"/>
<source src="https://py.mit.edu/_static/spring24/readings/flood_fill/maze_flood.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
</center>
<p>There is something kind of cool about this.  The flood fill process "explores"
the maze, so to speak, and it eventually fills the whole thing.  Regardless of
where the goal is, the flood-fill process will also eventually reach it!</p>
<p>As a last little exploration for this reading, let's think about what
we could change about our program in order to make it <em>solve</em> a maze (returning
us a list of locations in the solution) rather than just coloring in the maze.
Fortunately, it doesn't take a big change to make this happen; it turns out
that our agenda-based approach will work here as well.</p>
<p>Instead of keeping track of single locations, we are going to keep track of <em>paths</em> (tuples of connected pixel
locations), each of which will start at the start location and end at some
point that we've reached in the maze.</p>
<p>For each step of the algorithm, we'll take a path off the agenda and try to
extend it with one more point neighboring its last point, putting those new
paths back on the agenda.  Once we take a path off the agenda and find that it
ends at the end point of the maze, we're done!</p>
<p>We'll still use a <code>visited</code> set here, but its usage here is a little bit
nuanced.  In the flood-fill example, our <code>visited</code> set kept track of <em>all
pixels that we knew we wanted to color in</em>.  Here, we're instead going to use it
to keep track of <em>all locations to which we've already found a path</em>, i.e., all
locations that have ever been the <em>last location</em> in a path.</p>
<p>Many pieces of our flood-fill code will now work fine, but we probably want to
give this new function a new name and change a few things about its function
signature (we'll change some names, but, also, since we're not coloring these
things in as we go, there's no need to specify a <code>new_color</code> argument); but the
goal in our mazes will be represented by a particular color.  Let's also rename
our agenda variable from <code>to_color</code> to <code>possible_paths</code> and make it a list of
paths, where each path is a tuple of locations.</p>
<p>So, maybe the start of our function now looks like:</p>
<pre><code class="language-py highlight-lines">def find_path(image, start_location, goal_color):
    safe_color = get_pixel(image, *start_location)

    # helper function to get neighboring locations of a given row, col coordinate
    # (only returning in-bounds neighbors)
    def get_neighbors(cell):
        row, col = cell
        potential_neighbors = [(row+1, col), (row-1, col), (row, col+1), (row, col-1)]
        return [
            (nr, nc)
            for nr, nc in potential_neighbors
            if 0 &lt;= nr &lt; get_height(image) and 0 &lt;= nc &lt; get_width(image)
        ]

    possible_paths = [(start_location,)]  # agenda: paths we know about but have not yet tried to extend
</code></pre>
<p>And, now, our looping structure, in pseudocode, will look like:</p>
<ul>
<li>
<p>Repeat the following:</p>
<ul>
<li>Remove one path from the agenda.</li>
<li>For each of the neighbors of the <em>last</em> location in the path:
<ul>
<li>If it is in the visited set, skip it and move on to the next neighbor.</li>
<li>Otherwise, if it represents the goal condition (if that spot's color matches the <code>goal_color</code>), then return the path (including the goal location at the end).</li>
<li>Otherwise, if it is the same color as where we started, add it to the visited set and add the associated path (containing that neighbor) to the agenda.</li>
</ul>
</li>
</ul>
<p>until the agenda is empty (search failed).</p>
</li>
</ul>
<p>Note that this is a minor change from our flood-fill algorithm.  The main difference
is that we're keeping track of not only the locations we are considering but
also <em>how we got there</em>.</p>
<p>We can also see this at work by applying it to different mazes (we've included
a few in the code distribution from today).  Here are two examples solved by
code following this plan.  These correspond to <code>large_maze.png</code> and
<code>huge_maze.png</code> in the code distribution (feel free to try implementing these
examples for yourself!), and in each, the start is the upper-left-most white pixel
and the goal is the lower-right-most white pixel.</p>
<center>
<b><tt>large_maze.png</tt></b> (293 locations in solution)<br/>
<img src="https://py.mit.edu/_static/spring24/readings/flood_fill/large_solution.png" width="200"/><br/>
</center>
<p> </p>
<center>
<b><tt>huge_maze.png</tt></b> (2555 locations in solution)<br/>
<img src="https://py.mit.edu/_static/spring24/readings/flood_fill/huge_solution.png" width="900"/><br/>
</center>
<div class="response" markdown="">
<p>Here's how you can change <code>flood_fill.py</code> so that it calls <code>find_path</code> on mazes of your choice:</p>
<ul>
<li>find the line <code>IMAGE = "flood_input.png"</code> and change it to use the filename of a maze image, such as <code>"large_maze.png"</code> or <code>"huge_maze.png"</code></li>
<li>near the end of the file, change the call to <code>flood_fill</code> so that it calls <code>find_path</code> instead</li>
</ul>
</div>
<p><a class="anchor" name="catsoop_section_6"></a><a class="anchor" name="_summary"></a><h2 class="cs_section_title">6) Summary<a class="cs_permalink" href="#_summary">§</a></h2></p>
<p>As usual, we've covered a <strong>lot</strong> of ground in this reading along a
number of different dimensions, so we'll try to recap some of the main points
here.</p>
<p>Our main focus for this reading centered around techniques for debugging and
iteratively improving a small program: following the locate/understand/fix
process and using print statements and error messages to guide the locating
and understanding.  Although our examples here all centered around one problem,
we encourage you to try to apply this same process to your own programs when
unexpected things happen.</p>
<p>We also introduced the specific "flood-fill" algorithm and extended it to solve
mazes.  Both of these examples are special cases of a broadly applicable
general approach called <em>graph search</em>, which is useful for solving a wide
variety of real-world problems and which we will formalize more
in the coming labs, recitations, and readings.</p>
<p>Along the way, we also introduced a few interesting features of Python, which
we encourage you to experiment with as you're continuing with writing your own
programs!</p>
<p><script type="text/javascript">
catsoop.callbacks['submit'] = function(ok, names, status, response){
    response = JSON.parse(response);
    if (response[names[0]].score == 1){
        document.getElementById(names[0] + '_viewanswer').click();
    }
}
</script></p>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
catsoop.all_questions = ['zip1', 'zip2', 'listcomp1', 'listcomp2', 'ff_helpers', 'ff_code_assessment', 'input_height_and_width', 'code_bug_line', 'multiplechoice_speed_check'];
catsoop.username = 'gvargas1';
catsoop.this_path = 'https://py.mit.edu/spring24/readings/flood_fill';
catsoop.path_info = ['spring24', 'readings', 'flood_fill'];
catsoop.course = 'spring24';
catsoop.url_root = 'https://py.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = ["zip1", "zip2", "listcomp1", "listcomp2", "ff_helpers", "ff_code_assessment", "input_height_and_width", "code_bug_line", "multiplechoice_speed_check"];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

// @license-end</script>
<div id="cs_footnotes" style="display:none;"></div>
</div>
</div>
<div class="cs_right_menu"></div>
</div>
<footer>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation"><li><a href="https://py.mit.edu/spring24">Home</a></li><li><a href="https://py.mit.edu/spring24/readings">Course Readings</a></li><li><a href="https://py.mit.edu/spring24/readings/flood_fill">Flood Fill</a></li></nav>
<div class="cs_footer">
      This page was last updated on Monday February 26, 2024 at 07:58:26 AM (revision <code>73b6574f</code>).<br/> <br/>
<center><img src="https://py.mit.edu/_static/spring24/readings/cc-by-sa.svg" style="width: 2cm;"/></center><div style="max-width: 600px; margin-bottom:1em; margin-left:auto; margin-right:auto;">Except where otherwise noted, these readings are licensed under a<br/><a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" target="_blank">Creative Commons BY-SA 4.0</a> license.  Portions of the readings were derived from<br/>or inspired by the <a href="https://web.mit.edu/6.031/www/sp24/" target="_blank">6.031 Course Notes</a>, the <a href="https://hz.mit.edu/catsoop/6.145" target="_blank">6.145 Course Notes</a>, and the 6.01 Course Notes.
</div>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.org" target="_blank">CAT-SOOP</a> v19.0.6+hg.3.118aecfb "Korat" (LTS) (development snapshot).<br/>
      CAT-SOOP is <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>, available under the terms<br/>of the <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br/>
<a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a><br/>
<a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</div>
</footer>
</body>
</html>

