<!DOCTYPE html>

<html>
<head>
<!-- This page was generated by CAT-SOOP 19.0.6+hg.3.118aecfb.  miau. -->
<meta charset="utf-8"/>
<title>Inheritance and Object-oriented Design | Course Readings | 6.101 Spring 2024</title>
<link href="https://py.mit.edu/_static/spring24/logo.gif" rel="icon" type="image/gif"/>
<!-- include catsoop base css -->
<link href="https://py.mit.edu/_static/_base/themes/base.css" rel="stylesheet" type="text/css"/>
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    function toggleAttribute(elt, attr){
        elt.setAttribute(attr, elt.getAttribute(attr) === "true" ? "false" : "true");
    }

    catsoop.topMenuFocus = function(event) {
        var elt = event.target;
        var target = event.relatedTarget;
        if (elt.classList.contains('menu-submenu')){
            var topmenu = elt.parentNode.parentNode;
            if (target && !target.classList.contains("menu-submenu") && target !== topmenu.children[1]) {
                clearMenu(topmenu);
            }
        }else if (!target.classList.contains('cs_top_menu_item')){
            clearMenu(elt.parentNode);
        }
    }

    window.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu){
       menu.children[1].checked = false;
    }
    // @license-end
    </script>
<!-- dark mode -->
<script src="https://py.mit.edu/_static/_base/js/darkreader/darkreader.min.js" type="text/javascript"></script>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.dark_mode_settings = null;
    if (catsoop.dark_mode_settings === null){
        catsoop.dark_mode_settings = JSON.parse(localStorage.getItem('catsoop_dark_mode_settings'));
        if (catsoop.dark_mode_settings === null){
            catsoop.dark_mode_settings = {'mode': 'disabled', 'brightness': 100, 'contrast': 90, 'sepia': 10, 'grayscale': 0};
        }
    }
    localStorage.setItem('catsoop_dark_mode_settings', JSON.stringify(catsoop.dark_mode_settings));
    catsoop.dark_mode = catsoop.dark_mode_settings.mode;
    delete catsoop.dark_mode_settings.mode;
    if (catsoop.dark_mode === 'enabled' || catsoop.dark_mode === 'auto'){
        DarkReader[catsoop.dark_mode == 'enabled' ? 'enable' : 'auto'](catsoop.dark_mode_settings);
    }
    
    document.addEventListener("DOMContentLoaded", function(event) {
        if (DarkReader.isEnabled()) {
            var invertfilter = 'invert(100%) hue-rotate(180deg)' +
                               ' brightness(' + catsoop.dark_mode_settings.brightness + '%)' +
                               ' contrast(' + catsoop.dark_mode_settings.contrast + '%)' +
                               ' grayscale(' + catsoop.dark_mode_settings.grayscale + '%)' +
                               ' sepia(' + catsoop.dark_mode_settings.sepia + '%)'
            var inverter = document.createElement('style');
            inverter.innerText = 'img.catsoop-darkmode-invert, video.catsoop-darkmode-invert {filter: ' + invertfilter + ';}\n\n'
            document.head.appendChild(inverter);
        }
    });
    // @license-end
    </script>
<!-- load in mathjax and CAT-SOOP-specific math rendering  -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    MathJax = {
      startup: {
        typeset: false,
      }
    }

    catsoop.render_math = function (elt) {
        if(elt.classList.contains('cs_displaymath')){
            var b = "\\[";
            var e = "\\]";
        }else{
            var b = "\\(";
            var e = "\\)";
        }
        elt.innerText = b + elt.innerText + e;
        MathJax.typeset([elt]);
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function (elt){
        if (elt === null) {
            return;
        }
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while(mathelts.length > 0){
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
          catsoop.render_all_math(document);
    });
    // @license-end
    </script>
<script id="MathJax-script" src="https://py.mit.edu/_static/_base/js/mathjax/tex-chtml-full-speech.js"></script>
<!-- load in diagram stuff -->
<script src="https://py.mit.edu/_static/_base/js/cs_diagrams.js" type="text/javascript"></script>
<script type="text/javascript">
        catsoop.diagram_sources = {};
    </script>
<!-- Syntax Highlighting -->
<script src="https://py.mit.edu/_static/_base/js/highlight/highlight.min.js" type="text/javascript"></script>
<script src="https://py.mit.edu/_static/_base/js/highlightjs-line-numbers.js" type="text/javascript"></script>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.syntax_highlighting = function (elt) {
        if (elt === null) {
            return;
        }
        elt.querySelectorAll('pre > code:not(.highlighted)').forEach((block) => {
            hljs.highlightBlock(block);
            var wrap = document.createElement("section");
            wrap.setAttribute("aria-label", "Code block");
            block.parentNode.replaceWith(wrap);
            wrap.append(block.parentNode);
            block.classList.add('highlighted');
        });
        elt.querySelectorAll('code.highlight-lines').forEach(function(b){
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0){
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
            b.classList.remove('highlight-lines');
        });
    }
    window.addEventListener('DOMContentLoaded', function(){
        catsoop.syntax_highlighting(document);
    });
    // @license-end
    </script>
<style>
      :root {
        --cs-base-bg-color: #0350ba;
        --cs-light-bg-color: #629ced;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<style>
.cs_top_menu_item {
  font-size: 0.88rem;
}
div.dropdown {
  -moz-transform: translateY(-1px);
}
img {
  max-width:100% !important;
}
</style>
<style>
[id^=cs_qdiv].question-lab101 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style2 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style2 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style1 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style1 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style3 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style3 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style4 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style4 [id$=nsubmits_left] {
  display: none;
}
</style>
<style>
h2.cs_section_title {
   margin-top: 3em;
}
h3.cs_section_title {
   margin-top: 3em;
}
h4.cs_section_title {
   margin-top: 2em;
}
code.hljs {
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
img.envdia {
  border-radius: 5px;
  border: 2px #ccc solid;
}
img.pixels {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}
button[id$=clearanswer] {
  display: none;
}
.flex { display: flex; flex-wrap: wrap; }
.flex > pre { flex: 1; }
.flex > img { flex: 0 1; }
</style>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function (){
    document.querySelectorAll("img.envdia").forEach(function (b){
        b.classList.add("catsoop-darkmode-invert")
    });
});
</script>
<script src="https://py.mit.edu/_static/spring24/readings/multistep.js" type="text/javascript"></script>
<link href="https://py.mit.edu/_static/spring24/readings/multistep.css" rel="stylesheet"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.addEventListener("DOMContentLoaded", function(){
    sessionStorage.setItem("last-non-settings", catsoop.this_path);
});
// @license-end
</script>
<script src="https://py.mit.edu/_static/_handler/default/cs_ajax.js" type="text/javascript"></script>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
</head>
<body style="margin: 0px;">
<header id="cs_header">
<div aria-role="menubar" class="nav-container">
<div class="cs_header_text"><a href="https://py.mit.edu/spring24"><img src="https://py.mit.edu/_static/spring24/logo.gif"/> 6.101</a></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_a47c0b052b07cf284d5c1a10c5c01779">Information<span aria-hidden="true" class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_a47c0b052b07cf284d5c1a10c5c01779" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox"/>
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/basics" onblur="catsoop.topMenuFocus(event);" role="menuitem">Basics and Schedule</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/grading" onblur="catsoop.topMenuFocus(event);" role="menuitem">Grading Policies</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/academic_integrity" onblur="catsoop.topMenuFocus(event);" role="menuitem">Academic Integrity</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/help" onblur="catsoop.topMenuFocus(event);" role="menuitem">Getting Help</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/staff" onblur="catsoop.topMenuFocus(event);" role="menuitem">Staff List</a></div></div>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/readings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Readings</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/queue" onblur="catsoop.topMenuFocus(event);" role="menuitem">Queue</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/progress" onblur="catsoop.topMenuFocus(event);" role="menuitem">Progress</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/infrastructure" onblur="catsoop.topMenuFocus(event);" role="menuitem">Infrastructure</a>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_ac80f7987f4a956c836107b10d533a92">gvargas1<span aria-hidden="true" class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_ac80f7987f4a956c836107b10d533a92" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox"/>
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/ssh_keys" onblur="catsoop.topMenuFocus(event);" role="menuitem">Manage SSH Keys</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/_util/user_settings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Settings</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/readings/inheritance?loginaction=logout" onblur="catsoop.topMenuFocus(event);" role="menuitem">Log Out</a></div></div><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_top_navigation" id="cs_breadcrumbs"><li><a href="https://py.mit.edu/spring24">Home</a></li><li><a href="https://py.mit.edu/spring24/readings">Course Readings</a></li><li><a href="https://py.mit.edu/spring24/readings/inheritance">Inheritance and Object-oriented Design</a></li></nav>
<div class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<div class="cs_page_body" role="main">
<center><h1 class="cs_content_header">Inheritance and Object-oriented Design</h1></center>
<div class="callout callout-warning" markdown="">
<p>This reading is relatively new, and your feedback will help us
improve it!  If you notice mistakes (big or small), if you have questions, if
anything is unclear, if there are things not covered here that you'd like to
see covered, or if you have any other suggestions; please get in touch during
office hours or open lab hours, or via e-mail at <code>6.101-help@mit.edu</code>.</p>
</div>


<h2 aria-hidden="true">Table of Contents</h2><ul aria-label="Table of Contents" role="navigation"><li><a href="#_introduction">1) Introduction</a></li><li><a href="#_inheritance">2) Inheritance</a></li><li><a href="#_more_examples_environment_diagrams">3) More Examples: Environment Diagrams</a></li><ul><li><a href="#_adding_an_init_method">3.1) Adding an <code>__init__</code> Method</a></li><li><a href="#_adding_another_class">3.2) Adding Another Class</a></li></ul><li><a href="#_example_drawing_with_shapes">4) Example: Drawing with Shapes</a></li><ul><li><a href="#_circles_and_rectangles">4.1) Circles and Rectangles</a></li><li><a href="#_contains_and_an_organizational_principle">4.2) <code>__contains__</code> and an Organizational Principle</a></li><ul><li><a href="#_implementing_contains">4.2.1) Implementing <code>__contains__</code></a></li></ul><li><a href="#_draw_and_another_organizational_principle">4.3) <code>draw</code> and Another Organizational Principle</a></li><ul><li><a href="#_circle_draw">4.3.1) <code>Circle.draw</code></a></li><li><a href="#_rectangle_draw">4.3.2) <code>Rectangle.draw</code></a></li><li><a href="#_refactoring">4.3.3) Refactoring</a></li></ul><li><a href="#_center_and_the_property_decorator">4.4) <code>center</code> and the <code>@property</code> Decorator</a></li><li><a href="#_adding_another_shape">4.5) Adding Another Shape</a></li><li><a href="#_shape_combinations">4.6) Shape Combinations</a></li><ul><li><a href="#_union">4.6.1) Union</a></li><li><a href="#_intersection_and_difference">4.6.2) Intersection and Difference</a></li><li><a href="#_refactoring_2">4.6.3) Refactoring</a></li></ul><li><a href="#_optional_extra_challenges">4.7) Optional Extra Challenges</a></li></ul><li><a href="#_summary">5) Summary</a></li></ul>
<p><a class="anchor" name="catsoop_section_1"></a><a class="anchor" name="_introduction"></a><h2 class="cs_section_title">1) Introduction<a class="cs_permalink" href="#_introduction">§</a></h2></p>
<p>In the <a href="https://py.mit.edu/spring24/readings/classes">last reading</a>, we introduced the <code>class</code> keyword, which allows us to
make new <em>types</em> of Python objects.  While using classes is not strictly
necessary (in the sense that any program that we can write using classes
could also be written without them), they turn out to be a powerful
organizational tool, and, as we saw last week, they also give us some neat ways
to integrate our custom types into Python so that they can make use of built-in
operators and functions.</p>
<p>In this reading, we'll build on what we learned last week and introduce several
new features that we can make use of when defining classes of our own, and we
hope to do this in a way that demonstrates the power of classes as an
organizational tool.</p>
<p>We're going to start this reading with somewhat-small, somewhat-contrived
examples that we'll use to review some of the features introduced in the last
reading and also to introduce the idea of inheritance.  Once we've walked
through several examples like that, we'll pull back and take a look at using
these ideas to organize a bigger, more-authentic program.</p>
<p>But we'll start with a small example, which should just be review from last
time:</p>
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    pass

a = A()
print(a.x)
</code></pre>
<p>
<!--START question example_a_1 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_a_1" style="position: static">
<div id="example_a_1_rendered_question">
<div id="catsoop_preamble_example_a_1"></div>
<div id="catsoop_prompt_example_a_1" style="display: inline;">Which of the following is printed when we run this program?
Using the rules established in the last reading, draw an environment diagram to
explain this result.<br/></div><div aria-labelledby="catsoop_prompt_example_a_1" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_0" name="example_a_1_opts" type="radio" value="0"/><label for="example_a_1_opts_0"><code>dog</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_1" name="example_a_1_opts" type="radio" value="1"/><label for="example_a_1_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_2" name="example_a_1_opts" type="radio" value="2"/><label for="example_a_1_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_3" name="example_a_1_opts" type="radio" value="3"/><label for="example_a_1_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_4" name="example_a_1_opts" type="radio" value="4"/><label for="example_a_1_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_5" name="example_a_1_opts" type="radio" value="5"/><label for="example_a_1_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_6" name="example_a_1_opts" type="radio" value="6"/><label for="example_a_1_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_7" name="example_a_1_opts" type="radio" value="7"/><label for="example_a_1_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input checked="" id="example_a_1_opts_8" name="example_a_1_opts" type="radio" value="8"/><label for="example_a_1_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_9" name="example_a_1_opts" type="radio" value="9"/><label for="example_a_1_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_a_1_opts_10" name="example_a_1_opts" type="radio" value="10"/><label for="example_a_1_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_a_1" name="example_a_1" type="hidden" value="8"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_a_1_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_a_1").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_a_1_buttons">
<button class="submit btn btn-catsoop" id="example_a_1_submit" onclick="catsoop.submit('example_a_1');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_a_1_clearanswer" onclick="catsoop.clearanswer('example_a_1');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_a_1_loading_wrapper" role="status">
<span id="example_a_1_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_a_1_score_display" role="status"></span>
<div class="nsubmits_left" id="example_a_1_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="example_a_1_solution_container">
<div id="example_a_1_solution">
<b>Solution:</b> None of the above (an <code>AttributeError</code> is raised)
</div>
<div id="example_a_1_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>After running up through line 5 of the example above, our environment diagram looks like:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_1.png" width="350"/>
</center>
<p>Then, on line 6, we make a new instance of this class and associate it with the
name <code>a</code>, resulting in a diagram like the following (note that each instance
stores a reference to the class it's an instance of, which we use for name
resolution when looking up an attribute):</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_2.png" width="350"/>
</center>
<p>Then, when we look up <code>a.x</code>, Python starts by looking for the name <code>a</code> in the
global frame, which it finds, leading us to the instance we just created.
Then, inside of that, we look for an attribute called <code>x</code>.  Since we don't find
one, we look in the class next (following the arrow); and since we don't find
<code>x</code> there (and there are no more arrows to follow), we stop and raise an
<code>AttributeError</code>.  The specific message will say something like:</p>
<pre><code class="nohighlight">AttributeError: 'A' object has no attribute 'x'
</code></pre>
</div>
</div>
<div aria-atomic="true" id="example_a_1_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_a_1 -->
</p>
<p>Now, let's consider a slight modification of the program above (where the body
of the <code>A</code> class is <code>x = 'cat'</code> rather than <code>pass</code>):</p>
<div id="code-example-a2" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

a = A()
print(a.x)
</code></pre>
</div>
<style>
#code-example-a2 > section span[data-line-number="4"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>Think about the differences here.  How will the environment diagram be
different from what we saw above, and how will that affect the result?</p>
<p>
<!--START question example_a_2 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_a_2" style="position: static">
<div id="example_a_2_rendered_question">
<div id="catsoop_preamble_example_a_2"></div>
<div id="catsoop_prompt_example_a_2" style="display: inline;">Which of the following is printed when we run this program?
Draw an environment diagram that explains this result.<br/></div><div aria-labelledby="catsoop_prompt_example_a_2" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_0" name="example_a_2_opts" type="radio" value="0"><label for="example_a_2_opts_0"><code>dog</code></label></input></div>
<div style="margin-bottom: 10px;"><input checked="" id="example_a_2_opts_1" name="example_a_2_opts" type="radio" value="1"/><label for="example_a_2_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_2" name="example_a_2_opts" type="radio" value="2"/><label for="example_a_2_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_3" name="example_a_2_opts" type="radio" value="3"/><label for="example_a_2_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_4" name="example_a_2_opts" type="radio" value="4"/><label for="example_a_2_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_5" name="example_a_2_opts" type="radio" value="5"/><label for="example_a_2_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_6" name="example_a_2_opts" type="radio" value="6"/><label for="example_a_2_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_7" name="example_a_2_opts" type="radio" value="7"/><label for="example_a_2_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_8" name="example_a_2_opts" type="radio" value="8"/><label for="example_a_2_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_9" name="example_a_2_opts" type="radio" value="9"/><label for="example_a_2_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_a_2_opts_10" name="example_a_2_opts" type="radio" value="10"/><label for="example_a_2_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_a_2" name="example_a_2" type="hidden" value="1"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_a_2_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_a_2").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_a_2_buttons">
<button class="submit btn btn-catsoop" id="example_a_2_submit" onclick="catsoop.submit('example_a_2');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_a_2_clearanswer" onclick="catsoop.clearanswer('example_a_2');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_a_2_loading_wrapper" role="status">
<span id="example_a_2_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_a_2_score_display" role="status"></span>
<div class="nsubmits_left" id="example_a_2_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="example_a_2_solution_container">
<div id="example_a_2_solution">
<b>Solution:</b> <code>cat</code>
</div>
<div id="example_a_2_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>In this version of the code, after running up through line 5 of the example
above, our environment diagram looks like the following instead (notice that
our class now has an attribute called <code>x</code>):</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_a2_1.png" width="375"/>
</center>
<p>Then, on line 6, we make a new instance of this class and associate it with the
name <code>a</code>, resulting in a diagram like the following (note that each instance
stores a reference to the class it's an instance of, which we use for name
resolution when looking up an attribute):</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_a2_2.png" width="375"/>
</center>
<p>Then, when we look up <code>a.x</code>, Python starts by looking for the name <code>a</code> in the
global frame, which it finds, leading us to the instance we just created.
Then, inside of that, we look for an attribute called <code>x</code>.  Since we don't find
one in the instance itself, we look in the class next (following the arrow).
And we indeed find an attribute called <code>x</code> in the class.  It refers to the
string <code>"cat"</code> out on the heap, so that's what gets printed to the screen.</p>
</div>
</div>
<div aria-atomic="true" id="example_a_2_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_a_2 -->
<p><a class="anchor" name="catsoop_section_2"></a><a class="anchor" name="_inheritance"></a><h2 class="cs_section_title">2) Inheritance<a class="cs_permalink" href="#_inheritance">§</a></h2></p>
<p>Now that we've gone through a couple of examples to refamilizarize ourselves
with some of last week's rules, let's introduce some new machinery.  Last week,
when we introduced attributes, we described the rules by which variables and
attributes are looked up:</p>
<div class="callout callout-note"><div class="callout-title">From last time...</div>
<p>To look up a variable:</p><ol>
<li>look in the current frame first</li>
<li>if not found, look in the <em>parent</em> frame</li>
<li>if not found, look in that frame's parent frame</li>
<li><span class="cs_math_to_render">\ldots</span> (keep following that process, looking in parent frames)</li>
<li>if not found, look in the global frame</li>
<li>if not found, look in the builtins (where things like <code>print</code>, <code>len</code>, etc. are bound)</li>
<li>if not found, raise a <code>NameError</code></li>
</ol><p>To look up an attribute inside of an object:</p><ol>
<li>look in the object itself</li>
<li>if not found, look in that object's class</li>
<li>if not found, look in that class's superclass</li>
<li>if not found, look in <em>that</em> class's superclass</li>
<li><span class="cs_math_to_render">\ldots</span> (keep following that process, looking in superclasses)</li>
<li>if not found and no more superclasses, raise an <code>AttributeError</code></li>
</ol>
</div>
<p>Our rules for attribute lookup involved not only looking in an instance and
its class but possibly looking in other classes as well (specifically, the
<em>superclass</em>, if any, of the class whose instance we're working with).  But so
far we've not yet shown any such relationships in our environment diagrams, nor
talked about the practical effects of that relationship on our code, nor how
we can leverage this when designing programs.  But don't fret, because that's exactly
the focus of this reading!  Let's go ahead and jump right in to an example, which
uses some syntax that may or may not be familiar from 6.100A:</p>
<div id="code-example-b1" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

class B(A):
    pass

b = B()
print(b.x)
</code></pre>
</div>
<style>
#code-example-b1 > section span[data-line-number="6"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-b1 > section span[data-line-number="7"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-b1 > section span[data-line-number="9"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-b1 > section span[data-line-number="10"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>Note that here we've left the definition of <code>A</code> unchanged.  But when we defined
<code>B</code>, we indicated (by way of the <code>A</code> in parentheses next to it) that our new
class should be, as we say, a <em>subclass</em> of the class called <code>A</code>.  Let's see
how this relationship plays out in our environment diagrams by way of example.</p>
<p>Up through line 5, our diagram is exactly the same as it has been for the
examples we saw earlier:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b1_1.png" width="350"/>
</center>
<p>But things change when we define <code>B</code> starting on line 6.  When Python sees this
class definition, it will make a new class (like before), but it will also store
away, as part of that class object, a reference to the class that it is a
subclass of.  In our diagrams, we'll draw that relationship in the following
way:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b1_2.png" width="350"/>
</center>
<p>What this means is that, if we're ever looking for an attribute or method
inside of this class (either because we looked directly in the class or
because we started by looking in an instance of the class and failed to find it
there), if that attribute doesn't exist in the class, we will continue looking
in its <em>superclass</em> (the class it's a subclass of).  In that way, every
attribute we define in <code>A</code> that isn't also defined in <code>B</code> will be accessible
from <code>B</code>.  We say that <code>B</code> "inherits" attributes and methods from <code>A</code>, and this
relationship is generally referred to as <em>inheritance</em>.</p>
<p>So as we continue through our example, the next step is line 9, where we make
an instance of the class called <code>B</code> and associate it with the name <code>b</code>:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b1_3.png" width="350"/>
</center>
<p>Then we look up <code>b.x</code>.  In so doing, Python starts by evaluating the name <code>b</code>,
finding our new instance.  So we look there for an attribute called <code>x</code>.  Not
finding one, we follow the arrow and look in <code>B</code>.  We still don't find it there,
so we look in <code>A</code>, where we find <code>"cat"</code>, so that's what <code>b.x</code> evaluates to
(and, thus, what is printed to the screen).</p>
<p><a class="anchor" name="catsoop_section_3"></a><a class="anchor" name="_more_examples_environment_diagrams"></a><h2 class="cs_section_title">3) More Examples: Environment Diagrams<a class="cs_permalink" href="#_more_examples_environment_diagrams">§</a></h2></p>
<p>That's it for the rules we're going to introduce for working with classes!  But
now that we've seen those rules play out in a few small examples, let's get
some additional practice by carrying them out on a few more programs.</p>
<p>For each of the pieces of code below, try drawing an environment diagram and
using it to explain what happens when the code is run.  For each, the
differences from the previous piece of code are highlighted in yellow.</p>
<p>Here's our first example, a slight change from the code above:</p>
<div id="code-example-b2" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

class B(A):
    x = "ferret"

b = B()
print(b.x)
</code></pre>
</div>
<style>
#code-example-b2 > section span[data-line-number="7"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>
<!--START question example_b_2 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_b_2" style="position: static">
<div id="example_b_2_rendered_question">
<div id="catsoop_preamble_example_b_2"></div>
<div id="catsoop_prompt_example_b_2" style="display: inline;">Use an environment diagram to model the execution of this
program.  Which of the following is printed when we run this program?<br/></div><div aria-labelledby="catsoop_prompt_example_b_2" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_0" name="example_b_2_opts" type="radio" value="0"><label for="example_b_2_opts_0"><code>dog</code></label></input></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_1" name="example_b_2_opts" type="radio" value="1"/><label for="example_b_2_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input checked="" id="example_b_2_opts_2" name="example_b_2_opts" type="radio" value="2"/><label for="example_b_2_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_3" name="example_b_2_opts" type="radio" value="3"/><label for="example_b_2_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_4" name="example_b_2_opts" type="radio" value="4"/><label for="example_b_2_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_5" name="example_b_2_opts" type="radio" value="5"/><label for="example_b_2_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_6" name="example_b_2_opts" type="radio" value="6"/><label for="example_b_2_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_7" name="example_b_2_opts" type="radio" value="7"/><label for="example_b_2_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_8" name="example_b_2_opts" type="radio" value="8"/><label for="example_b_2_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_9" name="example_b_2_opts" type="radio" value="9"/><label for="example_b_2_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_2_opts_10" name="example_b_2_opts" type="radio" value="10"/><label for="example_b_2_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_b_2" name="example_b_2" type="hidden" value="2"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_b_2_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_b_2").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_b_2_buttons">
<button class="submit btn btn-catsoop" id="example_b_2_submit" onclick="catsoop.submit('example_b_2');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_b_2_clearanswer" onclick="catsoop.clearanswer('example_b_2');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_b_2_loading_wrapper" role="status">
<span id="example_b_2_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_b_2_score_display" role="status"></span>
<div class="nsubmits_left" id="example_b_2_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="example_b_2_solution_container">
<div id="example_b_2_solution">
<b>Solution:</b> <code>ferret</code>
</div>
<div id="example_b_2_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>The diagram ends up being <em>almost</em> the same as in our last example, except that
here the class we're calling <code>B</code> also has an attribute called <code>x</code>, which refers
to the string <code>"ferret"</code>:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b2_1.png" width="400"/>
</center>
<p>So in this case, when we look up <code>b.x</code>, we still don't find an attribute called
<code>x</code> in the instance, but chaining up to that instance's class, we find <code>"ferret"</code>.</p>
</div>
</div>
<div aria-atomic="true" id="example_b_2_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_b_2 -->
</p>
<p><a class="anchor" name="catsoop_section_3_1"></a><a class="anchor" name="_adding_an_init_method"></a><h3 class="cs_section_title">3.1) Adding an <code>__init__</code> Method<a class="cs_permalink" href="#_adding_an_init_method">§</a></h3></p>
<p>Now let's add an initializer to the <code>B</code> class:</p>
<div id="code-example-b3" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

class B(A):
    x = "ferret"
    def __init__(self):
        self.x = "tomato"

b = B()
print(b.x)
</code></pre>
</div>
<style>
#code-example-b3 > section span[data-line-number="8"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-b3 > section span[data-line-number="9"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>Remember that when we make a new instance of a class, Python will look up the
name <code>__init__</code> in that new instance according to our normal attribute-lookup
rules; and if it finds a method called <code>__init__</code>, it will implicitly call that
method with our new instance passed in as the first argument.</p>
<p>Try stepping through an environment diagram for this program on your own, and
use it to answer the following question:</p>
<p>
<!--START question example_b_3 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_b_3" style="position: static">
<div id="example_b_3_rendered_question">
<div id="catsoop_preamble_example_b_3"></div>
<div id="catsoop_prompt_example_b_3" style="display: inline;">Use an environment diagram to model the execution of this
program.  Which of the following is printed when we run this program?<br/></div><div aria-labelledby="catsoop_prompt_example_b_3" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_0" name="example_b_3_opts" type="radio" value="0"><label for="example_b_3_opts_0"><code>dog</code></label></input></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_1" name="example_b_3_opts" type="radio" value="1"/><label for="example_b_3_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_2" name="example_b_3_opts" type="radio" value="2"/><label for="example_b_3_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input checked="" id="example_b_3_opts_3" name="example_b_3_opts" type="radio" value="3"/><label for="example_b_3_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_4" name="example_b_3_opts" type="radio" value="4"/><label for="example_b_3_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_5" name="example_b_3_opts" type="radio" value="5"/><label for="example_b_3_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_6" name="example_b_3_opts" type="radio" value="6"/><label for="example_b_3_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_7" name="example_b_3_opts" type="radio" value="7"/><label for="example_b_3_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_8" name="example_b_3_opts" type="radio" value="8"/><label for="example_b_3_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_9" name="example_b_3_opts" type="radio" value="9"/><label for="example_b_3_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_3_opts_10" name="example_b_3_opts" type="radio" value="10"/><label for="example_b_3_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_b_3" name="example_b_3" type="hidden" value="3"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_b_3_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_b_3").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_b_3_buttons">
<button class="submit btn btn-catsoop" id="example_b_3_submit" onclick="catsoop.submit('example_b_3');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_b_3_clearanswer" onclick="catsoop.clearanswer('example_b_3');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_b_3_loading_wrapper" role="status">
<span id="example_b_3_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_b_3_score_display" role="status"></span>
<div class="nsubmits_left" id="example_b_3_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="example_b_3_solution_container">
<div id="example_b_3_solution">
<b>Solution:</b> <code>tomato</code>
</div>
<div id="example_b_3_solution_explanation"><hr/><p><b>Explanation:</b></p>
<div class="multistep response" markdown="">
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_1.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we see the start of our diagram after both classes have been completely
defined (i.e., after executing code up to line 10).</p>
<p>The next piece we'll run is <code>b = B()</code> on line 11.  There are quite a few steps
involved here, so we'll step through them one-by-one.  If you have already
drawn a diagram, you can use this as a way to double-check your steps.
If not, it's a good idea to try to draw each step of the process before looking
at our answer.</p>
<p>Since <code>b = B()</code> looks like an assignment statement, we start by evaluating the
expression on the right-hand side of the equals sign.  In this case, we see
<code>B()</code>, which looks like a <em>call</em>.  Evaluating the name <code>B</code>, we find one of the
class objects, so we proceed to make a new instance.  Our first step will be to
make a new empty instance.  Go ahead and click through to the next step to see
the result of that.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_2.png" width="600"/></center>
<div class="step-label"></div>
<p>Now we've got a brand-new instance object, so Python will start by looking there
for an attribute called <code>__init__</code> using our normal attribute-lookup rules.  We
find <code>__init__</code> in the class that's called <code>B</code> in the global frame, so we'll
proceed with calling that function with our new instance implicitly passed in
as the first argument.</p>
<p>At this point, we're proceeding with a regular function call, so our next step
will be to make a new frame for that function call.  We'll go ahead and do that
in the next step, so once you've given it a try, go ahead and click onward.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_3.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we've made our new frame and we've set its parent pointer appropriately
(i.e., to the enclosing frame of the function we're calling).</p>
<p>So now our next step is to bind the parameters of the function to the arguments
that were passed in; and we'll show the result of this in the next step.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_4.png" width="600"/></center>
<div class="step-label"></div>
<p>The function we're calling takes a single parameter (<code>self</code>).  And it's
receiving a single argument since the instance we're creating is implicitly
passed in by Python.  So inside of our new frame, we associate the name <code>self</code>
with that instance.</p>
<p>With that done, we're ready to run the body of the function inside of <strong>F1</strong>.
The first line we encounter in the body is <code>self.x = "tomato"</code>.  When we run
this in <strong>F1</strong>, what happens?</p>
<p>When you're ready, go ahead and click through to the next step to see.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_5.png" width="600"/></center>
<div class="step-label"></div>
<p><code>self.x = "tomato"</code> is an assignment statement, so, as always, we start by
evaluating the expression on the right-hand side of the equals sign.  In this
case, that's the string <code>"tomato"</code>, so we get a new object on the heap
representing this string, which is shown in the diagram above.</p>
<p>But then we need to assign that to <code>self.x</code>.  How does Python figure out what
to do, and what is the net effect on our diagram?  Once you've thought through
that, go ahead and click on to the next step.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_6.png" width="600"/></center>
<div class="step-label"></div>
<p>In order to assign to <code>self.x</code>, we first need to look up the name <code>self</code>
according to our usual variable lookup rules.  Conveniently, there is a
variable called <code>self</code> in <strong>F1</strong>.  Following its arrow, we find the instance
we're in the process of initializing.  So <em>inside of that object</em>, we make a
new attribute called <code>x</code> and associate that with the string we made in the last
step.</p>
<p>What's going to happen next?  Think about it for a bit before clicking ahead to
the next step.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_7.png" width="600"/></center>
<div class="step-label"></div>
<p>Since we're done with our function call, we can clean up the frame <strong>F1</strong>, and
we're all done with initializing this new instance!  Now the only thing left to
do is to associate that instance with the name <code>b</code> in the global frame (since
we got here by running <code>b = B()</code> in the global frame).  Clicking through to
the next step will show that result.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b3_8.png" width="600"/></center>
<div class="step-label"></div>
<p>Here is our diagram as it stands at the end of the program.  From here, we can see
what happens when we evaluate <code>b.x</code>:</p>
<ol>
<li>We look up the name <code>b</code> in the global frame and follow its arrow to the new instance we just made.</li>
<li>Inside of that instance, we look for an attribute called <code>x</code>, which we find; and following its arrow gets us our result: the string <code>"tomato"</code>.</li>
</ol>
</div>
</div>
<script>
// this multistep diagram may get added late (after user pushes Show Answers, not when page loads),
// so make sure it gets converted into a step-by-step browser with buttons
enableMultiStepDiagrams();
</script>
</div>
</div>
<div aria-atomic="true" id="example_b_3_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_b_3 -->
</p>
<p>Now let's try a few different variations on this theme, making some small
changes to the <code>__init__</code> method.  Next, let's look at the following, which
only contains a small syntactical difference compared to our last example:</p>
<div id="code-example-b4" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

class B(A):
    x = "ferret"
    def __init__(self):
        x = "tomato"

b = B()
print(b.x)
</code></pre>
</div>
<style>
#code-example-b4 > section span[data-line-number="9"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>
<!--START question example_b_4 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_b_4" style="position: static">
<div id="example_b_4_rendered_question">
<div id="catsoop_preamble_example_b_4"></div>
<div id="catsoop_prompt_example_b_4" style="display: inline;">Use an environment diagram to model the execution of this
program.  Which of the following is printed when we run this program?<br/></div><div aria-labelledby="catsoop_prompt_example_b_4" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_0" name="example_b_4_opts" type="radio" value="0"><label for="example_b_4_opts_0"><code>dog</code></label></input></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_1" name="example_b_4_opts" type="radio" value="1"/><label for="example_b_4_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input checked="" id="example_b_4_opts_2" name="example_b_4_opts" type="radio" value="2"/><label for="example_b_4_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_3" name="example_b_4_opts" type="radio" value="3"/><label for="example_b_4_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_4" name="example_b_4_opts" type="radio" value="4"/><label for="example_b_4_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_5" name="example_b_4_opts" type="radio" value="5"/><label for="example_b_4_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_6" name="example_b_4_opts" type="radio" value="6"/><label for="example_b_4_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_7" name="example_b_4_opts" type="radio" value="7"/><label for="example_b_4_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_8" name="example_b_4_opts" type="radio" value="8"/><label for="example_b_4_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_9" name="example_b_4_opts" type="radio" value="9"/><label for="example_b_4_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_4_opts_10" name="example_b_4_opts" type="radio" value="10"/><label for="example_b_4_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_b_4" name="example_b_4" type="hidden" value="2"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_b_4_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_b_4").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_b_4_buttons">
<button class="submit btn btn-catsoop" id="example_b_4_submit" onclick="catsoop.submit('example_b_4');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_b_4_clearanswer" onclick="catsoop.clearanswer('example_b_4');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_b_4_loading_wrapper" role="status">
<span id="example_b_4_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_b_4_score_display" role="status"></span>
<div class="nsubmits_left" id="example_b_4_nsubmits_left" role="status">You have submitted this assignment 2 times.</div></div>
<div class="solution" id="example_b_4_solution_container">
<div id="example_b_4_solution">
<b>Solution:</b> <code>ferret</code>
</div>
<div id="example_b_4_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>This one is quite subtle!  Think carefully about the differences in the code and
how they manifest in the diagram before clicking through the steps below.</p>
<div class="multistep response" markdown="">
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b4_1.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we see the start of our diagram after both classes have been completely
defined (i.e., after executing code up to line 10).  Note that the only difference
from the last example is the code in the body of the function object on the
far-right-hand side of the diagram.</p>
<p>As above, the next piece we'll run is <code>b = B()</code> on line 11.</p>
<p>Since <code>b = B()</code> looks like an assignment statement, we start by evaluating the
expression on the right-hand side of the equals sign.  In this case, we see
<code>B()</code>, which looks like a <em>call</em>.  Evaluating the name <code>B</code>, we find one of the
class objects, so we proceed to make a new instance.  Our first step will be to
make a new empty instance.  Go ahead and click through to the next step to see
the result of that.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b4_2.png" width="600"/></center>
<div class="step-label"></div>
<p>Now we've got a brand-new instance object, so Python will start by looking there
for an attribute called <code>__init__</code> using our normal attribute-lookup rules.  We
find <code>__init__</code> in the class that's called <code>B</code> in the global frame, so we'll
proceed with calling that function with our new instance implicitly passed in
as the first argument.</p>
<p>At this point, we're proceeding with a regular function call, so our next step
will be to make a new frame for that function call.  We'll go ahead and do that
in the next step, so once you've given it a try, go ahead and click onward.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b4_3.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we've combined a few pieces into one; this diagram shows the state of
execution after we've both made our new frame and bound the arguments to the
function within that frame.</p>
<p>Now we're ready to run the code, and this is where the crucial difference happens.
The first line we're going to encounter says <code>x = "tomato"</code>.  When we execute
that code in <strong>F1</strong>, what is the result going to be?</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b4_4.png" width="600"/></center>
<div class="step-label"></div>
<p>As in the last example, we still make a string object representing <code>"tomato"</code>
when we evaluate the right-hand side of the assignment expression in the body
of our function.  But what changes is <em>where we're making a binding to that
value</em>.  Instead of creating an attribute inside of our instance, this code
simply creates a new local variable called <code>x</code> inside of <strong>F1</strong> and associates
it with <code>"tomato"</code>!</p>
<p>Now we've reached the end of the body of our function, so what's going to
happen next?</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b4_5.png" width="600"/></center>
<div class="step-label"></div>
<p>Oh, no!  We've cleaned up <strong>F1</strong>, and our definition of <code>x</code> disappeared right
with it.  Then, since no arrows were left pointing to the string object
representing <code>"tomato"</code>, that value got garbage collected!  As such, we're left
with no trace of <code>"tomato"</code> in our new instance.</p>
<p>But at this point we're done initializing that new instance, so the only thing
left to do is to assign it to the name <code>b</code> in the global frame, the result
of which can be seen in the next step.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b4_6.png" width="600"/></center>
<div class="step-label"></div>
<p>Here is our diagram as it stands at the end of the program.  From here, we can see
what happens when we evaluate <code>b.x</code>:</p>
<ol>
<li>We look up the name <code>b</code> in the global frame and follow its arrow to the new instance we just made.</li>
<li>Inside of that instance, we look for an attribute called <code>x</code>, but we don't find it there, so...</li>
<li>We look inside of its class for an attribute called <code>x</code>, which we find; and following its arrow gets us our result: the string <code>"ferret"</code>.</li>
</ol>
</div>
</div>
<script>
// this multistep diagram may get added late (after user pushes Show Answers, not when page loads),
// so make sure it gets converted into a step-by-step browser with buttons
enableMultiStepDiagrams();
</script>
</div>
</div>
<div aria-atomic="true" id="example_b_4_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_b_4 -->
</p>
<p>Let's try one more example with <code>A</code> and <code>B</code> before we add in another wrinkle.
Consider the following change to <code>B.__init__</code>:</p>
<div id="code-example-b5" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

class B(A):
    x = "ferret"
    def __init__(self):
        self.x = x

b = B()
print(b.x)
</code></pre>
</div>
<style>
#code-example-b5 > section span[data-line-number="9"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>
<!--START question example_b_5 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_b_5" style="position: static">
<div id="example_b_5_rendered_question">
<div id="catsoop_preamble_example_b_5"></div>
<div id="catsoop_prompt_example_b_5" style="display: inline;"><strong>Carefully</strong> use an environment diagram to model the execution of this code.
What is printed to the screen when we run the code?<br/></div><div aria-labelledby="catsoop_prompt_example_b_5" role="radiogroup">
<div style="margin-bottom: 10px;"><input checked="" id="example_b_5_opts_0" name="example_b_5_opts" type="radio" value="0"><label for="example_b_5_opts_0"><code>dog</code></label></input></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_1" name="example_b_5_opts" type="radio" value="1"/><label for="example_b_5_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_2" name="example_b_5_opts" type="radio" value="2"/><label for="example_b_5_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_3" name="example_b_5_opts" type="radio" value="3"/><label for="example_b_5_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_4" name="example_b_5_opts" type="radio" value="4"/><label for="example_b_5_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_5" name="example_b_5_opts" type="radio" value="5"/><label for="example_b_5_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_6" name="example_b_5_opts" type="radio" value="6"/><label for="example_b_5_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_7" name="example_b_5_opts" type="radio" value="7"/><label for="example_b_5_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_8" name="example_b_5_opts" type="radio" value="8"/><label for="example_b_5_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_9" name="example_b_5_opts" type="radio" value="9"/><label for="example_b_5_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_b_5_opts_10" name="example_b_5_opts" type="radio" value="10"/><label for="example_b_5_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_b_5" name="example_b_5" type="hidden" value="0"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_b_5_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_b_5").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_b_5_buttons">
<button class="submit btn btn-catsoop" id="example_b_5_submit" onclick="catsoop.submit('example_b_5');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_b_5_clearanswer" onclick="catsoop.clearanswer('example_b_5');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_b_5_loading_wrapper" role="status">
<span id="example_b_5_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_b_5_score_display" role="status"></span>
<div class="nsubmits_left" id="example_b_5_nsubmits_left" role="status">You have submitted this assignment 6 times.</div></div>
<div class="solution" id="example_b_5_solution_container">
<div id="example_b_5_solution">
<b>Solution:</b> <code>dog</code>
</div>
<div id="example_b_5_solution_explanation"><hr/><p><b>Explanation:</b></p>
<div class="multistep response" markdown="">
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b5_1.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we see the start of our diagram after both classes have been
defined completely (i.e., after executing code up to line 10).  Note that the only difference
from the last example is the code in the body of the function object on the
far-right-hand side of the diagram.</p>
<p>As above, the next piece we'll run is <code>b = B()</code> on line 11.</p>
<p>Since <code>b = B()</code> looks like an assignment statement, we start by evaluating the
expression on the right-hand side of the equals sign.  In this case, we see
<code>B()</code>, which looks like a <em>call</em>.  Evaluating the name <code>B</code>, we find one of the
class objects, so we proceed to make a new instance.  Our first step will be to
make a new empty instance.  Go ahead and click through to the next step to see
the result of that.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b5_2.png" width="600"/></center>
<div class="step-label"></div>
<p>Now we've got a brand-new instance object, so Python will start by looking there
for an attribute called <code>__init__</code> using our normal attribute-lookup rules.  We
find <code>__init__</code> in the class that's called <code>B</code> in the global frame, so we'll
proceed with calling that function with our new instance implicitly passed in
as the first argument.</p>
<p>At this point, we're proceeding with a regular function call, so our next step
will be to make a new frame for that function call.  We'll go ahead and do that
in the next step, so once you've given it a try, go ahead and click onward.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b5_3.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we've combined a few pieces into one; this diagram shows the state of
execution after we've both made our new frame and bound the arguments to the
function within that frame.</p>
<p>Now we're ready to run the code, and this is where the crucial difference happens.
The first line we're going to encounter says <code>self.x = x</code>.  When we execute
that code in <strong>F1</strong>, what is the result going to be?</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b5_4.png" width="600"/></center>
<div class="step-label"></div>
<p><code>self.x = x</code> is an assignment statement just like any other.  So, as always, we
start by evaluating the right-hand side in <strong>F1</strong>.  In so doing, we look up the
name <code>x</code> in <strong>F1</strong>.  Not finding it there, we follow its parent pointer and
look in the global frame instead, where we find <code>x</code> bound to the string
representing <code>"dog"</code>.</p>
<p>So then we need to associate <code>self.x</code> with that value.  We look up <code>self</code> in
<strong>F1</strong> and find the instance we're initializing; and then, inside of that instance,
we make a new attribute called <code>x</code> and associate it with the value we found
above (the string representing <code>"dog"</code>, which is also called <code>x</code> in the global
frame).</p>
<p>At this point, we've reached the bottom of our <code>B.__init__</code>, so we're ready to
clean things up.  Clicking ahead to the next step will show that result.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b5_5.png" width="600"/></center>
<div class="step-label"></div>
<p>Here, we're all done initializing our new instance, so all that remains is to
associate it with the name <code>b</code> in the global frame.  Click ahead to see that
result.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_b5_6.png" width="600"/></center>
<div class="step-label"></div>
<p>Here is our diagram as it stands at the end of the program.  From here, we can see
what happens when we evaluate <code>b.x</code>:</p>
<ol>
<li>We look up the name <code>b</code> in the global frame and follow its arrow to the new instance we just made.</li>
<li>Inside of that instance, we look for an attribute called <code>x</code>, which we find: it's a string object representing <code>"dog"</code>.</li>
</ol>
</div>
</div>
<script>
// this multistep diagram may get added late (after user pushes Show Answers, not when page loads),
// so make sure it gets converted into a step-by-step browser with buttons
enableMultiStepDiagrams();
</script>
</div>
</div>
<div aria-atomic="true" id="example_b_5_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_b_5 -->
</p>
<p><a class="anchor" name="catsoop_section_3_2"></a><a class="anchor" name="_adding_another_class"></a><h3 class="cs_section_title">3.2) Adding Another Class<a class="cs_permalink" href="#_adding_another_class">§</a></h3></p>
<p>Now for our last couple of examples, we'll introduce a third class into our
program:</p>
<div id="code-example-c1" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

class B(A):
    x = "ferret"
    def __init__(self):
        self.x = x

class C(B):
    x = "fish"

c = C()
print(c.x)
</code></pre>
</div>
<style>
#code-example-c1 > section span[data-line-number="11"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-c1 > section span[data-line-number="12"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-c1 > section span[data-line-number="14"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-c1 > section span[data-line-number="15"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>
<!--START question example_c_1 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_c_1" style="position: static">
<div id="example_c_1_rendered_question">
<div id="catsoop_preamble_example_c_1"></div>
<div id="catsoop_prompt_example_c_1" style="display: inline;">Use an environment diagram to model the execution of this code (how will this new class <code>C</code> manifest in the diagram?) and use it to answer: What is printed to the screen when we run the code?<br/></div><div aria-labelledby="catsoop_prompt_example_c_1" role="radiogroup">
<div style="margin-bottom: 10px;"><input checked="" id="example_c_1_opts_0" name="example_c_1_opts" type="radio" value="0"><label for="example_c_1_opts_0"><code>dog</code></label></input></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_1" name="example_c_1_opts" type="radio" value="1"/><label for="example_c_1_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_2" name="example_c_1_opts" type="radio" value="2"/><label for="example_c_1_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_3" name="example_c_1_opts" type="radio" value="3"/><label for="example_c_1_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_4" name="example_c_1_opts" type="radio" value="4"/><label for="example_c_1_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_5" name="example_c_1_opts" type="radio" value="5"/><label for="example_c_1_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_6" name="example_c_1_opts" type="radio" value="6"/><label for="example_c_1_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_7" name="example_c_1_opts" type="radio" value="7"/><label for="example_c_1_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_8" name="example_c_1_opts" type="radio" value="8"/><label for="example_c_1_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_9" name="example_c_1_opts" type="radio" value="9"/><label for="example_c_1_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_1_opts_10" name="example_c_1_opts" type="radio" value="10"/><label for="example_c_1_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_c_1" name="example_c_1" type="hidden" value="0"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_c_1_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_c_1").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_c_1_buttons">
<button class="submit btn btn-catsoop" id="example_c_1_submit" onclick="catsoop.submit('example_c_1');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_c_1_clearanswer" onclick="catsoop.clearanswer('example_c_1');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_c_1_loading_wrapper" role="status">
<span id="example_c_1_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_c_1_score_display" role="status"></span>
<div class="nsubmits_left" id="example_c_1_nsubmits_left" role="status">You have submitted this assignment 2 times.</div></div>
<div class="solution" id="example_c_1_solution_container">
<div id="example_c_1_solution">
<b>Solution:</b> <code>dog</code>
</div>
<div id="example_c_1_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>If you were expecting this result to be <code>fish</code>, don't worry!  That's a
perfectly normal thing to think at first, but if we carefully apply the rules
we've developed so far, we can explain why the result is <code>dog</code>.</p>
<p>The short version is that because the class <code>C</code> inherits from the class <code>B</code>, we
find <code>B</code>'s <code>__init__</code> method when creating a new instance of <code>C</code>, and calling
that method behaves similarly to how it behaved above.</p>
<p>We'll walk through the steps in detail below:</p>
<div class="multistep response" markdown="">
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_c1_1.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we see the start of our diagram after all three classes have been
completely defined (i.e., after executing code up to line 13).  Note that our
new class object (called <code>C</code> in the global frame) is a subclass of the class we
called <code>B</code>, and this relationship is represented in our diagram.</p>
<p>From here, the next step is to execute line 14 in the global frame: <code>c = C()</code>.</p>
<p>This looks like an assignment statement, so we start by evaluating the
expression on the right-hand side of the equals sign.  In this case, we see
<code>C()</code>, which looks like a <em>call</em>.  Evaluating the name <code>C</code>, we find one of the
class objects, so we proceed to make a new instance.  Our first step will be to
make a new empty instance.  Go ahead and click through to the next step to see
the result of that.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_c1_2.png" width="600"/></center>
<div class="step-label"></div>
<p>Now we've got a brand-new instance object, so Python will start by looking
there for an attribute called <code>__init__</code> using our normal attribute-lookup
rules.  We don't find one in the class called <code>C</code>, but we <em>do</em> find one in the
class called <code>B</code>!  So we'll proceed with calling that function with our new
instance implicitly passed in as the first argument.</p>
<p>At this point, we're proceeding with a regular function call, so our next step
will be to make a new frame for that function call.  We'll go ahead and do that
in the next step, so once you've given it a try, go ahead and click onward.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_c1_3.png" width="600"/></center>
<div class="step-label"></div>
<p>Here we've combined a few pieces into one; this diagram shows the state of
execution after we've both made our new frame and bound the arguments to the
function within that frame.</p>
<p>Now we're ready to run the code.  The first line we're going to encounter says
<code>self.x = x</code>.  When we execute that code in <strong>F1</strong>, what is the result going to
be?</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_c1_4.png" width="600"/></center>
<div class="step-label"></div>
<p>Just like in our example above, the result of evaluating <code>self.x = x</code> is that
we find the string <code>"dog"</code> (which was called <code>x</code> in the global frame), and we
make a new attribute <code>x</code> inside of our instance that refers to that same
string.</p>
<p>At this point, we've reached the bottom of <code>B.__init__</code>, so we're ready to
clean things up.  Clicking ahead to the next step will show that result.</p>
</div>
<div class="step">
<center><img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_c1_5.png" width="600"/></center>
<div class="step-label"></div>
<p>Here, we've again combined a couple of steps into one.  We've cleaned up <strong>F1</strong>,
and we've also bound our new instance to the name <code>c</code> in the global frame.  So
this drawing represents the state of the program after running line 14, which we
can use to see what happens when we evaluate <code>c.x</code>:</p>
<ol>
<li>We look up the name <code>c</code> in the global frame and follow its arrow to the new instance we just made.</li>
<li>Inside of that instance, we look for an attribute called <code>x</code>, which we find: it's a string object representing <code>"dog"</code>.</li>
</ol>
<p>So even though the <em>class</em> <code>C</code> has an attribute called <code>x</code> that points to a
string <code>"fish"</code>, we don't find that object because the <em>instance</em> <code>c</code> has an
attribute called <code>x</code>.</p>
<p>If we were to look up <code>C.x</code> (with a capitalized <code>C</code>) instead, we would find
<code>"fish"</code>.</p>
</div>
</div>
<script>
// this multistep diagram may get added late (after user pushes Show Answers, not when page loads),
// so make sure it gets converted into a step-by-step browser with buttons
enableMultiStepDiagrams();
</script>
</div>
</div>
<div aria-atomic="true" id="example_c_1_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_c_1 -->
</p>
<p>And as one last example before moving on, let's consider what happens when
we give <code>C</code> its own <code>__init__</code> method (in this case, an empty one).</p>
<div id="code-example-c2" markdown="">
<pre><code class="language-py highlight-lines">x = "dog"

class A:
    x = "cat"

class B(A):
    x = "ferret"
    def __init__(self):
        self.x = x

class C(B):
    x = "fish"
    def __init__(self):
        pass

c = C()
print(c.x)
</code></pre>
</div>
<style>
#code-example-c2 > section span[data-line-number="13"] {
    background-color: rgba(255, 255, 0, 0.2);
}
#code-example-c2 > section span[data-line-number="14"] {
    background-color: rgba(255, 255, 0, 0.2);
}
</style>
<p>
<!--START question example_c_2 --><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_example_c_2" style="position: static">
<div id="example_c_2_rendered_question">
<div id="catsoop_preamble_example_c_2"></div>
<div id="catsoop_prompt_example_c_2" style="display: inline;">Use an environment diagram to model the execution of this code and use it to answer: What is printed to the screen when we run the code?<br/></div><div aria-labelledby="catsoop_prompt_example_c_2" role="radiogroup">
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_0" name="example_c_2_opts" type="radio" value="0"><label for="example_c_2_opts_0"><code>dog</code></label></input></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_1" name="example_c_2_opts" type="radio" value="1"/><label for="example_c_2_opts_1"><code>cat</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_2" name="example_c_2_opts" type="radio" value="2"/><label for="example_c_2_opts_2"><code>ferret</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_3" name="example_c_2_opts" type="radio" value="3"/><label for="example_c_2_opts_3"><code>tomato</code></label></div>
<div style="margin-bottom: 10px;"><input checked="" id="example_c_2_opts_4" name="example_c_2_opts" type="radio" value="4"/><label for="example_c_2_opts_4"><code>fish</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_5" name="example_c_2_opts" type="radio" value="5"/><label for="example_c_2_opts_5"><code>lemon</code></label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_6" name="example_c_2_opts" type="radio" value="6"/><label for="example_c_2_opts_6">None of the above (we get a different value instead)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_7" name="example_c_2_opts" type="radio" value="7"/><label for="example_c_2_opts_7">None of the above (a <code>NameError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_8" name="example_c_2_opts" type="radio" value="8"/><label for="example_c_2_opts_8">None of the above (an <code>AttributeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_9" name="example_c_2_opts" type="radio" value="9"/><label for="example_c_2_opts_9">None of the above (a <code>TypeError</code> is raised)</label></div>
<div style="margin-bottom: 10px;"><input id="example_c_2_opts_10" name="example_c_2_opts" type="radio" value="10"/><label for="example_c_2_opts_10">None of the above (some other exception is raised)</label></div>
</div><input id="example_c_2" name="example_c_2" type="hidden" value="4"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.querySelectorAll("input[type=radio][name=example_c_2_opts]").forEach(function(r){
    r.addEventListener("click", function(){
        document.getElementById("example_c_2").value = this.value;
    });
});
// @license-end
</script>
</div><div>
<span id="example_c_2_buttons">
<button class="submit btn btn-catsoop" id="example_c_2_submit" onclick="catsoop.submit('example_c_2');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="example_c_2_clearanswer" onclick="catsoop.clearanswer('example_c_2');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="example_c_2_loading_wrapper" role="status">
<span id="example_c_2_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="example_c_2_score_display" role="status"></span>
<div class="nsubmits_left" id="example_c_2_nsubmits_left" role="status">You have submitted this assignment 2 times.</div></div>
<div class="solution" id="example_c_2_solution_container">
<div id="example_c_2_solution">
<b>Solution:</b> <code>fish</code>
</div>
<div id="example_c_2_solution_explanation"><hr/><p><b>Explanation:</b></p>
<p>The key difference here is that when we're making our new instance with <code>c =
C()</code>, we call <code>C.__init__</code> (which simply says <code>pass</code>) instead of <code>B.__init__</code>.
The end result is that no new attributes get assigned in our instance:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/small_examples_c2_4.png" width="400"/>
</center>
<p>So when we look up <code>c.x</code>, we don't find an attribute <code>x</code> in the instance, so
we chain up to its class, where we find <code>"fish"</code>.</p>
<p>It's important to note here that Python only ever runs <em>one</em> <code>__init__</code> method
when making a new instance (the one that it comes across first in the normal
attribute-resolution process).  If we wanted <code>C.__init__</code> to do the work from
<code>B.__init__</code> (and possibly some additional work), we could write something like
the following for <code>C.__init__</code>:</p>
<pre><code class="language-py">class C(B):
    def __init__(self):
        B.__init__(self)
        # some additional code here
</code></pre>
<p>This might seem weird at first, but the line <code>B.__init__(self)</code> is saying let's
look up the name <code>B</code> (which we'll eventually find in the global frame through
our normal variable-name-resolution process), then inside of that, look for
something called <code>__init__</code>, which finds the function we wrote earlier.  Since
we looked up <code>__init__</code> by way of its <em>class</em> rather than from an <em>instance</em> of
that class, we just get the normal function object (Python does not
automatically pass anything in).</p>
<p>So then to call this function, we need to specify an argument explicitly, i.e.,
we need to specify which instance we want to run <code>B</code>'s <code>__init__</code> function on.
In this case, it's <em>the instance we're currently initializing</em>, which is
accessible locally as <code>self</code>; so that's what we pass in to <code>B.__init__</code>.</p>
<p>We'll see an example of this in the latter half of this reading as well.</p>
</div>
</div>
<div aria-atomic="true" id="example_c_2_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="/></div>
</div>
</section>
<!--END question example_c_2 -->
</p>
</p>
<p><a class="anchor" name="catsoop_section_4"></a><a class="anchor" name="_example_drawing_with_shapes"></a><h2 class="cs_section_title">4) Example: Drawing with Shapes<a class="cs_permalink" href="#_example_drawing_with_shapes">§</a></h2></p>
<p>In the past several sections, we've been looking at small examples to get a
feel for what is going on "behind the scenes" when we write code that uses
inheritance.  That knowledge is critical, particularly when unexpected things
happen in code that makes use of these features.  But so far, we have not
described <em>why</em> or <em>when</em> we might want to use these features in our own
programs.  In this section, we'll talk through the construction of a more
authentic program, with the goal of further exploring the question of how we
can use these ideas to organize our code so as to manage complexity in a large
program.</p>
<p>The context we'll use to explore this idea is a drawing library, which we'll
use to augment the kinds of capabilities we developed in labs 1 and 2 to enable
drawing complex shapes.  We'll go about this by implementing representations
for various shapes in Python, and we'll build in a functionality for drawing
those shapes onto images so that we can display them to the screen or save
them as image files, etc.</p>
<p>We've made a code skeleton available here: <a href="https://py.mit.edu/_static/spring24/readings/inheritance/shapes.py"><code>shapes.py</code></a>,
which you can use to follow along on your own machine if you want to.  There
are some helper functions up near the top of that code for working with our
earlier image representation, and we'll use those as we work through building
up our representation of shapes.  Our main focus is not going to be on that
code but rather on our representation for shapes and on the organization of
the code used to realize that representation.</p>
<p>The way we'll define a shape in this context is as an arbitrary collection of
pixels, and the main question we're going to need to be able to ask of any
shape is: here is a pixel location <span class="cs_math_to_render">(x, y)</span>; is that a part of this shape or
not?</p>
<p>For example, we have an image where <span class="cs_math_to_render">(0,0)</span> is in the bottom left, <span class="cs_math_to_render">x</span>
increases to the right and <span class="cs_math_to_render">y</span> increases upward.  Within that image, we want to
represent a shape, say a circle (like the one drawn in black below):</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/circle1.png" width="300/"/>
</center>
<p>The way we'll define this circle is by asking which pixels are part of the
shape and which aren't:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/circle2.png" width="300/"/>
</center>
<p>We're going to represent shapes using classes in our code, and the way that
we'll implement the question above is as a method <code>__contains__</code>.  <code>__contains__</code>
is one of the special "dunder" methods discussed in the last reading, and it's
used to implement the <code>in</code> keyword for custom types.  So by making sure that
every shape has a <code>__contains__</code> method, we can then say something like <code>(x, y)
in s</code> where <code>s</code> is an instance of one of our shape classes, and Python will
automatically interpret that as <code>s.__contains__((x, y))</code>.</p>
<p>We also want to be able to ask any shape what pixel value is at its center, so
we'll set things up so that, for any shape <code>s</code>, <code>s.center</code> is always an <code>(x,
y)</code> tuple representing the <span class="cs_math_to_render">(x, y)</span> location of that shape's center point.</p>
<p>And, finally, we want to be able to draw these shapes onto images, so we will
define an additional method <code>draw</code> such that for any shape <code>s</code>, <code>s.draw(im,
color)</code> will draw <code>s</code> onto the given image <code>im</code> (in our lab 2 format) in the
specified <code>color</code> (as an <code>(r, g, b)</code> tuple).</p>
<p>Our starter code sets up this kind of structure:</p>
<pre><code class="language-py">class Shape:
    """
    Represents a 2D shape that can be drawn.

    All subclasses MUST implement the following:

    __contains__(self, p) returns True if point p is inside the shape
    represented by self

        Note that "(x, y) in s" for some instance of Shape
        will be translated automatically to "s.__contains__((x, y))"

    s.center should give the (x,y) center point of the shape

    draw(self, image, color) should mutate the given image to draw the shape
    represented by self on the given image in the given color
    """

    def __contains__(self, p):
        pass

    def draw(self, image):
        pass
</code></pre>
<p><a class="anchor" name="catsoop_section_4_1"></a><a class="anchor" name="_circles_and_rectangles"></a><h3 class="cs_section_title">4.1) Circles and Rectangles<a class="cs_permalink" href="#_circles_and_rectangles">§</a></h3></p>
<p>Let's start by implementing two particular kinds of shapes: circles and
rectangles.  We'll do this by implementing two subclasses of <code>Shape</code>:</p>
<pre><code class="language-py">class Circle(Shape):
    pass

class Rectangle(Shape):
    pass
</code></pre>
<div class="question"><b>Check Yourself:</b><p><p>Let's think through how we can implement <code>Circle</code>.  In particular, think about:</p>
<ul>
<li>what information do we need to store to represent a circle?</li>
<li>(we'll come back to this later, but...) how can we use that information to implement <code>__contains__</code> and <code>center</code> and <code>draw</code>?</li>
</ul>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>The easiest way to specify a circle is by its center point and its radius, so
we can store those as attributes inside of every <code>Circle</code> instance.</p>
<p>One way to do this is to define an <code>__init__</code> method for circles that takes
those parameters as inputs and simply stores them away:</p>
<pre><code class="language-py">class Circle(Shape):
    def __init__(self, center, radius):
        self.center = center
        self.radius = radius
</code></pre>
</div></div>
</p><p><span id="queue_checkyourself_1"></span></p></div>
<div class="question"><b>Check Yourself:</b><p><p>Similarly, let's think about rectangles from the same kind of lens.  How can we
represent rectangles?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>There are many different ways we could represent rectangles in code, but the
one that we'll use as a running example here will store each rectangle's
lower-left corner (as an <code>(x, y)</code> tuple), as well as its <code>width</code> and <code>height</code>
(each as an integer):</p>
<pre><code class="language-py">class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height
</code></pre>
</div></div>
</p><p><span id="queue_checkyourself_2"></span></p></div>
<p><a class="anchor" name="catsoop_section_4_2"></a><a class="anchor" name="_contains_and_an_organizational_principle"></a><h3 class="cs_section_title">4.2) <code>__contains__</code> and an Organizational Principle<a class="cs_permalink" href="#_contains_and_an_organizational_principle">§</a></h3></p>
<p>Now that we have representations built up for rectangles and circles, we can go
ahead and start thinking about implementing <code>__contains__</code>.  One place where we
might start is by thinking that, since both <code>Circle</code> and <code>Rectangle</code> are
subclasses of <code>Shape</code>, they both inherit the <code>__contains__</code> method from
<code>Shape</code>.  So we can fill in the definition of <code>__contains__</code> in the <code>Shape</code>
class while leaving <code>Circle</code> and <code>Rectangle</code> unchanged, something like:</p>
<pre><code class="language-py">class Shape:
    def __contains__(self, p):
        if isinstance(self, Circle):
            # do some circle-y computations
            # based on self.radius and self.center
        elif isinstance(self, Rectangle):
            # do some rectangle-y computations
            # based on self.lower_left, self.width, and self.height

    def draw(self, image):
        pass


class Circle(Shape):
    def __init__(self, center, radius):
        self.center = center
        self.radius = radius


class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height
</code></pre>
<p>It's worth mentioning that this structure <em>can work</em>, i.e., it is technically
OK to implement things this way (if we have an instance of <code>Circle</code> or
<code>Rectangle</code> and we look for a <code>__contains__</code> method within it, then Python will
eventually find the one implementation of <code>__contains__</code> in the <code>Shape</code> class).</p>
<p>But we're going to recommend <strong>avoiding</strong> this kind of code (specifically, code
that does explicit type checking like this), for a few reasons.</p>
<p>The main reason has to do with thinking ahead and imagining that we may want to
expand our library beyond just circles and rectangles in the future.
Currently, if we think about <em>adding a new kind of shape</em>, then we need to
modify code in multiple places (we need to make a new class and make sure it's
set up with the right attributes, but then we also need to jump up to the
<code>Shape</code> class to add a new conditional to the <code>__contains__</code> method, and we need
to make sure that those two places agree!).  Not only that, but if we continue
adding shapes, this <code>__contains__</code> method is going to get really big and really
complicated, which would make it a good place for bugs to hide.</p>
<p>It would be nice if adding a new shape were easier than that, i.e., if
everything that it meant to be a <em>particular kind of shape</em> existed in one
place (in the subclass).  So organizationally, what we're going to try to
accomplish here is:</p>
<ul>
<li>only things that are <em>general to all shapes</em> are defined in the <code>Shape</code> class, and</li>
<li>everything that is <em>specific to a certain kind of shape</em> is defined in a subclass for that kind of shape.</li>
</ul>
<p>Hopefully we'll see over the remainder of this reading that this approach can
help us keep things relatively small, relatively simple, and relatively easy to
debug.</p>
<p>Despite this goal, though, we <em>do</em> need a way to differentiate these behaviors.
However, we're going to take advantage of the rules we've been learning over
this reading and the last one to avoid writing our own explicit type checks,
effectively making Python do those checks for us using the built-in machinery
we've already seen.  And an effective way to do this is to define <code>__contains__</code>
within each subclass:</p>
<pre><code class="language-py">class Shape:
    def __contains__(self, p):
        raise NotImplementedError("Subclass of Shape didn't define __contains__")

    def draw(self, image):
        pass


class Circle(Shape):
    def __init__(self, center, radius):
        self.center = center
        self.radius = radius

    def __contains__(self, p):
        # do some circle-y computations
        # based on self.radius and self.center


class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height

    def __contains__(self, p):
        # do some rectangle-y computations
        # based on self.lower_left, self.width, and self.height
</code></pre>
<p>This will still work.  If we have an instance in-hand, remember that that
instance knows what class it's an instance of.  So if we have an instance of
<code>Circle</code>, then looking up <code>__contains__</code> inside of it will find <code>Circle</code>'s
<code>__contains__</code> method, and similarly for other kinds of shapes.  But here, the
win is an organizational one: everything that it means to be a <code>Circle</code>, for
example, is all in one place!  With this approach, Python does the type checking
for us implicitly instead of explicitly, in a way that keeps our code cleaner and
more modular (which will make understanding, testing,
debugging, and expanding the program easier!).</p>
<p>One could also argue that there's an efficiency win here as well.  In our
original formulation (with explicit type checking in <code>Shape.__contains__</code>),
figuring out which block of code to execute required checking against multiple
types one after the other.  But in this formulation (with <code>__contains__</code>
defined in each subclass), we don't need to do that; each instance knows right
away which <code>__contains__</code> method is the right one to use.  That's not a big
win but is perhaps worth mentioning (though again, the real advantage here is in
terms of organization and code clarity).</p>
<p>Notice that we've also left something in <code>Shape.__contains__</code>.  The idea
here is that every time we define a new shape, it's going to take care of its
own <code>__contains__</code>; so we should never call <code>Shape.__contains__</code> directly.  So
we're doing a little bit of "defensive programming" here by having that method
raise an exception indicating that we're expecting each subclass to implement
<code>__contains__</code> for itself (so that if we forget it when implementing a new kind
of shape, Python will let us know that we've forgotten!).</p>
<p><a class="anchor" name="catsoop_section_4_2_1"></a><a class="anchor" name="_implementing_contains"></a><h4 class="cs_section_title">4.2.1) Implementing <code>__contains__</code><a class="cs_permalink" href="#_implementing_contains">§</a></h4></p>
<p>Now let's go ahead and implement <code>__contains__</code> for these two shapes.  Try
this on your own and write out some test cases for yourself, before looking
at our solutions below:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><pre><code class="language-py">class Circle(Shape):
    def __init__(self, center, radius):
        self.center = center
        self.radius = radius

    def __contains__(self, p):
        # point is in the circle if its distance from the center is less than
        # or equal to the radius (or, equivalently, if the squared distance is
        # less than or equal to the radius squared)
        assert isinstance(p, tuple) and len(p) == 2
        return sum((i-j)**2 for i, j in zip(self.center, p)) &lt;= self.radius**2

class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height

    def __contains__(self, p):
        px, py = p
        llx, lly = self.lower_left
        return (
            llx &lt;= px &lt;= llx+self.width
            and lly &lt;= py &lt;= lly+self.height
        )
</code></pre></div></div>
<p><a class="anchor" name="catsoop_section_4_3"></a><a class="anchor" name="_draw_and_another_organizational_principle"></a><h3 class="cs_section_title">4.3) <code>draw</code> and Another Organizational Principle<a class="cs_permalink" href="#_draw_and_another_organizational_principle">§</a></h3></p>
<p>Now that we have <code>__contains__</code> defined, we can think about implementing
<code>draw</code>, which should make testing a little bit easier (since it will allow us
to start making images!).  Remember that <code>draw</code> should take an image and a
color (both in our lab 2 representation), and it should mutate the given image
by drawing our shape in the appropriate color.</p>
<p>To start, let's try organizing this the same way as we did for <code>__contains__</code>,
by implementing <code>draw</code> in each subclass.</p>
<p><a class="anchor" name="catsoop_section_4_3_1"></a><a class="anchor" name="_circle_draw"></a><h4 class="cs_section_title">4.3.1) <code>Circle.draw</code><a class="cs_permalink" href="#_circle_draw">§</a></h4></p>
<p>Let's start by thinking about how to
implement this for the <code>Circle</code> class.  Try to write <code>draw</code> for the
<code>Circle</code> class before looking at the discussion below:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>A place to start might be to loop over all valid pixels in the given image,
check whether each is close enough to our center point to be considered part of
the circle, and, if so, modify the image by calling the <code>set_pixel</code> function,
something like the following:</p>
<pre><code class="language-py">class Circle(Shape):
    def __init__(self, center, radius):
        self.center = center
        self.radius = radius

    def __contains__(self, p):
        assert isinstance(p, tuple) and len(p) == 2
        return sum((i-j)**2 for i, j in zip(self.center, p)) &lt;= self.radius**2

    def draw(self, image, color):
        for x in range(image['width']):
            for y in range(image['height']):
                p = (x, y)
                if sum((i-j)**2 for i, j in zip(self.center, p)) &lt;= self.radius**2:
                    set_pixel(image, x, y, color)
</code></pre>
<p>This code will work, but it has a serious stylistic issue that we're hoping is
starting to stand out at this point in the semester.  Can you see what it is?
How can we fix it?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>The key issue is that we've duplicated a complicated piece of code.  In
particular, the following shows up in two distinct places:</p>
<pre><code class="language-py">sum((i-j)**2 for i, j in zip(self.center, p)) &lt;= self.radius**2
</code></pre>
<p>So maybe we could do better by making use of <code>__contains__</code> within <code>draw</code>.
We can do so by replacing the check above with <code>self.__contains__(p)</code>, or,
equivalently, with <code>p in self</code>:</p>
<pre><code class="language-py">class Circle(Shape):
    def __init__(self, center, radius):
        self.center = center
        self.radius = radius

    def __contains__(self, p):
        assert isinstance(p, tuple) and len(p) == 2
        return sum((i-j)**2 for i, j in zip(self.center, p)) &lt;= self.radius**2

    def draw(self, image, color):
        for x in range(image['width']):
            for y in range(image['height']):
                if (x, y) in self:  # if self.__contains__((x, y)):
                    set_pixel(image, x, y, color)
</code></pre>
</div></div>
</div></div>
<p>Now with that implemented, we can try drawing something!  Let's try drawing a little
circle, setting up some code to make it easy to draw more shapes later on:</p>
<pre><code class="language-py">out_image = new_image(500, 500)

shapes = [
    (Circle((100, 100), 30), COLORS['purple']),
]

for shape, color in shapes:
    shape.draw(out_image, color)

save_color_image(out_image, "test.png")
</code></pre>
<p>And we see the following result:</p>
<center>
<img class="envdia" src="https://py.mit.edu/_static/spring24/readings/inheritance/shapes1.png" width="250">
</img></center>
<p>Hooray!  It looks like our little library is working so far (and hopefully
yours is, too, on your own machine!)
<font size="5"><img alt="celebration emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0ZDQUI0MCIgZD0iTTI3Ljk5OSAzNmMtLjQ0OCAwLS44NTUtLjMwMy0uOTY5LS43NTgtLjAzNi0uMTM2LS45MjYtMy40MzYtNC4yNzMtNC4yNzJDMTguMDU0IDI5Ljc5NCAxOCAyMy4yNzcgMTggMjNjMC0uNTUyLjQ0Ny0uOTk4Ljk5OC0uOTk5LjU1NC4wMzQgMSAuNDQ1IDEuMDAyLjk5NyAwIC4wNTMuMDU0IDUuMjM0IDMuMjQyIDYuMDMyIDQuNTMgMS4xMzIgNS42ODIgNS41NCA1LjcyNyA1LjcyOC4xMzUuNTM1LS4xOTEgMS4wNzgtLjcyNyAxLjIxMi0uMDgxLjAyLS4xNjMuMDMtLjI0My4wM3oiLz48cGF0aCBmaWxsPSIjQkIxQTM0IiBkPSJNMTggMjVjLTEuMSAwLTEuNTk4LS44MDUtMS4xMDUtMS43ODlsMS4yMTEtMi40MjJjLjQ5Mi0uOTg0IDEuMjk3LS45ODQgMS43ODkgMGwxLjIxMSAyLjQyMkMyMS41OTggMjQuMTk1IDIxLjEgMjUgMjAgMjVoLTJ6Ii8+PHBhdGggZmlsbD0iI0JCMUEzNCIgZD0iTTI4IDljMCA2LTcgMTItOSAxMnMtOS02LTktMTJjMC01Ljc5OSA0LjU4Mi05IDktOXM5IDMuMjAxIDkgOXoiLz48cGF0aCBmaWxsPSIjRkNBQjQwIiBkPSJNMjAgMjJoLTJjLS41NTIgMC0xLS40NDctMS0xcy40NDgtMSAxLTFoMmMuNTUzIDAgMSAuNDQ3IDEgMXMtLjQ0NyAxLTEgMXoiLz48L3N2Zz4=" title="celebration"/> <img alt="partying_face emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTciIGN5PSIxOSIgcj0iMTciLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMTcuOTk5IiBjeT0iMjYiIHJ4PSIyIiByeT0iMi41Ii8+PHBhdGggZmlsbD0iIzY2NDUwMCIgZD0iTTguMTExIDIxLjM4M2MtLjE4MiAwLS4zNjctLjA1LS41MzItLjE1NC0uNDY3LS4yOTQtLjYwNy0uOTExLS4zMTMtMS4zNzkuOTE2LTEuNDUzIDMuNzAxLTMuOTM4IDcuNjktMi45NjIuNTM2LjEzMS44NjQuNjczLjczMyAxLjIwOS0uMTMyLjUzNi0uNjc2Ljg2Mi0xLjIwOS43MzMtMy42MDQtLjg4Mi01LjUwMiAyLjA1Ni01LjUyMSAyLjA4Ni0uMTkxLjMwMi0uNTE2LjQ2Ny0uODQ4LjQ2N3ptMTEuOTczLTMuNzQyYy0uMjkgMC0uNTc2LS4xMjUtLjc3NC0uMzY2LS4zNS0uNDI3LS4yODgtMS4wNTguMTQtMS40MDggMy4xNzYtMi42MDQgNi43NjItMS41NjIgOC4yMTUtLjY0Ni40NjcuMjk0LjYwNy45MTIuMzEyIDEuMzc5LS4yOTMuNDY1LS45MDguNjA3LTEuMzc2LjMxNS0uMTM4LS4wODQtMy4wNTItMS44MjMtNS44ODQuNDk5LS4xODYuMTUzLS40MS4yMjctLjYzMy4yMjd6Ii8+PHBhdGggZmlsbD0iI0UyQTYyRCIgZD0iTTEzLjM0NiAzMS4yNzNjLS4wNjggMC0uMTM3LS4wMDktLjIwNS0uMDI4LS4zOTgtLjExMy0uNjMtLjUyNy0uNTE3LS45MjYuNDM3LTEuNTQuMjU4LTMuMDI5LS40OS00LjA4Ni0uNDk3LS43MDItMS4yMDUtMS4xMzEtMS45NDMtMS4xNzgtLjQxNC0uMDI1LS43MjgtLjM4Mi0uNzAyLS43OTVzLjM4MS0uNzUxLjc5NS0uNzAxYzEuMTkzLjA3NCAyLjMxMy43MzMgMy4wNzMgMS44MDcgMS4wMTEgMS40MjkgMS4yNyAzLjM4My43MDkgNS4zNjEtLjA5My4zMzEtLjM5NC41NDYtLjcyLjU0NnptMTEuMDM3LTMuMDYxYy0uMTQyIDAtLjI4NS0uMDQtLjQxMi0uMTI0LTEuMTY3LS43Ny0xLjgyLTIuMTE3LTEuNzkyLTMuNjk1LjAyOS0xLjYzNS44MDktMy4xNTMgMS45ODQtMy44NjkuMzUzLS4yMTYuODE0LS4xMDQgMS4wMy4yNTEuMjE2LjM1NC4xMDQuODE0LS4yNTEgMS4wMy0uNzM1LjQ0OC0xLjI0NCAxLjQ5OS0xLjI2NCAyLjYxNC0uMDIgMS4wNTUuMzg5IDEuOTM2IDEuMTE4IDIuNDE3LjM0Ni4yMjguNDQxLjY5My4yMTMgMS4wMzktLjE0NC4yMTktLjM4Mi4zMzctLjYyNi4zMzd6Ii8+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTE3LjE3OSAyLjcyYy0uMDQzLS4wNDktLjExLS4wNzYtLjE4OS0uMDkxIDAgMC0xNS45MjQtMy4wMjMtMTYuNjEzLTIuNDE1Qy0uMzExLjgyMy43NCAxNi45OTguNzQgMTYuOTk4Yy4wMDUuMDgxLjAyMy4xNS4wNjcuMTk5LjYwNC42ODQgNC43NTgtMi4wMDQgOS4yNzktNi4wMDEgNC41MjItMy45OTggNy42OTctNy43OTIgNy4wOTMtOC40NzZ6Ii8+PHBhdGggZmlsbD0iI0VBNTk2RSIgZD0iTS4zNDkuMjcxQy4zMzQuMzAxLjMyMS4zNDIuMzExLjM5NC40NyAxLjc2NSAyLjAwNiAxMy4wNDYgMi45NjMgMTYuNTcyYzEuNDM2LS44MDMgMi44OTUtMS44OTQgNC42MDktMy4yNTNDNi4xMTYgMTAuNjU0IDEuMTU4LjE0Ni4zNDkuMjcxeiIvPjxwYXRoIGZpbGw9IiMzQjg4QzMiIGQ9Ik0yOS45MDIgMjkuMjI5bC0xMC41NzMtMS4zMDNjLTEuMTMtLjEwMi0zLjExNy0uMTEyLTMuMDE1LTEuOTAyLjA5My0xLjYyMyAyLjA0LTEuMzczIDMuNDc5LTEuMTZsMTAuNjM4IDEuNzc0LS41MjkgMi41OTF6Ii8+PHBhdGggZmlsbD0iIzg4QzlGOSIgZD0iTTMwLjQzIDI2LjYzOWwtNC4yMjItLjcyNGMtLjQ5NC0uMDg5LS45MzQuNjQ3LS45NTYgMS40MjYtLjAyNS44NjYuMjI3IDEuMzA0LjcyNiAxLjQwNmw0LjE0NC41MTIuMzA4LTIuNjJ6Ii8+PHBhdGggZmlsbD0iIzNCODhDMyIgZD0iTTM0LjkxOCAyNi4zNDFsLTIuNjIyIDIuNDExLTQuNjg3LTUuMDk3IDIuNjIyLTIuNDExYzEuMzYxLTEuMjUyIDMuNDk5LTEuMTYyIDQuNzUxLjE5OWwuMTM1LjE0N2MxLjI1MSAxLjM2MiAxLjE2MiAzLjQ5OS0uMTk5IDQuNzUxeiIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKC00Mi41OTcgMjkuOTU0IDI2LjIwNSkiIGZpbGw9IiM4OEM5RjkiIGN4PSIyOS45NTIiIGN5PSIyNi4yMDMiIHJ4PSIyLjc3IiByeT0iMy40NjIiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InJvdGF0ZSgtNDIuNTk3IDI5Ljk1NCAyNi4yMDUpIiBmaWxsPSIjMjY5IiBjeD0iMjkuOTUyIiBjeT0iMjYuMjAzIiByeD0iMS4zODUiIHJ5PSIyLjA3NyIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjIuNSIgY3k9IjMzLjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjI5IiBjeT0iMiIgcj0iMiIvPjxwYXRoIGZpbGw9IiNFQTU5NkUiIGQ9Ik00Ljg2NCAyOS4yNDZMMi41MjYgMjMuNjMuNDEyIDI5LjY3NXpNMjYgNWwtNCAxIDEtNHoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMzEuOTk5IDEzTDM2IDcuOTk5IDMzIDZ6Ii8+PC9zdmc+" title="partying_face"/> <img alt="party_ball emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iIzI5MkYzMyIgZD0iTTI2IDljLTMuNTkxIDAtNi4yNy0xLjY0OC03Ljk4OS00LjkwNUMxNi4zODUgNy4zMTQgMTMuOTkzIDkgMTEgOWMtLjU1MiAwLTEtLjQ0OC0xLTFzLjQ0OC0xIDEtMWMyLjcyOSAwIDQuNzY1LTEuOTU3IDYuMDUxLTUuODE2QzE3LjE4OC43NzUgMTcuNTY5LjUgMTggLjVzLjgxMi4yNzUuOTQ5LjY4NEMyMC4yNzEgNS4xNTEgMjIuNTEyIDcgMjYgN2MuNTUzIDAgMSAuNDQ4IDEgMXMtLjQ0NyAxLTEgMXoiLz48cGF0aCBmaWxsPSIjRkZBQzMzIiBkPSJNMTQuNzExIDkuNjU0YzMuMzY0IDMuMzY2LjQ5OCA1Ljk1NC0yLjg2OCA5LjMxOS0zLjM2NSAzLjM2NS01Ljk1NCA2LjIzMi05LjMxOSAyLjg2OC0zLjM2Ni0zLjM2Ni0zLjM2Ni04LjgyMiAwLTEyLjE4NyAzLjM2Ni0zLjM2NiA4LjgyMS0zLjM2NiAxMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMTUuNTQyIDEwLjk3MmMxLjU4NCAxLjU4NS4yNDggNS40ODYtMi45ODMgOC43MTctMy4yMzEgMy4yMzEtNy4xMzIgNC41NjgtOC43MTcgMi45ODItMS41ODQtMS41ODQtLjI0OC01LjQ4NiAyLjk4Mi04LjcxNyAzLjIzMi0zLjIzIDcuMTM0LTQuNTY2IDguNzE4LTIuOTgyeiIvPjxwYXRoIGZpbGw9IiNGRkFDMzMiIGQ9Ik0yMS4yODkgOS42NTRjLTMuMzYzIDMuMzY2LS40OTggNS45NTQgMi44NjggOS4zMTkgMy4zNjUgMy4zNjUgNS45NTQgNi4yMzIgOS4zMTkgMi44NjggMy4zNjUtMy4zNjYgMy4zNjUtOC44MjIgMC0xMi4xODctMy4zNjUtMy4zNjYtOC44Mi0zLjM2Ni0xMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMjAuNDU5IDEwLjk3MmMtMS41ODUgMS41ODUtLjI0OSA1LjQ4NiAyLjk4MiA4LjcxNyAzLjIzIDMuMjMxIDcuMTMzIDQuNTY4IDguNzE3IDIuOTgyIDEuNTg0LTEuNTg0LjI0OC01LjQ4Ni0yLjk4My04LjcxNy0zLjIzLTMuMjMtNy4xMzMtNC41NjYtOC43MTYtMi45ODJ6Ii8+PHBhdGggZmlsbD0iI0FBOEREOCIgZD0iTTIyLjQxIDE4LjIyMWMuMTk5LS4xNi40NTktLjI0NC43MzQtLjIxNS44NjcuMDk0IDEuNTk4LjM5NiAyLjEwOS44NzMuNTQxLjUwNS44MDcgMS4xODMuNzM0IDEuODYyLS4xMjkgMS4xOTEtMS4zMjQgMi4yODUtMy4zNjMgMi4wNjUtLjc5My0uMDg1LTEuMTQ2LjE3LTEuMTU4LjI5MS0uMDE0LjEyMS4yNzcuNDQ2IDEuMDcuNTMyLjg2Ny4wOTQgMS41OTguMzk2IDIuMTA5Ljg3My41NDEuNTA1LjgwOSAxLjE4My43MzQgMS44NjItLjEyOSAxLjE5Mi0xLjMyNCAyLjI4NS0zLjM2MSAyLjA2Ni0uNTc4LS4wNjItLjg4My4wNTctMS4wMTIuMTM0LS4xMDMuMDYzLS4xNDQuMTI0LS4xNDguMTU4LS4wMTIuMTIuMjc1LjQ0NSAxLjA3LjUzMS41NDkuMDYuOTQ3LjU1My44ODcgMS4xMDItLjA1OS41NDktLjU1MS45NDYtMS4xMDIuODg3LTIuMDM3LS4yMTktMi45NzMtMS41NDItMi44NDQtMi43MzUuMTI5LTEuMTkyIDEuMzI0LTIuMjg1IDMuMzYzLTIuMDY1LjU3OC4wNjMuODgxLS4wNTcgMS4wMS0uMTM0LjEwNC0uMDYyLjE0NS0uMTIzLjE0OC0uMTU3LjAxNC0uMTIxLS4yNzUtLjQ0Ni0xLjA3LS41MzItMi4wMzctLjIyLTIuOTczLTEuNTQyLTIuODQ0LTIuNzM1LjEyOS0xLjE5MiAxLjMyNC0yLjI4NiAzLjM2MS0yLjA2NC41NzguMDYyLjg4My0uMDU4IDEuMDEyLS4xMzUuMTAzLS4wNjIuMTQ0LS4xMjMuMTQ4LS4xNTcuMDEyLS4xMjEtLjI3Ny0uNDQ2LTEuMDctLjUzMi0uNTQ5LS4wNTktLjk0Ny0uNTUzLS44ODctMS4xMDIuMDMyLS4yNzYuMTcxLS41MTIuMzctLjY3M3oiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMTUuMjY2IDM1LjgyOGMtMS45NzMuNTU3LTMuMzM0LS4zMjItMy42NTgtMS40NzctLjMyNC0xLjE1NC4zNzgtMi42MTUgMi4zNS0zLjE3Ljc3LS4yMTYgMS4wMDEtLjU4NC45Ny0uNzAxLS4wMzQtLjExOS0uNDI1LS4zMTItMS4xOTMtLjA5Ni0xLjk3Mi41NTYtMy4zMzMtLjMyNC0zLjY1Ny0xLjQ3OS0uMzI2LTEuMTU1LjM3OC0yLjYxNCAyLjM1MS0zLjE2OS43NjktLjIxNyAxLjAwMS0uNTg2Ljk2Ny0uNzAzLS4wMzMtLjExNi0uNDIzLS4zMTEtMS4xOTItLjA5NS0uNTMuMTQ5LTEuMDg0LS4xNTktMS4yMzMtLjY5LS4xNDgtLjUzMy4xNjEtMS4wODQuNjkzLTEuMjM0IDEuOTcxLS41NTUgMy4zMzMuMzIyIDMuNjU5IDEuNDc5LjMyNCAxLjE1NC0uMzc5IDIuNjEzLTIuMzUyIDMuMTctLjc3LjIxNi0xLjAwMS41ODQtLjk2Ny43MDEuMDMyLjExNy40MjIuMzEyIDEuMTkuMDk2IDEuOTc0LS41NTYgMy4zMzQuMzIyIDMuNjU5IDEuNDc5LjMyNSAxLjE1My0uMzc4IDIuNjEyLTIuMzUyIDMuMTY5LS43NjguMjE1LS45OTkuNTg2LS45NjcuNzAxLjAzNC4xMTguNDIzLjMxMiAxLjE5Mi4wOTcuNTMyLS4xNTEgMS4wODMuMTU5IDEuMjMzLjY5LjE0OS41MzEtLjE2MSAxLjA4NC0uNjkzIDEuMjMyeiIvPjxjaXJjbGUgZmlsbD0iIzVDOTEzQiIgY3g9IjIuNSIgY3k9IjI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjciIGN5PSIzMSIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjMwIiBjeT0iMjciIHI9IjIiLz48Y2lyY2xlIGZpbGw9IiM1QzkxM0IiIGN4PSIyNS41IiBjeT0iMzEuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjNUM5MTNCIiBjeD0iMTcuNSIgY3k9IjE5LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjciIGN5PSIyMyIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjI3LjUiIGN5PSIxNi41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiNGRkNDNEQiIGN4PSIxMi41IiBjeT0iMTQuNSIgcj0iMS41Ii8+PC9zdmc+" title="party_ball"/></font></p>
<p>But drawing circles was only part of the goal, so let's continue on and
add <code>draw</code> functionality to our rectangles as well!</p>
<p><a class="anchor" name="catsoop_section_4_3_2"></a><a class="anchor" name="_rectangle_draw"></a><h4 class="cs_section_title">4.3.2) <code>Rectangle.draw</code><a class="cs_permalink" href="#_rectangle_draw">§</a></h4></p>
<p>Now let's try to implement <code>Rectangle.draw</code>.  Try to implement it on your own
before looking at the implementation below:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>Taking a cue from our implementation in the <code>Circle</code> class, there's no
need to rewrite the check for a pixel being part of our rectangle or not;
we can just use <code>__contains__</code>!</p>
<pre><code class="language-py">class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height

    def __contains__(self, p):
        px, py = p
        llx, lly = self.lower_left
        return (
            llx &lt;= px &lt;= llx+self.width
            and lly &lt;= py &lt;= lly+self.height
        )

    def draw(self, image, color):
        for x in range(image['width']):
            for y in range(image['height']):
                if (x, y) in self:  # if self.__contains__((x, y)):
                    set_pixel(image, x, y, color)
</code></pre>
</div></div>
<p>Having implemented this, we can try out our code by trying to draw a rectangle as well:</p>
<pre><code class="language-py">out_image = new_image(500, 500)

shapes = [
    (Circle((100, 100), 30), COLORS['purple']),
    (Rectangle((200, 300), 70, 20), COLORS['blue']),
]

for shape, color in shapes:
    shape.draw(out_image, color)

save_color_image(out_image, "test.png")
</code></pre>
<p>Running this code results in the following image:</p>
<center>
<img class="envdia" src="https://py.mit.edu/_static/spring24/readings/inheritance/shapes2.png" width="250">
</img></center>
<p>Double hooray!
<font size="5"><img alt="celebration emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0ZDQUI0MCIgZD0iTTI3Ljk5OSAzNmMtLjQ0OCAwLS44NTUtLjMwMy0uOTY5LS43NTgtLjAzNi0uMTM2LS45MjYtMy40MzYtNC4yNzMtNC4yNzJDMTguMDU0IDI5Ljc5NCAxOCAyMy4yNzcgMTggMjNjMC0uNTUyLjQ0Ny0uOTk4Ljk5OC0uOTk5LjU1NC4wMzQgMSAuNDQ1IDEuMDAyLjk5NyAwIC4wNTMuMDU0IDUuMjM0IDMuMjQyIDYuMDMyIDQuNTMgMS4xMzIgNS42ODIgNS41NCA1LjcyNyA1LjcyOC4xMzUuNTM1LS4xOTEgMS4wNzgtLjcyNyAxLjIxMi0uMDgxLjAyLS4xNjMuMDMtLjI0My4wM3oiLz48cGF0aCBmaWxsPSIjQkIxQTM0IiBkPSJNMTggMjVjLTEuMSAwLTEuNTk4LS44MDUtMS4xMDUtMS43ODlsMS4yMTEtMi40MjJjLjQ5Mi0uOTg0IDEuMjk3LS45ODQgMS43ODkgMGwxLjIxMSAyLjQyMkMyMS41OTggMjQuMTk1IDIxLjEgMjUgMjAgMjVoLTJ6Ii8+PHBhdGggZmlsbD0iI0JCMUEzNCIgZD0iTTI4IDljMCA2LTcgMTItOSAxMnMtOS02LTktMTJjMC01Ljc5OSA0LjU4Mi05IDktOXM5IDMuMjAxIDkgOXoiLz48cGF0aCBmaWxsPSIjRkNBQjQwIiBkPSJNMjAgMjJoLTJjLS41NTIgMC0xLS40NDctMS0xcy40NDgtMSAxLTFoMmMuNTUzIDAgMSAuNDQ3IDEgMXMtLjQ0NyAxLTEgMXoiLz48L3N2Zz4=" title="celebration"/> <img alt="partying_face emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTciIGN5PSIxOSIgcj0iMTciLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMTcuOTk5IiBjeT0iMjYiIHJ4PSIyIiByeT0iMi41Ii8+PHBhdGggZmlsbD0iIzY2NDUwMCIgZD0iTTguMTExIDIxLjM4M2MtLjE4MiAwLS4zNjctLjA1LS41MzItLjE1NC0uNDY3LS4yOTQtLjYwNy0uOTExLS4zMTMtMS4zNzkuOTE2LTEuNDUzIDMuNzAxLTMuOTM4IDcuNjktMi45NjIuNTM2LjEzMS44NjQuNjczLjczMyAxLjIwOS0uMTMyLjUzNi0uNjc2Ljg2Mi0xLjIwOS43MzMtMy42MDQtLjg4Mi01LjUwMiAyLjA1Ni01LjUyMSAyLjA4Ni0uMTkxLjMwMi0uNTE2LjQ2Ny0uODQ4LjQ2N3ptMTEuOTczLTMuNzQyYy0uMjkgMC0uNTc2LS4xMjUtLjc3NC0uMzY2LS4zNS0uNDI3LS4yODgtMS4wNTguMTQtMS40MDggMy4xNzYtMi42MDQgNi43NjItMS41NjIgOC4yMTUtLjY0Ni40NjcuMjk0LjYwNy45MTIuMzEyIDEuMzc5LS4yOTMuNDY1LS45MDguNjA3LTEuMzc2LjMxNS0uMTM4LS4wODQtMy4wNTItMS44MjMtNS44ODQuNDk5LS4xODYuMTUzLS40MS4yMjctLjYzMy4yMjd6Ii8+PHBhdGggZmlsbD0iI0UyQTYyRCIgZD0iTTEzLjM0NiAzMS4yNzNjLS4wNjggMC0uMTM3LS4wMDktLjIwNS0uMDI4LS4zOTgtLjExMy0uNjMtLjUyNy0uNTE3LS45MjYuNDM3LTEuNTQuMjU4LTMuMDI5LS40OS00LjA4Ni0uNDk3LS43MDItMS4yMDUtMS4xMzEtMS45NDMtMS4xNzgtLjQxNC0uMDI1LS43MjgtLjM4Mi0uNzAyLS43OTVzLjM4MS0uNzUxLjc5NS0uNzAxYzEuMTkzLjA3NCAyLjMxMy43MzMgMy4wNzMgMS44MDcgMS4wMTEgMS40MjkgMS4yNyAzLjM4My43MDkgNS4zNjEtLjA5My4zMzEtLjM5NC41NDYtLjcyLjU0NnptMTEuMDM3LTMuMDYxYy0uMTQyIDAtLjI4NS0uMDQtLjQxMi0uMTI0LTEuMTY3LS43Ny0xLjgyLTIuMTE3LTEuNzkyLTMuNjk1LjAyOS0xLjYzNS44MDktMy4xNTMgMS45ODQtMy44NjkuMzUzLS4yMTYuODE0LS4xMDQgMS4wMy4yNTEuMjE2LjM1NC4xMDQuODE0LS4yNTEgMS4wMy0uNzM1LjQ0OC0xLjI0NCAxLjQ5OS0xLjI2NCAyLjYxNC0uMDIgMS4wNTUuMzg5IDEuOTM2IDEuMTE4IDIuNDE3LjM0Ni4yMjguNDQxLjY5My4yMTMgMS4wMzktLjE0NC4yMTktLjM4Mi4zMzctLjYyNi4zMzd6Ii8+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTE3LjE3OSAyLjcyYy0uMDQzLS4wNDktLjExLS4wNzYtLjE4OS0uMDkxIDAgMC0xNS45MjQtMy4wMjMtMTYuNjEzLTIuNDE1Qy0uMzExLjgyMy43NCAxNi45OTguNzQgMTYuOTk4Yy4wMDUuMDgxLjAyMy4xNS4wNjcuMTk5LjYwNC42ODQgNC43NTgtMi4wMDQgOS4yNzktNi4wMDEgNC41MjItMy45OTggNy42OTctNy43OTIgNy4wOTMtOC40NzZ6Ii8+PHBhdGggZmlsbD0iI0VBNTk2RSIgZD0iTS4zNDkuMjcxQy4zMzQuMzAxLjMyMS4zNDIuMzExLjM5NC40NyAxLjc2NSAyLjAwNiAxMy4wNDYgMi45NjMgMTYuNTcyYzEuNDM2LS44MDMgMi44OTUtMS44OTQgNC42MDktMy4yNTNDNi4xMTYgMTAuNjU0IDEuMTU4LjE0Ni4zNDkuMjcxeiIvPjxwYXRoIGZpbGw9IiMzQjg4QzMiIGQ9Ik0yOS45MDIgMjkuMjI5bC0xMC41NzMtMS4zMDNjLTEuMTMtLjEwMi0zLjExNy0uMTEyLTMuMDE1LTEuOTAyLjA5My0xLjYyMyAyLjA0LTEuMzczIDMuNDc5LTEuMTZsMTAuNjM4IDEuNzc0LS41MjkgMi41OTF6Ii8+PHBhdGggZmlsbD0iIzg4QzlGOSIgZD0iTTMwLjQzIDI2LjYzOWwtNC4yMjItLjcyNGMtLjQ5NC0uMDg5LS45MzQuNjQ3LS45NTYgMS40MjYtLjAyNS44NjYuMjI3IDEuMzA0LjcyNiAxLjQwNmw0LjE0NC41MTIuMzA4LTIuNjJ6Ii8+PHBhdGggZmlsbD0iIzNCODhDMyIgZD0iTTM0LjkxOCAyNi4zNDFsLTIuNjIyIDIuNDExLTQuNjg3LTUuMDk3IDIuNjIyLTIuNDExYzEuMzYxLTEuMjUyIDMuNDk5LTEuMTYyIDQuNzUxLjE5OWwuMTM1LjE0N2MxLjI1MSAxLjM2MiAxLjE2MiAzLjQ5OS0uMTk5IDQuNzUxeiIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKC00Mi41OTcgMjkuOTU0IDI2LjIwNSkiIGZpbGw9IiM4OEM5RjkiIGN4PSIyOS45NTIiIGN5PSIyNi4yMDMiIHJ4PSIyLjc3IiByeT0iMy40NjIiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InJvdGF0ZSgtNDIuNTk3IDI5Ljk1NCAyNi4yMDUpIiBmaWxsPSIjMjY5IiBjeD0iMjkuOTUyIiBjeT0iMjYuMjAzIiByeD0iMS4zODUiIHJ5PSIyLjA3NyIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjIuNSIgY3k9IjMzLjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjI5IiBjeT0iMiIgcj0iMiIvPjxwYXRoIGZpbGw9IiNFQTU5NkUiIGQ9Ik00Ljg2NCAyOS4yNDZMMi41MjYgMjMuNjMuNDEyIDI5LjY3NXpNMjYgNWwtNCAxIDEtNHoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMzEuOTk5IDEzTDM2IDcuOTk5IDMzIDZ6Ii8+PC9zdmc+" title="partying_face"/> <img alt="party_ball emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iIzI5MkYzMyIgZD0iTTI2IDljLTMuNTkxIDAtNi4yNy0xLjY0OC03Ljk4OS00LjkwNUMxNi4zODUgNy4zMTQgMTMuOTkzIDkgMTEgOWMtLjU1MiAwLTEtLjQ0OC0xLTFzLjQ0OC0xIDEtMWMyLjcyOSAwIDQuNzY1LTEuOTU3IDYuMDUxLTUuODE2QzE3LjE4OC43NzUgMTcuNTY5LjUgMTggLjVzLjgxMi4yNzUuOTQ5LjY4NEMyMC4yNzEgNS4xNTEgMjIuNTEyIDcgMjYgN2MuNTUzIDAgMSAuNDQ4IDEgMXMtLjQ0NyAxLTEgMXoiLz48cGF0aCBmaWxsPSIjRkZBQzMzIiBkPSJNMTQuNzExIDkuNjU0YzMuMzY0IDMuMzY2LjQ5OCA1Ljk1NC0yLjg2OCA5LjMxOS0zLjM2NSAzLjM2NS01Ljk1NCA2LjIzMi05LjMxOSAyLjg2OC0zLjM2Ni0zLjM2Ni0zLjM2Ni04LjgyMiAwLTEyLjE4NyAzLjM2Ni0zLjM2NiA4LjgyMS0zLjM2NiAxMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMTUuNTQyIDEwLjk3MmMxLjU4NCAxLjU4NS4yNDggNS40ODYtMi45ODMgOC43MTctMy4yMzEgMy4yMzEtNy4xMzIgNC41NjgtOC43MTcgMi45ODItMS41ODQtMS41ODQtLjI0OC01LjQ4NiAyLjk4Mi04LjcxNyAzLjIzMi0zLjIzIDcuMTM0LTQuNTY2IDguNzE4LTIuOTgyeiIvPjxwYXRoIGZpbGw9IiNGRkFDMzMiIGQ9Ik0yMS4yODkgOS42NTRjLTMuMzYzIDMuMzY2LS40OTggNS45NTQgMi44NjggOS4zMTkgMy4zNjUgMy4zNjUgNS45NTQgNi4yMzIgOS4zMTkgMi44NjggMy4zNjUtMy4zNjYgMy4zNjUtOC44MjIgMC0xMi4xODctMy4zNjUtMy4zNjYtOC44Mi0zLjM2Ni0xMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMjAuNDU5IDEwLjk3MmMtMS41ODUgMS41ODUtLjI0OSA1LjQ4NiAyLjk4MiA4LjcxNyAzLjIzIDMuMjMxIDcuMTMzIDQuNTY4IDguNzE3IDIuOTgyIDEuNTg0LTEuNTg0LjI0OC01LjQ4Ni0yLjk4My04LjcxNy0zLjIzLTMuMjMtNy4xMzMtNC41NjYtOC43MTYtMi45ODJ6Ii8+PHBhdGggZmlsbD0iI0FBOEREOCIgZD0iTTIyLjQxIDE4LjIyMWMuMTk5LS4xNi40NTktLjI0NC43MzQtLjIxNS44NjcuMDk0IDEuNTk4LjM5NiAyLjEwOS44NzMuNTQxLjUwNS44MDcgMS4xODMuNzM0IDEuODYyLS4xMjkgMS4xOTEtMS4zMjQgMi4yODUtMy4zNjMgMi4wNjUtLjc5My0uMDg1LTEuMTQ2LjE3LTEuMTU4LjI5MS0uMDE0LjEyMS4yNzcuNDQ2IDEuMDcuNTMyLjg2Ny4wOTQgMS41OTguMzk2IDIuMTA5Ljg3My41NDEuNTA1LjgwOSAxLjE4My43MzQgMS44NjItLjEyOSAxLjE5Mi0xLjMyNCAyLjI4NS0zLjM2MSAyLjA2Ni0uNTc4LS4wNjItLjg4My4wNTctMS4wMTIuMTM0LS4xMDMuMDYzLS4xNDQuMTI0LS4xNDguMTU4LS4wMTIuMTIuMjc1LjQ0NSAxLjA3LjUzMS41NDkuMDYuOTQ3LjU1My44ODcgMS4xMDItLjA1OS41NDktLjU1MS45NDYtMS4xMDIuODg3LTIuMDM3LS4yMTktMi45NzMtMS41NDItMi44NDQtMi43MzUuMTI5LTEuMTkyIDEuMzI0LTIuMjg1IDMuMzYzLTIuMDY1LjU3OC4wNjMuODgxLS4wNTcgMS4wMS0uMTM0LjEwNC0uMDYyLjE0NS0uMTIzLjE0OC0uMTU3LjAxNC0uMTIxLS4yNzUtLjQ0Ni0xLjA3LS41MzItMi4wMzctLjIyLTIuOTczLTEuNTQyLTIuODQ0LTIuNzM1LjEyOS0xLjE5MiAxLjMyNC0yLjI4NiAzLjM2MS0yLjA2NC41NzguMDYyLjg4My0uMDU4IDEuMDEyLS4xMzUuMTAzLS4wNjIuMTQ0LS4xMjMuMTQ4LS4xNTcuMDEyLS4xMjEtLjI3Ny0uNDQ2LTEuMDctLjUzMi0uNTQ5LS4wNTktLjk0Ny0uNTUzLS44ODctMS4xMDIuMDMyLS4yNzYuMTcxLS41MTIuMzctLjY3M3oiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMTUuMjY2IDM1LjgyOGMtMS45NzMuNTU3LTMuMzM0LS4zMjItMy42NTgtMS40NzctLjMyNC0xLjE1NC4zNzgtMi42MTUgMi4zNS0zLjE3Ljc3LS4yMTYgMS4wMDEtLjU4NC45Ny0uNzAxLS4wMzQtLjExOS0uNDI1LS4zMTItMS4xOTMtLjA5Ni0xLjk3Mi41NTYtMy4zMzMtLjMyNC0zLjY1Ny0xLjQ3OS0uMzI2LTEuMTU1LjM3OC0yLjYxNCAyLjM1MS0zLjE2OS43NjktLjIxNyAxLjAwMS0uNTg2Ljk2Ny0uNzAzLS4wMzMtLjExNi0uNDIzLS4zMTEtMS4xOTItLjA5NS0uNTMuMTQ5LTEuMDg0LS4xNTktMS4yMzMtLjY5LS4xNDgtLjUzMy4xNjEtMS4wODQuNjkzLTEuMjM0IDEuOTcxLS41NTUgMy4zMzMuMzIyIDMuNjU5IDEuNDc5LjMyNCAxLjE1NC0uMzc5IDIuNjEzLTIuMzUyIDMuMTctLjc3LjIxNi0xLjAwMS41ODQtLjk2Ny43MDEuMDMyLjExNy40MjIuMzEyIDEuMTkuMDk2IDEuOTc0LS41NTYgMy4zMzQuMzIyIDMuNjU5IDEuNDc5LjMyNSAxLjE1My0uMzc4IDIuNjEyLTIuMzUyIDMuMTY5LS43NjguMjE1LS45OTkuNTg2LS45NjcuNzAxLjAzNC4xMTguNDIzLjMxMiAxLjE5Mi4wOTcuNTMyLS4xNTEgMS4wODMuMTU5IDEuMjMzLjY5LjE0OS41MzEtLjE2MSAxLjA4NC0uNjkzIDEuMjMyeiIvPjxjaXJjbGUgZmlsbD0iIzVDOTEzQiIgY3g9IjIuNSIgY3k9IjI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjciIGN5PSIzMSIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjMwIiBjeT0iMjciIHI9IjIiLz48Y2lyY2xlIGZpbGw9IiM1QzkxM0IiIGN4PSIyNS41IiBjeT0iMzEuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjNUM5MTNCIiBjeD0iMTcuNSIgY3k9IjE5LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjciIGN5PSIyMyIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjI3LjUiIGN5PSIxNi41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiNGRkNDNEQiIGN4PSIxMi41IiBjeT0iMTQuNSIgcj0iMS41Ii8+PC9zdmc+" title="party_ball"/></font>
<font size="5"><img alt="celebration emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0ZDQUI0MCIgZD0iTTI3Ljk5OSAzNmMtLjQ0OCAwLS44NTUtLjMwMy0uOTY5LS43NTgtLjAzNi0uMTM2LS45MjYtMy40MzYtNC4yNzMtNC4yNzJDMTguMDU0IDI5Ljc5NCAxOCAyMy4yNzcgMTggMjNjMC0uNTUyLjQ0Ny0uOTk4Ljk5OC0uOTk5LjU1NC4wMzQgMSAuNDQ1IDEuMDAyLjk5NyAwIC4wNTMuMDU0IDUuMjM0IDMuMjQyIDYuMDMyIDQuNTMgMS4xMzIgNS42ODIgNS41NCA1LjcyNyA1LjcyOC4xMzUuNTM1LS4xOTEgMS4wNzgtLjcyNyAxLjIxMi0uMDgxLjAyLS4xNjMuMDMtLjI0My4wM3oiLz48cGF0aCBmaWxsPSIjQkIxQTM0IiBkPSJNMTggMjVjLTEuMSAwLTEuNTk4LS44MDUtMS4xMDUtMS43ODlsMS4yMTEtMi40MjJjLjQ5Mi0uOTg0IDEuMjk3LS45ODQgMS43ODkgMGwxLjIxMSAyLjQyMkMyMS41OTggMjQuMTk1IDIxLjEgMjUgMjAgMjVoLTJ6Ii8+PHBhdGggZmlsbD0iI0JCMUEzNCIgZD0iTTI4IDljMCA2LTcgMTItOSAxMnMtOS02LTktMTJjMC01Ljc5OSA0LjU4Mi05IDktOXM5IDMuMjAxIDkgOXoiLz48cGF0aCBmaWxsPSIjRkNBQjQwIiBkPSJNMjAgMjJoLTJjLS41NTIgMC0xLS40NDctMS0xcy40NDgtMSAxLTFoMmMuNTUzIDAgMSAuNDQ3IDEgMXMtLjQ0NyAxLTEgMXoiLz48L3N2Zz4=" title="celebration"/> <img alt="partying_face emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTciIGN5PSIxOSIgcj0iMTciLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMTcuOTk5IiBjeT0iMjYiIHJ4PSIyIiByeT0iMi41Ii8+PHBhdGggZmlsbD0iIzY2NDUwMCIgZD0iTTguMTExIDIxLjM4M2MtLjE4MiAwLS4zNjctLjA1LS41MzItLjE1NC0uNDY3LS4yOTQtLjYwNy0uOTExLS4zMTMtMS4zNzkuOTE2LTEuNDUzIDMuNzAxLTMuOTM4IDcuNjktMi45NjIuNTM2LjEzMS44NjQuNjczLjczMyAxLjIwOS0uMTMyLjUzNi0uNjc2Ljg2Mi0xLjIwOS43MzMtMy42MDQtLjg4Mi01LjUwMiAyLjA1Ni01LjUyMSAyLjA4Ni0uMTkxLjMwMi0uNTE2LjQ2Ny0uODQ4LjQ2N3ptMTEuOTczLTMuNzQyYy0uMjkgMC0uNTc2LS4xMjUtLjc3NC0uMzY2LS4zNS0uNDI3LS4yODgtMS4wNTguMTQtMS40MDggMy4xNzYtMi42MDQgNi43NjItMS41NjIgOC4yMTUtLjY0Ni40NjcuMjk0LjYwNy45MTIuMzEyIDEuMzc5LS4yOTMuNDY1LS45MDguNjA3LTEuMzc2LjMxNS0uMTM4LS4wODQtMy4wNTItMS44MjMtNS44ODQuNDk5LS4xODYuMTUzLS40MS4yMjctLjYzMy4yMjd6Ii8+PHBhdGggZmlsbD0iI0UyQTYyRCIgZD0iTTEzLjM0NiAzMS4yNzNjLS4wNjggMC0uMTM3LS4wMDktLjIwNS0uMDI4LS4zOTgtLjExMy0uNjMtLjUyNy0uNTE3LS45MjYuNDM3LTEuNTQuMjU4LTMuMDI5LS40OS00LjA4Ni0uNDk3LS43MDItMS4yMDUtMS4xMzEtMS45NDMtMS4xNzgtLjQxNC0uMDI1LS43MjgtLjM4Mi0uNzAyLS43OTVzLjM4MS0uNzUxLjc5NS0uNzAxYzEuMTkzLjA3NCAyLjMxMy43MzMgMy4wNzMgMS44MDcgMS4wMTEgMS40MjkgMS4yNyAzLjM4My43MDkgNS4zNjEtLjA5My4zMzEtLjM5NC41NDYtLjcyLjU0NnptMTEuMDM3LTMuMDYxYy0uMTQyIDAtLjI4NS0uMDQtLjQxMi0uMTI0LTEuMTY3LS43Ny0xLjgyLTIuMTE3LTEuNzkyLTMuNjk1LjAyOS0xLjYzNS44MDktMy4xNTMgMS45ODQtMy44NjkuMzUzLS4yMTYuODE0LS4xMDQgMS4wMy4yNTEuMjE2LjM1NC4xMDQuODE0LS4yNTEgMS4wMy0uNzM1LjQ0OC0xLjI0NCAxLjQ5OS0xLjI2NCAyLjYxNC0uMDIgMS4wNTUuMzg5IDEuOTM2IDEuMTE4IDIuNDE3LjM0Ni4yMjguNDQxLjY5My4yMTMgMS4wMzktLjE0NC4yMTktLjM4Mi4zMzctLjYyNi4zMzd6Ii8+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTE3LjE3OSAyLjcyYy0uMDQzLS4wNDktLjExLS4wNzYtLjE4OS0uMDkxIDAgMC0xNS45MjQtMy4wMjMtMTYuNjEzLTIuNDE1Qy0uMzExLjgyMy43NCAxNi45OTguNzQgMTYuOTk4Yy4wMDUuMDgxLjAyMy4xNS4wNjcuMTk5LjYwNC42ODQgNC43NTgtMi4wMDQgOS4yNzktNi4wMDEgNC41MjItMy45OTggNy42OTctNy43OTIgNy4wOTMtOC40NzZ6Ii8+PHBhdGggZmlsbD0iI0VBNTk2RSIgZD0iTS4zNDkuMjcxQy4zMzQuMzAxLjMyMS4zNDIuMzExLjM5NC40NyAxLjc2NSAyLjAwNiAxMy4wNDYgMi45NjMgMTYuNTcyYzEuNDM2LS44MDMgMi44OTUtMS44OTQgNC42MDktMy4yNTNDNi4xMTYgMTAuNjU0IDEuMTU4LjE0Ni4zNDkuMjcxeiIvPjxwYXRoIGZpbGw9IiMzQjg4QzMiIGQ9Ik0yOS45MDIgMjkuMjI5bC0xMC41NzMtMS4zMDNjLTEuMTMtLjEwMi0zLjExNy0uMTEyLTMuMDE1LTEuOTAyLjA5My0xLjYyMyAyLjA0LTEuMzczIDMuNDc5LTEuMTZsMTAuNjM4IDEuNzc0LS41MjkgMi41OTF6Ii8+PHBhdGggZmlsbD0iIzg4QzlGOSIgZD0iTTMwLjQzIDI2LjYzOWwtNC4yMjItLjcyNGMtLjQ5NC0uMDg5LS45MzQuNjQ3LS45NTYgMS40MjYtLjAyNS44NjYuMjI3IDEuMzA0LjcyNiAxLjQwNmw0LjE0NC41MTIuMzA4LTIuNjJ6Ii8+PHBhdGggZmlsbD0iIzNCODhDMyIgZD0iTTM0LjkxOCAyNi4zNDFsLTIuNjIyIDIuNDExLTQuNjg3LTUuMDk3IDIuNjIyLTIuNDExYzEuMzYxLTEuMjUyIDMuNDk5LTEuMTYyIDQuNzUxLjE5OWwuMTM1LjE0N2MxLjI1MSAxLjM2MiAxLjE2MiAzLjQ5OS0uMTk5IDQuNzUxeiIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKC00Mi41OTcgMjkuOTU0IDI2LjIwNSkiIGZpbGw9IiM4OEM5RjkiIGN4PSIyOS45NTIiIGN5PSIyNi4yMDMiIHJ4PSIyLjc3IiByeT0iMy40NjIiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InJvdGF0ZSgtNDIuNTk3IDI5Ljk1NCAyNi4yMDUpIiBmaWxsPSIjMjY5IiBjeD0iMjkuOTUyIiBjeT0iMjYuMjAzIiByeD0iMS4zODUiIHJ5PSIyLjA3NyIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjIuNSIgY3k9IjMzLjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjI5IiBjeT0iMiIgcj0iMiIvPjxwYXRoIGZpbGw9IiNFQTU5NkUiIGQ9Ik00Ljg2NCAyOS4yNDZMMi41MjYgMjMuNjMuNDEyIDI5LjY3NXpNMjYgNWwtNCAxIDEtNHoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMzEuOTk5IDEzTDM2IDcuOTk5IDMzIDZ6Ii8+PC9zdmc+" title="partying_face"/> <img alt="party_ball emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iIzI5MkYzMyIgZD0iTTI2IDljLTMuNTkxIDAtNi4yNy0xLjY0OC03Ljk4OS00LjkwNUMxNi4zODUgNy4zMTQgMTMuOTkzIDkgMTEgOWMtLjU1MiAwLTEtLjQ0OC0xLTFzLjQ0OC0xIDEtMWMyLjcyOSAwIDQuNzY1LTEuOTU3IDYuMDUxLTUuODE2QzE3LjE4OC43NzUgMTcuNTY5LjUgMTggLjVzLjgxMi4yNzUuOTQ5LjY4NEMyMC4yNzEgNS4xNTEgMjIuNTEyIDcgMjYgN2MuNTUzIDAgMSAuNDQ4IDEgMXMtLjQ0NyAxLTEgMXoiLz48cGF0aCBmaWxsPSIjRkZBQzMzIiBkPSJNMTQuNzExIDkuNjU0YzMuMzY0IDMuMzY2LjQ5OCA1Ljk1NC0yLjg2OCA5LjMxOS0zLjM2NSAzLjM2NS01Ljk1NCA2LjIzMi05LjMxOSAyLjg2OC0zLjM2Ni0zLjM2Ni0zLjM2Ni04LjgyMiAwLTEyLjE4NyAzLjM2Ni0zLjM2NiA4LjgyMS0zLjM2NiAxMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMTUuNTQyIDEwLjk3MmMxLjU4NCAxLjU4NS4yNDggNS40ODYtMi45ODMgOC43MTctMy4yMzEgMy4yMzEtNy4xMzIgNC41NjgtOC43MTcgMi45ODItMS41ODQtMS41ODQtLjI0OC01LjQ4NiAyLjk4Mi04LjcxNyAzLjIzMi0zLjIzIDcuMTM0LTQuNTY2IDguNzE4LTIuOTgyeiIvPjxwYXRoIGZpbGw9IiNGRkFDMzMiIGQ9Ik0yMS4yODkgOS42NTRjLTMuMzYzIDMuMzY2LS40OTggNS45NTQgMi44NjggOS4zMTkgMy4zNjUgMy4zNjUgNS45NTQgNi4yMzIgOS4zMTkgMi44NjggMy4zNjUtMy4zNjYgMy4zNjUtOC44MjIgMC0xMi4xODctMy4zNjUtMy4zNjYtOC44Mi0zLjM2Ni0xMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMjAuNDU5IDEwLjk3MmMtMS41ODUgMS41ODUtLjI0OSA1LjQ4NiAyLjk4MiA4LjcxNyAzLjIzIDMuMjMxIDcuMTMzIDQuNTY4IDguNzE3IDIuOTgyIDEuNTg0LTEuNTg0LjI0OC01LjQ4Ni0yLjk4My04LjcxNy0zLjIzLTMuMjMtNy4xMzMtNC41NjYtOC43MTYtMi45ODJ6Ii8+PHBhdGggZmlsbD0iI0FBOEREOCIgZD0iTTIyLjQxIDE4LjIyMWMuMTk5LS4xNi40NTktLjI0NC43MzQtLjIxNS44NjcuMDk0IDEuNTk4LjM5NiAyLjEwOS44NzMuNTQxLjUwNS44MDcgMS4xODMuNzM0IDEuODYyLS4xMjkgMS4xOTEtMS4zMjQgMi4yODUtMy4zNjMgMi4wNjUtLjc5My0uMDg1LTEuMTQ2LjE3LTEuMTU4LjI5MS0uMDE0LjEyMS4yNzcuNDQ2IDEuMDcuNTMyLjg2Ny4wOTQgMS41OTguMzk2IDIuMTA5Ljg3My41NDEuNTA1LjgwOSAxLjE4My43MzQgMS44NjItLjEyOSAxLjE5Mi0xLjMyNCAyLjI4NS0zLjM2MSAyLjA2Ni0uNTc4LS4wNjItLjg4My4wNTctMS4wMTIuMTM0LS4xMDMuMDYzLS4xNDQuMTI0LS4xNDguMTU4LS4wMTIuMTIuMjc1LjQ0NSAxLjA3LjUzMS41NDkuMDYuOTQ3LjU1My44ODcgMS4xMDItLjA1OS41NDktLjU1MS45NDYtMS4xMDIuODg3LTIuMDM3LS4yMTktMi45NzMtMS41NDItMi44NDQtMi43MzUuMTI5LTEuMTkyIDEuMzI0LTIuMjg1IDMuMzYzLTIuMDY1LjU3OC4wNjMuODgxLS4wNTcgMS4wMS0uMTM0LjEwNC0uMDYyLjE0NS0uMTIzLjE0OC0uMTU3LjAxNC0uMTIxLS4yNzUtLjQ0Ni0xLjA3LS41MzItMi4wMzctLjIyLTIuOTczLTEuNTQyLTIuODQ0LTIuNzM1LjEyOS0xLjE5MiAxLjMyNC0yLjI4NiAzLjM2MS0yLjA2NC41NzguMDYyLjg4My0uMDU4IDEuMDEyLS4xMzUuMTAzLS4wNjIuMTQ0LS4xMjMuMTQ4LS4xNTcuMDEyLS4xMjEtLjI3Ny0uNDQ2LTEuMDctLjUzMi0uNTQ5LS4wNTktLjk0Ny0uNTUzLS44ODctMS4xMDIuMDMyLS4yNzYuMTcxLS41MTIuMzctLjY3M3oiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMTUuMjY2IDM1LjgyOGMtMS45NzMuNTU3LTMuMzM0LS4zMjItMy42NTgtMS40NzctLjMyNC0xLjE1NC4zNzgtMi42MTUgMi4zNS0zLjE3Ljc3LS4yMTYgMS4wMDEtLjU4NC45Ny0uNzAxLS4wMzQtLjExOS0uNDI1LS4zMTItMS4xOTMtLjA5Ni0xLjk3Mi41NTYtMy4zMzMtLjMyNC0zLjY1Ny0xLjQ3OS0uMzI2LTEuMTU1LjM3OC0yLjYxNCAyLjM1MS0zLjE2OS43NjktLjIxNyAxLjAwMS0uNTg2Ljk2Ny0uNzAzLS4wMzMtLjExNi0uNDIzLS4zMTEtMS4xOTItLjA5NS0uNTMuMTQ5LTEuMDg0LS4xNTktMS4yMzMtLjY5LS4xNDgtLjUzMy4xNjEtMS4wODQuNjkzLTEuMjM0IDEuOTcxLS41NTUgMy4zMzMuMzIyIDMuNjU5IDEuNDc5LjMyNCAxLjE1NC0uMzc5IDIuNjEzLTIuMzUyIDMuMTctLjc3LjIxNi0xLjAwMS41ODQtLjk2Ny43MDEuMDMyLjExNy40MjIuMzEyIDEuMTkuMDk2IDEuOTc0LS41NTYgMy4zMzQuMzIyIDMuNjU5IDEuNDc5LjMyNSAxLjE1My0uMzc4IDIuNjEyLTIuMzUyIDMuMTY5LS43NjguMjE1LS45OTkuNTg2LS45NjcuNzAxLjAzNC4xMTguNDIzLjMxMiAxLjE5Mi4wOTcuNTMyLS4xNTEgMS4wODMuMTU5IDEuMjMzLjY5LjE0OS41MzEtLjE2MSAxLjA4NC0uNjkzIDEuMjMyeiIvPjxjaXJjbGUgZmlsbD0iIzVDOTEzQiIgY3g9IjIuNSIgY3k9IjI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjciIGN5PSIzMSIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjMwIiBjeT0iMjciIHI9IjIiLz48Y2lyY2xlIGZpbGw9IiM1QzkxM0IiIGN4PSIyNS41IiBjeT0iMzEuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjNUM5MTNCIiBjeD0iMTcuNSIgY3k9IjE5LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjciIGN5PSIyMyIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjI3LjUiIGN5PSIxNi41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiNGRkNDNEQiIGN4PSIxMi41IiBjeT0iMTQuNSIgcj0iMS41Ii8+PC9zdmc+" title="party_ball"/></font></p>
<p><a class="anchor" name="catsoop_section_4_3_3"></a><a class="anchor" name="_refactoring"></a><h4 class="cs_section_title">4.3.3) Refactoring<a class="cs_permalink" href="#_refactoring">§</a></h4></p>
<p>Unfortunately, however, if we take a second look at the code that we've just
written, our mood may start to dampen somewhat.  The code is working, it's true
(and that's great!), but the way that we've just implemented <code>Rectangle.draw</code>
(and the resulting code) is the kind of thing that may make us feel uneasy at
this point in the term.  To drive the point home, let's look at the two
functions next to each other:</p>
<pre><code class="language-py">class Circle:
    # ...
    def draw(self, image, color):
        for x in range(image['width']):
            for y in range(image['height']):
                if (x, y) in self:  # if self.__contains__((x, y)):
                    set_pixel(image, x, y, color)

class Rectangle:
    # ...
    def draw(self, image, color):
        for x in range(image['width']):
            for y in range(image['height']):
                if (x, y) in self:  # if self.__contains__((x, y)):
                    set_pixel(image, x, y, color)
</code></pre>
<p>These functions are <em>identical</em>!  In general, duplicating complex code like
this is just inviting bugs into your code; it's giving them lots of place to
hide and making them harder to find and squash when something goes wrong.</p>
<p>But even more than that, <code>draw</code> as implemented now is completely general.  It
will work not just for squares or for rectangles but for <em>any</em> shape that
knows how to do a containment check (via a <code>__contains__</code> method).</p>
<p>What we're going to do to remedy this is to move this method (which is
completely general) out of the subclasses (which are intended to contain only
those things that are specific to a given type of shape) and lift it into the
<code>Shape</code> class instead:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><pre><code class="language-py">class Shape:
    def __contains__(self, p):
        raise NotImplementedError("Subclass of Shape didn't define __contains__")

    def draw(self, image, color):
        for x in range(image['width']):
            for y in range(image['height']):
                if (x, y) in self:  # if self.__contains__((x, y)):
                    set_pixel(image, x, y, color)

class Circle(Shape):
    def __init__(self, center, radius):
        self.center = center
        self.radius = radius

    def __contains__(self, p):
        assert isinstance(p, tuple) and len(p) == 2
        return sum((i-j)**2 for i, j in zip(self.center, p)) &lt;= self.radius**2


class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height

    def __contains__(self, p):
        px, py = p
        llx, lly = self.lower_left
        return (
            llx &lt;= px &lt;= llx+self.width
            and lly &lt;= py &lt;= lly+self.height
        )

</code></pre></div></div>
<p>Once we've done this, any time we look for a <code>draw</code> method inside of any
subclass of <code>Shape</code>, we won't find draw there, but we will chain up to look in
<code>Shape</code>, where we will find this one method.</p>
<p>Something may seem a little bit weird about this, which is that we've defined
<code>draw</code> inside of the <code>Shape</code> class, but <em>inside</em> of <code>draw</code>, it's calling out to
a <code>__contains__</code> method.  So will we get the <code>NotImplementedError</code> we raised
from <code>Shape.__contains__</code> earlier?</p>
<p>It turns out that this will work just fine!  In general, the way we're going
to get to the point of calling <code>draw</code> is by way of an instance of <code>Circle</code>
or <code>Square</code> or some other shape.  So inside of <code>draw</code>, the name <code>self</code> is going
to refer to an instance of one of those subclasses.  Thus, when I look up
<code>self.__contains__</code>, Python will find <em>the right <code>__contains__</code> method</em> for
whatever kind of shape we were calling <code>draw</code> from.  This may feel a little
bit strange at first, but this idea (moving common pieces of code into a method
in the superclass that then calls out to specific methods defined in
subclasses) is a very common and very powerful way of organizing things to
avoid duplicate code.</p>
<p>Now that we've made that change, it's a good idea to test things again to make
sure that, after our refactoring, we're still getting the image we expect to
get.  And, indeed, we do:</p>
<center>
<img class="envdia" src="https://py.mit.edu/_static/spring24/readings/inheritance/shapes2.png" width="250"/>
</center>
<p>So, double hooray for real this time, because not only do we have working code,
but there's something quite nice about this code from a
stylistic/organizational perspective as well.
<font size="5"><img alt="celebration emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0ZDQUI0MCIgZD0iTTI3Ljk5OSAzNmMtLjQ0OCAwLS44NTUtLjMwMy0uOTY5LS43NTgtLjAzNi0uMTM2LS45MjYtMy40MzYtNC4yNzMtNC4yNzJDMTguMDU0IDI5Ljc5NCAxOCAyMy4yNzcgMTggMjNjMC0uNTUyLjQ0Ny0uOTk4Ljk5OC0uOTk5LjU1NC4wMzQgMSAuNDQ1IDEuMDAyLjk5NyAwIC4wNTMuMDU0IDUuMjM0IDMuMjQyIDYuMDMyIDQuNTMgMS4xMzIgNS42ODIgNS41NCA1LjcyNyA1LjcyOC4xMzUuNTM1LS4xOTEgMS4wNzgtLjcyNyAxLjIxMi0uMDgxLjAyLS4xNjMuMDMtLjI0My4wM3oiLz48cGF0aCBmaWxsPSIjQkIxQTM0IiBkPSJNMTggMjVjLTEuMSAwLTEuNTk4LS44MDUtMS4xMDUtMS43ODlsMS4yMTEtMi40MjJjLjQ5Mi0uOTg0IDEuMjk3LS45ODQgMS43ODkgMGwxLjIxMSAyLjQyMkMyMS41OTggMjQuMTk1IDIxLjEgMjUgMjAgMjVoLTJ6Ii8+PHBhdGggZmlsbD0iI0JCMUEzNCIgZD0iTTI4IDljMCA2LTcgMTItOSAxMnMtOS02LTktMTJjMC01Ljc5OSA0LjU4Mi05IDktOXM5IDMuMjAxIDkgOXoiLz48cGF0aCBmaWxsPSIjRkNBQjQwIiBkPSJNMjAgMjJoLTJjLS41NTIgMC0xLS40NDctMS0xcy40NDgtMSAxLTFoMmMuNTUzIDAgMSAuNDQ3IDEgMXMtLjQ0NyAxLTEgMXoiLz48L3N2Zz4=" title="celebration"/> <img alt="partying_face emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTciIGN5PSIxOSIgcj0iMTciLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMTcuOTk5IiBjeT0iMjYiIHJ4PSIyIiByeT0iMi41Ii8+PHBhdGggZmlsbD0iIzY2NDUwMCIgZD0iTTguMTExIDIxLjM4M2MtLjE4MiAwLS4zNjctLjA1LS41MzItLjE1NC0uNDY3LS4yOTQtLjYwNy0uOTExLS4zMTMtMS4zNzkuOTE2LTEuNDUzIDMuNzAxLTMuOTM4IDcuNjktMi45NjIuNTM2LjEzMS44NjQuNjczLjczMyAxLjIwOS0uMTMyLjUzNi0uNjc2Ljg2Mi0xLjIwOS43MzMtMy42MDQtLjg4Mi01LjUwMiAyLjA1Ni01LjUyMSAyLjA4Ni0uMTkxLjMwMi0uNTE2LjQ2Ny0uODQ4LjQ2N3ptMTEuOTczLTMuNzQyYy0uMjkgMC0uNTc2LS4xMjUtLjc3NC0uMzY2LS4zNS0uNDI3LS4yODgtMS4wNTguMTQtMS40MDggMy4xNzYtMi42MDQgNi43NjItMS41NjIgOC4yMTUtLjY0Ni40NjcuMjk0LjYwNy45MTIuMzEyIDEuMzc5LS4yOTMuNDY1LS45MDguNjA3LTEuMzc2LjMxNS0uMTM4LS4wODQtMy4wNTItMS44MjMtNS44ODQuNDk5LS4xODYuMTUzLS40MS4yMjctLjYzMy4yMjd6Ii8+PHBhdGggZmlsbD0iI0UyQTYyRCIgZD0iTTEzLjM0NiAzMS4yNzNjLS4wNjggMC0uMTM3LS4wMDktLjIwNS0uMDI4LS4zOTgtLjExMy0uNjMtLjUyNy0uNTE3LS45MjYuNDM3LTEuNTQuMjU4LTMuMDI5LS40OS00LjA4Ni0uNDk3LS43MDItMS4yMDUtMS4xMzEtMS45NDMtMS4xNzgtLjQxNC0uMDI1LS43MjgtLjM4Mi0uNzAyLS43OTVzLjM4MS0uNzUxLjc5NS0uNzAxYzEuMTkzLjA3NCAyLjMxMy43MzMgMy4wNzMgMS44MDcgMS4wMTEgMS40MjkgMS4yNyAzLjM4My43MDkgNS4zNjEtLjA5My4zMzEtLjM5NC41NDYtLjcyLjU0NnptMTEuMDM3LTMuMDYxYy0uMTQyIDAtLjI4NS0uMDQtLjQxMi0uMTI0LTEuMTY3LS43Ny0xLjgyLTIuMTE3LTEuNzkyLTMuNjk1LjAyOS0xLjYzNS44MDktMy4xNTMgMS45ODQtMy44NjkuMzUzLS4yMTYuODE0LS4xMDQgMS4wMy4yNTEuMjE2LjM1NC4xMDQuODE0LS4yNTEgMS4wMy0uNzM1LjQ0OC0xLjI0NCAxLjQ5OS0xLjI2NCAyLjYxNC0uMDIgMS4wNTUuMzg5IDEuOTM2IDEuMTE4IDIuNDE3LjM0Ni4yMjguNDQxLjY5My4yMTMgMS4wMzktLjE0NC4yMTktLjM4Mi4zMzctLjYyNi4zMzd6Ii8+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTE3LjE3OSAyLjcyYy0uMDQzLS4wNDktLjExLS4wNzYtLjE4OS0uMDkxIDAgMC0xNS45MjQtMy4wMjMtMTYuNjEzLTIuNDE1Qy0uMzExLjgyMy43NCAxNi45OTguNzQgMTYuOTk4Yy4wMDUuMDgxLjAyMy4xNS4wNjcuMTk5LjYwNC42ODQgNC43NTgtMi4wMDQgOS4yNzktNi4wMDEgNC41MjItMy45OTggNy42OTctNy43OTIgNy4wOTMtOC40NzZ6Ii8+PHBhdGggZmlsbD0iI0VBNTk2RSIgZD0iTS4zNDkuMjcxQy4zMzQuMzAxLjMyMS4zNDIuMzExLjM5NC40NyAxLjc2NSAyLjAwNiAxMy4wNDYgMi45NjMgMTYuNTcyYzEuNDM2LS44MDMgMi44OTUtMS44OTQgNC42MDktMy4yNTNDNi4xMTYgMTAuNjU0IDEuMTU4LjE0Ni4zNDkuMjcxeiIvPjxwYXRoIGZpbGw9IiMzQjg4QzMiIGQ9Ik0yOS45MDIgMjkuMjI5bC0xMC41NzMtMS4zMDNjLTEuMTMtLjEwMi0zLjExNy0uMTEyLTMuMDE1LTEuOTAyLjA5My0xLjYyMyAyLjA0LTEuMzczIDMuNDc5LTEuMTZsMTAuNjM4IDEuNzc0LS41MjkgMi41OTF6Ii8+PHBhdGggZmlsbD0iIzg4QzlGOSIgZD0iTTMwLjQzIDI2LjYzOWwtNC4yMjItLjcyNGMtLjQ5NC0uMDg5LS45MzQuNjQ3LS45NTYgMS40MjYtLjAyNS44NjYuMjI3IDEuMzA0LjcyNiAxLjQwNmw0LjE0NC41MTIuMzA4LTIuNjJ6Ii8+PHBhdGggZmlsbD0iIzNCODhDMyIgZD0iTTM0LjkxOCAyNi4zNDFsLTIuNjIyIDIuNDExLTQuNjg3LTUuMDk3IDIuNjIyLTIuNDExYzEuMzYxLTEuMjUyIDMuNDk5LTEuMTYyIDQuNzUxLjE5OWwuMTM1LjE0N2MxLjI1MSAxLjM2MiAxLjE2MiAzLjQ5OS0uMTk5IDQuNzUxeiIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKC00Mi41OTcgMjkuOTU0IDI2LjIwNSkiIGZpbGw9IiM4OEM5RjkiIGN4PSIyOS45NTIiIGN5PSIyNi4yMDMiIHJ4PSIyLjc3IiByeT0iMy40NjIiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InJvdGF0ZSgtNDIuNTk3IDI5Ljk1NCAyNi4yMDUpIiBmaWxsPSIjMjY5IiBjeD0iMjkuOTUyIiBjeT0iMjYuMjAzIiByeD0iMS4zODUiIHJ5PSIyLjA3NyIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjIuNSIgY3k9IjMzLjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjI5IiBjeT0iMiIgcj0iMiIvPjxwYXRoIGZpbGw9IiNFQTU5NkUiIGQ9Ik00Ljg2NCAyOS4yNDZMMi41MjYgMjMuNjMuNDEyIDI5LjY3NXpNMjYgNWwtNCAxIDEtNHoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMzEuOTk5IDEzTDM2IDcuOTk5IDMzIDZ6Ii8+PC9zdmc+" title="partying_face"/> <img alt="party_ball emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iIzI5MkYzMyIgZD0iTTI2IDljLTMuNTkxIDAtNi4yNy0xLjY0OC03Ljk4OS00LjkwNUMxNi4zODUgNy4zMTQgMTMuOTkzIDkgMTEgOWMtLjU1MiAwLTEtLjQ0OC0xLTFzLjQ0OC0xIDEtMWMyLjcyOSAwIDQuNzY1LTEuOTU3IDYuMDUxLTUuODE2QzE3LjE4OC43NzUgMTcuNTY5LjUgMTggLjVzLjgxMi4yNzUuOTQ5LjY4NEMyMC4yNzEgNS4xNTEgMjIuNTEyIDcgMjYgN2MuNTUzIDAgMSAuNDQ4IDEgMXMtLjQ0NyAxLTEgMXoiLz48cGF0aCBmaWxsPSIjRkZBQzMzIiBkPSJNMTQuNzExIDkuNjU0YzMuMzY0IDMuMzY2LjQ5OCA1Ljk1NC0yLjg2OCA5LjMxOS0zLjM2NSAzLjM2NS01Ljk1NCA2LjIzMi05LjMxOSAyLjg2OC0zLjM2Ni0zLjM2Ni0zLjM2Ni04LjgyMiAwLTEyLjE4NyAzLjM2Ni0zLjM2NiA4LjgyMS0zLjM2NiAxMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMTUuNTQyIDEwLjk3MmMxLjU4NCAxLjU4NS4yNDggNS40ODYtMi45ODMgOC43MTctMy4yMzEgMy4yMzEtNy4xMzIgNC41NjgtOC43MTcgMi45ODItMS41ODQtMS41ODQtLjI0OC01LjQ4NiAyLjk4Mi04LjcxNyAzLjIzMi0zLjIzIDcuMTM0LTQuNTY2IDguNzE4LTIuOTgyeiIvPjxwYXRoIGZpbGw9IiNGRkFDMzMiIGQ9Ik0yMS4yODkgOS42NTRjLTMuMzYzIDMuMzY2LS40OTggNS45NTQgMi44NjggOS4zMTkgMy4zNjUgMy4zNjUgNS45NTQgNi4yMzIgOS4zMTkgMi44NjggMy4zNjUtMy4zNjYgMy4zNjUtOC44MjIgMC0xMi4xODctMy4zNjUtMy4zNjYtOC44Mi0zLjM2Ni0xMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMjAuNDU5IDEwLjk3MmMtMS41ODUgMS41ODUtLjI0OSA1LjQ4NiAyLjk4MiA4LjcxNyAzLjIzIDMuMjMxIDcuMTMzIDQuNTY4IDguNzE3IDIuOTgyIDEuNTg0LTEuNTg0LjI0OC01LjQ4Ni0yLjk4My04LjcxNy0zLjIzLTMuMjMtNy4xMzMtNC41NjYtOC43MTYtMi45ODJ6Ii8+PHBhdGggZmlsbD0iI0FBOEREOCIgZD0iTTIyLjQxIDE4LjIyMWMuMTk5LS4xNi40NTktLjI0NC43MzQtLjIxNS44NjcuMDk0IDEuNTk4LjM5NiAyLjEwOS44NzMuNTQxLjUwNS44MDcgMS4xODMuNzM0IDEuODYyLS4xMjkgMS4xOTEtMS4zMjQgMi4yODUtMy4zNjMgMi4wNjUtLjc5My0uMDg1LTEuMTQ2LjE3LTEuMTU4LjI5MS0uMDE0LjEyMS4yNzcuNDQ2IDEuMDcuNTMyLjg2Ny4wOTQgMS41OTguMzk2IDIuMTA5Ljg3My41NDEuNTA1LjgwOSAxLjE4My43MzQgMS44NjItLjEyOSAxLjE5Mi0xLjMyNCAyLjI4NS0zLjM2MSAyLjA2Ni0uNTc4LS4wNjItLjg4My4wNTctMS4wMTIuMTM0LS4xMDMuMDYzLS4xNDQuMTI0LS4xNDguMTU4LS4wMTIuMTIuMjc1LjQ0NSAxLjA3LjUzMS41NDkuMDYuOTQ3LjU1My44ODcgMS4xMDItLjA1OS41NDktLjU1MS45NDYtMS4xMDIuODg3LTIuMDM3LS4yMTktMi45NzMtMS41NDItMi44NDQtMi43MzUuMTI5LTEuMTkyIDEuMzI0LTIuMjg1IDMuMzYzLTIuMDY1LjU3OC4wNjMuODgxLS4wNTcgMS4wMS0uMTM0LjEwNC0uMDYyLjE0NS0uMTIzLjE0OC0uMTU3LjAxNC0uMTIxLS4yNzUtLjQ0Ni0xLjA3LS41MzItMi4wMzctLjIyLTIuOTczLTEuNTQyLTIuODQ0LTIuNzM1LjEyOS0xLjE5MiAxLjMyNC0yLjI4NiAzLjM2MS0yLjA2NC41NzguMDYyLjg4My0uMDU4IDEuMDEyLS4xMzUuMTAzLS4wNjIuMTQ0LS4xMjMuMTQ4LS4xNTcuMDEyLS4xMjEtLjI3Ny0uNDQ2LTEuMDctLjUzMi0uNTQ5LS4wNTktLjk0Ny0uNTUzLS44ODctMS4xMDIuMDMyLS4yNzYuMTcxLS41MTIuMzctLjY3M3oiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMTUuMjY2IDM1LjgyOGMtMS45NzMuNTU3LTMuMzM0LS4zMjItMy42NTgtMS40NzctLjMyNC0xLjE1NC4zNzgtMi42MTUgMi4zNS0zLjE3Ljc3LS4yMTYgMS4wMDEtLjU4NC45Ny0uNzAxLS4wMzQtLjExOS0uNDI1LS4zMTItMS4xOTMtLjA5Ni0xLjk3Mi41NTYtMy4zMzMtLjMyNC0zLjY1Ny0xLjQ3OS0uMzI2LTEuMTU1LjM3OC0yLjYxNCAyLjM1MS0zLjE2OS43NjktLjIxNyAxLjAwMS0uNTg2Ljk2Ny0uNzAzLS4wMzMtLjExNi0uNDIzLS4zMTEtMS4xOTItLjA5NS0uNTMuMTQ5LTEuMDg0LS4xNTktMS4yMzMtLjY5LS4xNDgtLjUzMy4xNjEtMS4wODQuNjkzLTEuMjM0IDEuOTcxLS41NTUgMy4zMzMuMzIyIDMuNjU5IDEuNDc5LjMyNCAxLjE1NC0uMzc5IDIuNjEzLTIuMzUyIDMuMTctLjc3LjIxNi0xLjAwMS41ODQtLjk2Ny43MDEuMDMyLjExNy40MjIuMzEyIDEuMTkuMDk2IDEuOTc0LS41NTYgMy4zMzQuMzIyIDMuNjU5IDEuNDc5LjMyNSAxLjE1My0uMzc4IDIuNjEyLTIuMzUyIDMuMTY5LS43NjguMjE1LS45OTkuNTg2LS45NjcuNzAxLjAzNC4xMTguNDIzLjMxMiAxLjE5Mi4wOTcuNTMyLS4xNTEgMS4wODMuMTU5IDEuMjMzLjY5LjE0OS41MzEtLjE2MSAxLjA4NC0uNjkzIDEuMjMyeiIvPjxjaXJjbGUgZmlsbD0iIzVDOTEzQiIgY3g9IjIuNSIgY3k9IjI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjciIGN5PSIzMSIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjMwIiBjeT0iMjciIHI9IjIiLz48Y2lyY2xlIGZpbGw9IiM1QzkxM0IiIGN4PSIyNS41IiBjeT0iMzEuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjNUM5MTNCIiBjeD0iMTcuNSIgY3k9IjE5LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjciIGN5PSIyMyIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjI3LjUiIGN5PSIxNi41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiNGRkNDNEQiIGN4PSIxMi41IiBjeT0iMTQuNSIgcj0iMS41Ii8+PC9zdmc+" title="party_ball"/></font>
<font size="5"><img alt="celebration emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iI0ZDQUI0MCIgZD0iTTI3Ljk5OSAzNmMtLjQ0OCAwLS44NTUtLjMwMy0uOTY5LS43NTgtLjAzNi0uMTM2LS45MjYtMy40MzYtNC4yNzMtNC4yNzJDMTguMDU0IDI5Ljc5NCAxOCAyMy4yNzcgMTggMjNjMC0uNTUyLjQ0Ny0uOTk4Ljk5OC0uOTk5LjU1NC4wMzQgMSAuNDQ1IDEuMDAyLjk5NyAwIC4wNTMuMDU0IDUuMjM0IDMuMjQyIDYuMDMyIDQuNTMgMS4xMzIgNS42ODIgNS41NCA1LjcyNyA1LjcyOC4xMzUuNTM1LS4xOTEgMS4wNzgtLjcyNyAxLjIxMi0uMDgxLjAyLS4xNjMuMDMtLjI0My4wM3oiLz48cGF0aCBmaWxsPSIjQkIxQTM0IiBkPSJNMTggMjVjLTEuMSAwLTEuNTk4LS44MDUtMS4xMDUtMS43ODlsMS4yMTEtMi40MjJjLjQ5Mi0uOTg0IDEuMjk3LS45ODQgMS43ODkgMGwxLjIxMSAyLjQyMkMyMS41OTggMjQuMTk1IDIxLjEgMjUgMjAgMjVoLTJ6Ii8+PHBhdGggZmlsbD0iI0JCMUEzNCIgZD0iTTI4IDljMCA2LTcgMTItOSAxMnMtOS02LTktMTJjMC01Ljc5OSA0LjU4Mi05IDktOXM5IDMuMjAxIDkgOXoiLz48cGF0aCBmaWxsPSIjRkNBQjQwIiBkPSJNMjAgMjJoLTJjLS41NTIgMC0xLS40NDctMS0xcy40NDgtMSAxLTFoMmMuNTUzIDAgMSAuNDQ3IDEgMXMtLjQ0NyAxLTEgMXoiLz48L3N2Zz4=" title="celebration"/> <img alt="partying_face emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PGNpcmNsZSBmaWxsPSIjRkZDQzREIiBjeD0iMTciIGN5PSIxOSIgcj0iMTciLz48ZWxsaXBzZSBmaWxsPSIjNjY0NTAwIiBjeD0iMTcuOTk5IiBjeT0iMjYiIHJ4PSIyIiByeT0iMi41Ii8+PHBhdGggZmlsbD0iIzY2NDUwMCIgZD0iTTguMTExIDIxLjM4M2MtLjE4MiAwLS4zNjctLjA1LS41MzItLjE1NC0uNDY3LS4yOTQtLjYwNy0uOTExLS4zMTMtMS4zNzkuOTE2LTEuNDUzIDMuNzAxLTMuOTM4IDcuNjktMi45NjIuNTM2LjEzMS44NjQuNjczLjczMyAxLjIwOS0uMTMyLjUzNi0uNjc2Ljg2Mi0xLjIwOS43MzMtMy42MDQtLjg4Mi01LjUwMiAyLjA1Ni01LjUyMSAyLjA4Ni0uMTkxLjMwMi0uNTE2LjQ2Ny0uODQ4LjQ2N3ptMTEuOTczLTMuNzQyYy0uMjkgMC0uNTc2LS4xMjUtLjc3NC0uMzY2LS4zNS0uNDI3LS4yODgtMS4wNTguMTQtMS40MDggMy4xNzYtMi42MDQgNi43NjItMS41NjIgOC4yMTUtLjY0Ni40NjcuMjk0LjYwNy45MTIuMzEyIDEuMzc5LS4yOTMuNDY1LS45MDguNjA3LTEuMzc2LjMxNS0uMTM4LS4wODQtMy4wNTItMS44MjMtNS44ODQuNDk5LS4xODYuMTUzLS40MS4yMjctLjYzMy4yMjd6Ii8+PHBhdGggZmlsbD0iI0UyQTYyRCIgZD0iTTEzLjM0NiAzMS4yNzNjLS4wNjggMC0uMTM3LS4wMDktLjIwNS0uMDI4LS4zOTgtLjExMy0uNjMtLjUyNy0uNTE3LS45MjYuNDM3LTEuNTQuMjU4LTMuMDI5LS40OS00LjA4Ni0uNDk3LS43MDItMS4yMDUtMS4xMzEtMS45NDMtMS4xNzgtLjQxNC0uMDI1LS43MjgtLjM4Mi0uNzAyLS43OTVzLjM4MS0uNzUxLjc5NS0uNzAxYzEuMTkzLjA3NCAyLjMxMy43MzMgMy4wNzMgMS44MDcgMS4wMTEgMS40MjkgMS4yNyAzLjM4My43MDkgNS4zNjEtLjA5My4zMzEtLjM5NC41NDYtLjcyLjU0NnptMTEuMDM3LTMuMDYxYy0uMTQyIDAtLjI4NS0uMDQtLjQxMi0uMTI0LTEuMTY3LS43Ny0xLjgyLTIuMTE3LTEuNzkyLTMuNjk1LjAyOS0xLjYzNS44MDktMy4xNTMgMS45ODQtMy44NjkuMzUzLS4yMTYuODE0LS4xMDQgMS4wMy4yNTEuMjE2LjM1NC4xMDQuODE0LS4yNTEgMS4wMy0uNzM1LjQ0OC0xLjI0NCAxLjQ5OS0xLjI2NCAyLjYxNC0uMDIgMS4wNTUuMzg5IDEuOTM2IDEuMTE4IDIuNDE3LjM0Ni4yMjguNDQxLjY5My4yMTMgMS4wMzktLjE0NC4yMTktLjM4Mi4zMzctLjYyNi4zMzd6Ii8+PHBhdGggZmlsbD0iI0REMkU0NCIgZD0iTTE3LjE3OSAyLjcyYy0uMDQzLS4wNDktLjExLS4wNzYtLjE4OS0uMDkxIDAgMC0xNS45MjQtMy4wMjMtMTYuNjEzLTIuNDE1Qy0uMzExLjgyMy43NCAxNi45OTguNzQgMTYuOTk4Yy4wMDUuMDgxLjAyMy4xNS4wNjcuMTk5LjYwNC42ODQgNC43NTgtMi4wMDQgOS4yNzktNi4wMDEgNC41MjItMy45OTggNy42OTctNy43OTIgNy4wOTMtOC40NzZ6Ii8+PHBhdGggZmlsbD0iI0VBNTk2RSIgZD0iTS4zNDkuMjcxQy4zMzQuMzAxLjMyMS4zNDIuMzExLjM5NC40NyAxLjc2NSAyLjAwNiAxMy4wNDYgMi45NjMgMTYuNTcyYzEuNDM2LS44MDMgMi44OTUtMS44OTQgNC42MDktMy4yNTNDNi4xMTYgMTAuNjU0IDEuMTU4LjE0Ni4zNDkuMjcxeiIvPjxwYXRoIGZpbGw9IiMzQjg4QzMiIGQ9Ik0yOS45MDIgMjkuMjI5bC0xMC41NzMtMS4zMDNjLTEuMTMtLjEwMi0zLjExNy0uMTEyLTMuMDE1LTEuOTAyLjA5My0xLjYyMyAyLjA0LTEuMzczIDMuNDc5LTEuMTZsMTAuNjM4IDEuNzc0LS41MjkgMi41OTF6Ii8+PHBhdGggZmlsbD0iIzg4QzlGOSIgZD0iTTMwLjQzIDI2LjYzOWwtNC4yMjItLjcyNGMtLjQ5NC0uMDg5LS45MzQuNjQ3LS45NTYgMS40MjYtLjAyNS44NjYuMjI3IDEuMzA0LjcyNiAxLjQwNmw0LjE0NC41MTIuMzA4LTIuNjJ6Ii8+PHBhdGggZmlsbD0iIzNCODhDMyIgZD0iTTM0LjkxOCAyNi4zNDFsLTIuNjIyIDIuNDExLTQuNjg3LTUuMDk3IDIuNjIyLTIuNDExYzEuMzYxLTEuMjUyIDMuNDk5LTEuMTYyIDQuNzUxLjE5OWwuMTM1LjE0N2MxLjI1MSAxLjM2MiAxLjE2MiAzLjQ5OS0uMTk5IDQuNzUxeiIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKC00Mi41OTcgMjkuOTU0IDI2LjIwNSkiIGZpbGw9IiM4OEM5RjkiIGN4PSIyOS45NTIiIGN5PSIyNi4yMDMiIHJ4PSIyLjc3IiByeT0iMy40NjIiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InJvdGF0ZSgtNDIuNTk3IDI5Ljk1NCAyNi4yMDUpIiBmaWxsPSIjMjY5IiBjeD0iMjkuOTUyIiBjeT0iMjYuMjAzIiByeD0iMS4zODUiIHJ5PSIyLjA3NyIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjIuNSIgY3k9IjMzLjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzU1QUNFRSIgY3g9IjI5IiBjeT0iMiIgcj0iMiIvPjxwYXRoIGZpbGw9IiNFQTU5NkUiIGQ9Ik00Ljg2NCAyOS4yNDZMMi41MjYgMjMuNjMuNDEyIDI5LjY3NXpNMjYgNWwtNCAxIDEtNHoiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMzEuOTk5IDEzTDM2IDcuOTk5IDMzIDZ6Ii8+PC9zdmc+" title="partying_face"/> <img alt="party_ball emoji" class="emoji" draggable="false" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNiAzNiI+PHBhdGggZmlsbD0iIzI5MkYzMyIgZD0iTTI2IDljLTMuNTkxIDAtNi4yNy0xLjY0OC03Ljk4OS00LjkwNUMxNi4zODUgNy4zMTQgMTMuOTkzIDkgMTEgOWMtLjU1MiAwLTEtLjQ0OC0xLTFzLjQ0OC0xIDEtMWMyLjcyOSAwIDQuNzY1LTEuOTU3IDYuMDUxLTUuODE2QzE3LjE4OC43NzUgMTcuNTY5LjUgMTggLjVzLjgxMi4yNzUuOTQ5LjY4NEMyMC4yNzEgNS4xNTEgMjIuNTEyIDcgMjYgN2MuNTUzIDAgMSAuNDQ4IDEgMXMtLjQ0NyAxLTEgMXoiLz48cGF0aCBmaWxsPSIjRkZBQzMzIiBkPSJNMTQuNzExIDkuNjU0YzMuMzY0IDMuMzY2LjQ5OCA1Ljk1NC0yLjg2OCA5LjMxOS0zLjM2NSAzLjM2NS01Ljk1NCA2LjIzMi05LjMxOSAyLjg2OC0zLjM2Ni0zLjM2Ni0zLjM2Ni04LjgyMiAwLTEyLjE4NyAzLjM2Ni0zLjM2NiA4LjgyMS0zLjM2NiAxMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMTUuNTQyIDEwLjk3MmMxLjU4NCAxLjU4NS4yNDggNS40ODYtMi45ODMgOC43MTctMy4yMzEgMy4yMzEtNy4xMzIgNC41NjgtOC43MTcgMi45ODItMS41ODQtMS41ODQtLjI0OC01LjQ4NiAyLjk4Mi04LjcxNyAzLjIzMi0zLjIzIDcuMTM0LTQuNTY2IDguNzE4LTIuOTgyeiIvPjxwYXRoIGZpbGw9IiNGRkFDMzMiIGQ9Ik0yMS4yODkgOS42NTRjLTMuMzYzIDMuMzY2LS40OTggNS45NTQgMi44NjggOS4zMTkgMy4zNjUgMy4zNjUgNS45NTQgNi4yMzIgOS4zMTkgMi44NjggMy4zNjUtMy4zNjYgMy4zNjUtOC44MjIgMC0xMi4xODctMy4zNjUtMy4zNjYtOC44Mi0zLjM2Ni0xMi4xODcgMHoiLz48cGF0aCBmaWxsPSIjQkUxOTMxIiBkPSJNMjAuNDU5IDEwLjk3MmMtMS41ODUgMS41ODUtLjI0OSA1LjQ4NiAyLjk4MiA4LjcxNyAzLjIzIDMuMjMxIDcuMTMzIDQuNTY4IDguNzE3IDIuOTgyIDEuNTg0LTEuNTg0LjI0OC01LjQ4Ni0yLjk4My04LjcxNy0zLjIzLTMuMjMtNy4xMzMtNC41NjYtOC43MTYtMi45ODJ6Ii8+PHBhdGggZmlsbD0iI0FBOEREOCIgZD0iTTIyLjQxIDE4LjIyMWMuMTk5LS4xNi40NTktLjI0NC43MzQtLjIxNS44NjcuMDk0IDEuNTk4LjM5NiAyLjEwOS44NzMuNTQxLjUwNS44MDcgMS4xODMuNzM0IDEuODYyLS4xMjkgMS4xOTEtMS4zMjQgMi4yODUtMy4zNjMgMi4wNjUtLjc5My0uMDg1LTEuMTQ2LjE3LTEuMTU4LjI5MS0uMDE0LjEyMS4yNzcuNDQ2IDEuMDcuNTMyLjg2Ny4wOTQgMS41OTguMzk2IDIuMTA5Ljg3My41NDEuNTA1LjgwOSAxLjE4My43MzQgMS44NjItLjEyOSAxLjE5Mi0xLjMyNCAyLjI4NS0zLjM2MSAyLjA2Ni0uNTc4LS4wNjItLjg4My4wNTctMS4wMTIuMTM0LS4xMDMuMDYzLS4xNDQuMTI0LS4xNDguMTU4LS4wMTIuMTIuMjc1LjQ0NSAxLjA3LjUzMS41NDkuMDYuOTQ3LjU1My44ODcgMS4xMDItLjA1OS41NDktLjU1MS45NDYtMS4xMDIuODg3LTIuMDM3LS4yMTktMi45NzMtMS41NDItMi44NDQtMi43MzUuMTI5LTEuMTkyIDEuMzI0LTIuMjg1IDMuMzYzLTIuMDY1LjU3OC4wNjMuODgxLS4wNTcgMS4wMS0uMTM0LjEwNC0uMDYyLjE0NS0uMTIzLjE0OC0uMTU3LjAxNC0uMTIxLS4yNzUtLjQ0Ni0xLjA3LS41MzItMi4wMzctLjIyLTIuOTczLTEuNTQyLTIuODQ0LTIuNzM1LjEyOS0xLjE5MiAxLjMyNC0yLjI4NiAzLjM2MS0yLjA2NC41NzguMDYyLjg4My0uMDU4IDEuMDEyLS4xMzUuMTAzLS4wNjIuMTQ0LS4xMjMuMTQ4LS4xNTcuMDEyLS4xMjEtLjI3Ny0uNDQ2LTEuMDctLjUzMi0uNTQ5LS4wNTktLjk0Ny0uNTUzLS44ODctMS4xMDIuMDMyLS4yNzYuMTcxLS41MTIuMzctLjY3M3oiLz48cGF0aCBmaWxsPSIjNzdCMjU1IiBkPSJNMTUuMjY2IDM1LjgyOGMtMS45NzMuNTU3LTMuMzM0LS4zMjItMy42NTgtMS40NzctLjMyNC0xLjE1NC4zNzgtMi42MTUgMi4zNS0zLjE3Ljc3LS4yMTYgMS4wMDEtLjU4NC45Ny0uNzAxLS4wMzQtLjExOS0uNDI1LS4zMTItMS4xOTMtLjA5Ni0xLjk3Mi41NTYtMy4zMzMtLjMyNC0zLjY1Ny0xLjQ3OS0uMzI2LTEuMTU1LjM3OC0yLjYxNCAyLjM1MS0zLjE2OS43NjktLjIxNyAxLjAwMS0uNTg2Ljk2Ny0uNzAzLS4wMzMtLjExNi0uNDIzLS4zMTEtMS4xOTItLjA5NS0uNTMuMTQ5LTEuMDg0LS4xNTktMS4yMzMtLjY5LS4xNDgtLjUzMy4xNjEtMS4wODQuNjkzLTEuMjM0IDEuOTcxLS41NTUgMy4zMzMuMzIyIDMuNjU5IDEuNDc5LjMyNCAxLjE1NC0uMzc5IDIuNjEzLTIuMzUyIDMuMTctLjc3LjIxNi0xLjAwMS41ODQtLjk2Ny43MDEuMDMyLjExNy40MjIuMzEyIDEuMTkuMDk2IDEuOTc0LS41NTYgMy4zMzQuMzIyIDMuNjU5IDEuNDc5LjMyNSAxLjE1My0uMzc4IDIuNjEyLTIuMzUyIDMuMTY5LS43NjguMjE1LS45OTkuNTg2LS45NjcuNzAxLjAzNC4xMTguNDIzLjMxMiAxLjE5Mi4wOTcuNTMyLS4xNTEgMS4wODMuMTU5IDEuMjMzLjY5LjE0OS41MzEtLjE2MSAxLjA4NC0uNjkzIDEuMjMyeiIvPjxjaXJjbGUgZmlsbD0iIzVDOTEzQiIgY3g9IjIuNSIgY3k9IjI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjciIGN5PSIzMSIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iIzkyNjZDQyIgY3g9IjMwIiBjeT0iMjciIHI9IjIiLz48Y2lyY2xlIGZpbGw9IiM1QzkxM0IiIGN4PSIyNS41IiBjeT0iMzEuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjNUM5MTNCIiBjeD0iMTcuNSIgY3k9IjE5LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjciIGN5PSIyMyIgcj0iMiIvPjxjaXJjbGUgZmlsbD0iI0ZGQ0M0RCIgY3g9IjI3LjUiIGN5PSIxNi41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiNGRkNDNEQiIGN4PSIxMi41IiBjeT0iMTQuNSIgcj0iMS41Ii8+PC9zdmc+" title="party_ball"/></font></p>
<p><a class="anchor" name="catsoop_section_4_4"></a><a class="anchor" name="_center_and_the_property_decorator"></a><h3 class="cs_section_title">4.4) <code>center</code> and the <code>@property</code> Decorator<a class="cs_permalink" href="#_center_and_the_property_decorator">§</a></h3></p>
<p>We can take a moment to celebrate what we've done so far, but let's not rest on
our laurels for too long.  There's still another part of the specification that
we've not addressed yet: the <code>center</code> attribute.</p>
<p>Conveniently, our <code>Circle</code> class already has this done since we're storing away
the center as part of the class definition!  But we need to make sure to
implement it for <code>Rectangle</code> as well.</p>
<p>One way that we could do this is familiar: we could simply add another
attribute at initialization time, like so:</p>
<pre><code class="language-py">class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height
        self.center = (lower_left[0] + width//2, lower_left[1] + height//2)
</code></pre>
<p>And perhaps that's the right thing to do (it all depends on your choice of
implementation!).  But let's imagine for a moment that I wanted to allow my
shapes to be <em>mutable</em>, i.e., I wanted to be able to change <code>r.lower_left</code> for
some <code>Rectangle</code> instance.  In that case, we kind of have a problem here, in
that moving the lower-left corner should also affect the center, but the code
above won't do that!</p>
<p>In cases like this where we have related values stored in our instance, one way
to avoid the issue would be to define <code>center</code> as a method instead of as an
attribute:</p>
<pre><code class="language-py">class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height

    def center(self):
        return (self.lower_left[0] + self.width//2, self.lower_left[1] + self.height//2)
</code></pre>
<p>This kind of a structure would fix the problem from above, in that if we
changed <code>r.lower_left</code>, then <code>r.center()</code> would adjust appropriately!  But it
has one downside, which is it doesn't match our specification anymore.  Our
spec said that <code>r.center</code> should be a tuple, but with this code we would need
to write <code>r.center()</code> instead.</p>
<p>But Python gives us a way around this, by way of the <code>@property</code> decorator.  If
we write <code>@property</code> just above that method's definition:</p>
<pre><code class="language-py">class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height

    @property
    def center(self):
        return (self.lower_left[0] + self.width//2, self.lower_left[1] + self.height//2)
</code></pre>
<p>then when we say <code>r.center</code> (without the round brackets), Python will
automatically call that method and give us the result (thus giving us a way to
meet the given specification even with our dynamically computed center value!).</p>
<p>It turns out that this syntax with the <code>@</code> sign is more general than this (and
we'll talk more about that in the next reading), but for now it's fine
to treat <code>@property</code> as a special piece of syntax.</p>
<p>It's perhaps also worth mentioning that there is an equivalent operation for
setting a value in such a way that it has a dynamic effect.  So if we wanted to
be able to say <code>r.center = (2, 3)</code>, for example, but <code>r.center</code> was dynamically
computed as a <code>@property</code>, we could write something like the following, which
would adjust the <code>lower_left</code> attribute so that <code>center</code> would have the given
value:</p>
<pre><code class="language-py">class Rectangle(Shape):
    def __init__(self, lower_left, width, height):
        self.lower_left = lower_left
        self.width = width
        self.height = height

    @property
    def center(self):
        return (self.lower_left[0] + self.width//2, self.lower_left[1] + self.height//2)

    @center.setter
    def center(self, value):
        self.lower_left = (value[0] - self.width//2, value[1] - self.height//2)
</code></pre>
<p><a class="anchor" name="catsoop_section_4_5"></a><a class="anchor" name="_adding_another_shape"></a><h3 class="cs_section_title">4.5) Adding Another Shape<a class="cs_permalink" href="#_adding_another_shape">§</a></h3></p>
<p>Now let's build on things a little bit by adding another new shape: a square!
We'll implement this as a new class <code>Square</code>, and all instances of <code>Square</code> need
to support all of the same operations as our other shapes.</p>
<p>Take a moment to think about <code>Square</code>, and to try to implement it for yourself.
What should <code>Square</code>'s superclass be?  What arguments should its initializer
take as input?  What methods do we need to rewrite?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div>As always, there are many different ways that we could implement this.  But
it's nice to notice a relationship between <code>Square</code> and another shape we've
already implemented!  A square is a kind of rectangle, and we can leverage that
fact in our code.  In fact, <em>everything</em> that we wrote for rectangles above
works just fine for squares.  But one thing maybe wants to be different, the
initializer; it doesn't make sense to have to specify both a height and a
width when creating a square since they're always the same.  So it turns out
that that's all we need to rewrite.  And, even better, we don't need to write
much code inside of it at all.  Here is one (complete) solution:
<pre><code class="language-py">class Square(Rectangle):
    def __init__(self, lower_left, side_length):
        Rectangle.__init__(self, lower_left, side_length, side_length)
</code></pre>
<p>What in the world is going on here?  Well, whenever we make a new instance
of <code>Square</code>, we're going to provide the location of its lower-left corner,
as well as a side length.  Then the <code>__init__</code> method's job is to set up
appropriate attributes for this instance.  We <em>could</em> have rewritten some code
to assign <code>lower_left</code> and <code>width</code> and <code>height</code> attributes (which are all
necessary for the other inherited <code>Rectangle</code> methods to work), but here we
acknowledge that we already have a function to set those things:
<code>Rectangle.__init__</code>!  So all we do is call that function with our new instance
passed in alongside appropriate values for <code>lower_left</code>, <code>width</code>, and <code>height</code>;
and we let that function take care of creating those attributes in our new
instance.</p></div></div>
<p>With that code written, we can test again:</p>
<pre><code class="language-py">out_image = new_image(500, 500)

shapes = [
    (Circle((100, 100), 30), COLORS['purple']),
    (Rectangle((200, 300), 70, 20), COLORS['blue']),
    (Square((150, 400), 40), COLORS['green']),
]


for shape, color in shapes:
    shape.draw(out_image, color)

save_color_image(out_image, "test.png")
</code></pre>
<p>and we see the following image:</p>
<center>
<img class="envdia" src="https://py.mit.edu/_static/spring24/readings/inheritance/shapes3.png" width="250"/>
</center>
<p><a class="anchor" name="catsoop_section_4_6"></a><a class="anchor" name="_shape_combinations"></a><h3 class="cs_section_title">4.6) Shape Combinations<a class="cs_permalink" href="#_shape_combinations">§</a></h3></p>
<p>We're nearing the end of our adventure with drawing shapes, but let's explore
just a few more examples first.</p>
<p>So far, we've defined a few basic shapes.  But one of the things we talked about
as being powerful, generally, when talking about complex systems is an ability
to <em>combine primitive pieces together to make more complex pieces</em>.  So let's
spend a little bit of time thinking about some <em>combinations</em> of shapes we
could implement.</p>
<p>Let's imagine that I have two shapes, a circle and a square, that overlap, like
so:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/combinations_base.png" width="200/"/>
</center>
<p>Given these two shapes, we might think about ways that we could combine them
together to make new shapes.  For example, I could think about the <em>intersection</em>
of the circle and square as being a new shape containing only pixels that exist in both shapes:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/combinations_intersection.png" width="200/"/>
</center>
<p>The <em>union</em> of the circle and square is a new shape containing all the pixels that are in either (or both)
of the original shapes:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/combinations_union.png" width="200/"/>
</center>
<p>And the <em>difference</em> between the shapes (e.g., the circle minus the square) might be a new shape with all pixels that are in the circle
but not the square:</p>
<center>
<img src="https://py.mit.edu/_static/spring24/readings/inheritance/combinations_diff.png" width="200/"/>
</center>
<p>So let's think about implementing new classes to represent these kinds of
combinations.</p>
<p><a class="anchor" name="catsoop_section_4_6_1"></a><a class="anchor" name="_union"></a><h4 class="cs_section_title">4.6.1) Union<a class="cs_permalink" href="#_union">§</a></h4></p>
<p>Let's start by implementing a new kind of shape that represents the <em>union</em>
of two shapes.  Think for a little while about how we might implement this:
What inputs should it take at initialization time?  What attributes should it
store?  How and where should we implement <code>__contains__</code>?</p>
<p>Give it a try on your own before looking below:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div>Here is one place to start (though, as we'll see, there's room for improvement):
<pre><code class="language-py">class Union(Shape):
    def __init__(self, shape1, shape2):
        self.shape1 = shape1
        self.shape2 = shape2

    def __contains__(self, p):
        return (p in self.shape1) or (p in self.shape2)
</code></pre>
<p>It's important that <code>Union</code> inherits from <code>Shape</code> so that it inherits the
<code>draw</code> method, which it needs to support.  Without that inheritance, we would
need to rewrite draw again inside of <code>Union</code>.</p>
<p>Here we've also defined an initializer that takes in the two component shapes
and stores them away.  Then our <code>__contains__</code> check should return <code>True</code> if
<code>p</code> is in <em>either or both</em> or the component shapes, which we've implemented above.</p></div></div>
<p><a class="anchor" name="catsoop_section_4_6_2"></a><a class="anchor" name="_intersection_and_difference"></a><h4 class="cs_section_title">4.6.2) Intersection and Difference<a class="cs_permalink" href="#_intersection_and_difference">§</a></h4></p>
<p>Let's go ahead and implement a class to represent an intersection as well.
Once again, think about this (and try to implement it) before looking below:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>Here is one possible implementation:</p>
<pre><code class="language-py">class Intersection(Shape):
    def __init__(self, shape1, shape2):
        self.shape1 = shape1
        self.shape2 = shape2

    def __contains__(self, p):
        return (p in self.shape1) and (p in self.shape2)
</code></pre>
</div></div>
<p>And, while we're at it, try writing code for a difference as well.  One
solution is below:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>Here is one possible implementation:</p>
<pre><code class="language-py">class Difference(Shape):
    def __init__(self, shape1, shape2):
        self.shape1 = shape1
        self.shape2 = shape2

    def __contains__(self, p):
        return (p in self.shape1) and not (p in self.shape2)
</code></pre>
</div></div>
<p><a class="anchor" name="catsoop_section_4_6_3"></a><a class="anchor" name="_refactoring_2"></a><h4 class="cs_section_title">4.6.3) Refactoring<a class="cs_permalink" href="#_refactoring_2">§</a></h4></p>
<p>The above code works!  It allows us to use code like the following:</p>
<pre><code class="language-py">out_image = new_image(500, 500)
c1 = Circle((250, 250), 100)
c1 = Difference(c1, Circle((220, 280), 20))
c1 = Difference(c1, Circle((280, 280), 20))
c1 = Difference(c1, Difference(Circle((250, 250), 80), Rectangle((0, 250), 500, 500)))
c1.draw(out_image, COLORS['grey'])
save_color_image(out_image, "test.png")
</code></pre>
<p>to make the following image:</p>
<center>
<img class="envdia" src="https://py.mit.edu/_static/spring24/readings/inheritance/shapes4.png" width="250">
</img></center>
<p>But you may have noticed something about the implementations above.
Once again, there's a lot of repeated code between them!  There are ways to
improve <code>__contains__</code> as well, but for now, let's focus on <code>__init__</code>, which
is <em>identical</em> between all three of these classes.</p>
<p>Before, when we noticed this kind of similarity, we moved the offending function
up into the <code>Shape</code> class so that everyone could inherit from it.  Does that
make sense here?</p>
<p>Unfortunately, no!  Remember that our <code>Shape</code> class is the place where we put
information and behaviors that are shared between <em>all</em> shapes.  While these
three combinations share something between the three of them (the fact that
they're made up of two shapes), that property is not shared by all shapes!  So
what are we to do?</p>
<p>Well, noticing this similarity, we can create a new class for ourselves
representing a combination!  Since a combination is a type of shape, it can
inherit from our <code>Shape</code> class; and since <code>Intersection</code>, <code>Union</code>, and <code>Difference</code>
are all combinations, they can all inherit from this new class.  This gives us
a place to put behaviors that are common between all of these combinations but
not common between all shapes.</p>
<p>Try thinking about how to structure this (and maybe implementing it for
yourself) before looking at our code below:</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><pre><code class="language-py">class Combination(Shape):
    def __init__(self, shape1, shape2):
        self.shape1 = shape1
        self.shape2 = shape2

    @property
    def center(self):
        c1 = self.shape1.center
        c2 = self.shape2.center
        return ((c1[0] + c2[0]) // 2, (c1[1] + c2[1]) // 2)


class Union(Combination):
    def __contains__(self, p):
        return (p in self.shape1) or (p in self.shape2)


class Difference(Combination):
    def __contains__(self, p):
        return (p in self.shape1) and not (p in self.shape2)


class Intersection(Combination):
    def __contains__(self, p):
        return (p in self.shape1) and (p in self.shape2)
</code></pre></div></div>
<p>Again, this approach saves us a lot of repeated code!  The general approach
we're advocating here involves looking for common behaviors between classes
and moving those general behaviors into superclasses (in whole or in part),
while letting the subclasses worry only about behaviors and information that
are specific to them.</p>
<p><a class="anchor" name="catsoop_section_4_7"></a><a class="anchor" name="_optional_extra_challenges"></a><h3 class="cs_section_title">4.7) Optional Extra Challenges<a class="cs_permalink" href="#_optional_extra_challenges">§</a></h3></p>
<p>Hopefully this has been a useful example, demonstrating not only a little bit
about how classes work but also how we can use them (and, in particular, use
inheritance) to help us avoid repetitious or overly complex code.
We'll leave that last example as our ending point for the day, but there are
lots of things that we could still do to improve on this code!  If you have
the time and interest, it might be fun to tackle any of the following
additions/improvements (or others of your own devising):</p>
<ul>
<li>
<p>Even though we were able to move some redundant code from <code>Union</code>,
<code>Intersection</code>, and <code>Difference</code> into the <code>Combination</code> class, there is still
a lot of similarity in their <code>__contains__</code> methods.  Try finding a way to move
the common behavior from their <code>__contains__</code> methods into the <code>Combination</code>
class without resorting to explicit checking of types anywhere.</p>
</li>
<li>
<p>Add support for built-in operations to create combinations.  For example, <code>s1
| s2</code> could result in <code>Union(s1, s2)</code>, and we could do similar things for the
other combinations.  How can we accomplish this, and in which classes should
the associated methods be implemented?</p>
</li>
<li>
<p>Make more kinds of primitive shapes (how could you implement a triangle?  an
octagon?  etc?).</p>
</li>
<li>
<p>Make a new kind of shape representing an <em>outline</em> of a given shape, so that
<code>Outline(s, w)</code>, for example, would be a new shape that contains pixels that
are within <code>w</code> pixels of the <em>edge</em> of an abitrary shape <code>s</code>.  This can be
done purely in terms of <code>s.__contains__</code>, without needing to store any
additional information in <code>s</code>.</p>
</li>
<li>
<p>Implement one or more "transformations" of shapes, for example:</p>
<ul>
<li><code>Scaled(s, n)</code> could be a version of <code>s</code> scaled up in size by a factor of <code>n</code>.</li>
<li><code>Rotated(s, d)</code> could be a version of <code>s</code> rotated by <code>d</code> degrees about its center.</li>
<li><code>Translated(s, dx, dy)</code> could be a version of <code>s</code> moved through space by <code>dx</code> pixels horizontally and <code>dy</code> pixels vertically.</li>
</ul>
</li>
<li>
<p>Use the shapes library you've written to draw cool pictures!</p>
</li>
<li>
<p>Our <code>draw</code> code is inefficient because it iterates over every pixel
of an image to find which pixels we should draw for a specific
<code>Shape</code>. Typically, the shapes are much smaller than the entire
image. Implement the notion of a <em>bounding box</em>, namely the smallest
<code>Rectangle</code> that includes all the pixels of a <code>Shape</code>. With this,
re-write <code>draw</code> to make use of the bounding box so that only the
pixels within it need to be scanned to see which are actually in the
shape and thus which need to be drawn onto the image.</p>
</li>
</ul>
<p>If you take on any of these tasks, we'd be interested to hear about them
(and/or to help you get them to work if you're having trouble!).</p>
<p><a class="anchor" name="catsoop_section_5"></a><a class="anchor" name="_summary"></a><h2 class="cs_section_title">5) Summary<a class="cs_permalink" href="#_summary">§</a></h2></p>
<p>Per usual, we've covered a lot of ground in this reading.  Our main goal for
today was to introduce the notion of <em>inheritance</em>, by which classes can share
methods.</p>
<p>We started by approaching this from a very low level, looking at small,
contrived examples to try to develop an intuition for how this new machinery
works.</p>
<p>Then we pulled back and looked at inheritance as an <em>organizational tool</em> in
the context of a real program.  In particular, we looked at leveraging
inheritance to reduce the amount of redundant code in our programs to make
them clearer and more extensible.</p>
<p>As you're thinking about applying these ideas to your own programs, many of
these ideas are the kind of thing for which some amount of prior planning can
be done (and it's always a good idea!).  We can think ahead-of-time about what
classes we're going to implement, the relationships between them, the
operations they support, etc.  But some of
these things may also be things that you notice <em>as you're writing code</em>.  If
that happens, don't be afraid to go back and refactor your code; a little bit
of time refactoring now can often save a lot of time debugging later on!  Over
time, and with more practice, you'll be better able to recognize ahead-of-time
what structures are going to work well and what ones aren't.</p>
<p><script type="text/javascript">
catsoop.callbacks['submit'] = function(ok, names, status, response){
    response = JSON.parse(response);
    if (response[names[0]].score == 1){
        document.getElementById(names[0] + '_viewanswer').click();
    }
}
</script></p>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
catsoop.all_questions = ['example_a_1', 'example_a_2', 'example_b_2', 'example_b_3', 'example_b_4', 'example_b_5', 'example_c_1', 'example_c_2'];
catsoop.username = 'gvargas1';
catsoop.this_path = 'https://py.mit.edu/spring24/readings/inheritance';
catsoop.path_info = ['spring24', 'readings', 'inheritance'];
catsoop.course = 'spring24';
catsoop.url_root = 'https://py.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = ["example_a_1", "example_a_2", "example_b_2", "example_b_3", "example_b_4", "example_b_5", "example_c_1", "example_c_2"];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

// @license-end</script>
<div id="cs_footnotes" style="display:none;"></div>
</div>
</div>
<div class="cs_right_menu"></div>
</div>
<footer>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation"><li><a href="https://py.mit.edu/spring24">Home</a></li><li><a href="https://py.mit.edu/spring24/readings">Course Readings</a></li><li><a href="https://py.mit.edu/spring24/readings/inheritance">Inheritance and Object-oriented Design</a></li></nav>
<div class="cs_footer">
      This page was last updated on Monday April 22, 2024 at 05:58:49 PM (revision <code>7e7a19b0</code>).<br/> <br/>
<center><img src="https://py.mit.edu/_static/spring24/readings/cc-by-sa.svg" style="width: 2cm;"/></center><div style="max-width: 600px; margin-bottom:1em; margin-left:auto; margin-right:auto;">Except where otherwise noted, these readings are licensed under a<br/><a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" target="_blank">Creative Commons BY-SA 4.0</a> license.  Portions of the readings were derived from<br/>or inspired by the <a href="https://web.mit.edu/6.031/www/sp24/" target="_blank">6.031 Course Notes</a>, the <a href="https://hz.mit.edu/catsoop/6.145" target="_blank">6.145 Course Notes</a>, and the 6.01 Course Notes.
</div>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.org" target="_blank">CAT-SOOP</a> v19.0.6+hg.3.118aecfb "Korat" (LTS) (development snapshot).<br/>
      CAT-SOOP is <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>, available under the terms<br/>of the <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br/>
<a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a><br/>
<a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</div>
</footer>
</body>
</html>

