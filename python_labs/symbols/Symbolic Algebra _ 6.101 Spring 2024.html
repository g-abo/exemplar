<!DOCTYPE html>

<html>
<head>
<!-- This page was generated by CAT-SOOP 19.0.6+hg.3.118aecfb.  miau. -->
<meta charset="utf-8"/>
<title>Symbolic Algebra | 6.101 Spring 2024</title>
<link href="https://py.mit.edu/_static/spring24/logo.gif" rel="icon" type="image/gif"/>
<!-- include catsoop base css -->
<link href="https://py.mit.edu/_static/_base/themes/base.css" rel="stylesheet" type="text/css"/>
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    function toggleAttribute(elt, attr){
        elt.setAttribute(attr, elt.getAttribute(attr) === "true" ? "false" : "true");
    }

    catsoop.topMenuFocus = function(event) {
        var elt = event.target;
        var target = event.relatedTarget;
        if (elt.classList.contains('menu-submenu')){
            var topmenu = elt.parentNode.parentNode;
            if (target && !target.classList.contains("menu-submenu") && target !== topmenu.children[1]) {
                clearMenu(topmenu);
            }
        }else if (!target.classList.contains('cs_top_menu_item')){
            clearMenu(elt.parentNode);
        }
    }

    window.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu){
       menu.children[1].checked = false;
    }
    // @license-end
    </script>
<!-- dark mode -->
<script src="https://py.mit.edu/_static/_base/js/darkreader/darkreader.min.js" type="text/javascript"></script>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.dark_mode_settings = null;
    if (catsoop.dark_mode_settings === null){
        catsoop.dark_mode_settings = JSON.parse(localStorage.getItem('catsoop_dark_mode_settings'));
        if (catsoop.dark_mode_settings === null){
            catsoop.dark_mode_settings = {'mode': 'disabled', 'brightness': 100, 'contrast': 90, 'sepia': 10, 'grayscale': 0};
        }
    }
    localStorage.setItem('catsoop_dark_mode_settings', JSON.stringify(catsoop.dark_mode_settings));
    catsoop.dark_mode = catsoop.dark_mode_settings.mode;
    delete catsoop.dark_mode_settings.mode;
    if (catsoop.dark_mode === 'enabled' || catsoop.dark_mode === 'auto'){
        DarkReader[catsoop.dark_mode == 'enabled' ? 'enable' : 'auto'](catsoop.dark_mode_settings);
    }
    
    document.addEventListener("DOMContentLoaded", function(event) {
        if (DarkReader.isEnabled()) {
            var invertfilter = 'invert(100%) hue-rotate(180deg)' +
                               ' brightness(' + catsoop.dark_mode_settings.brightness + '%)' +
                               ' contrast(' + catsoop.dark_mode_settings.contrast + '%)' +
                               ' grayscale(' + catsoop.dark_mode_settings.grayscale + '%)' +
                               ' sepia(' + catsoop.dark_mode_settings.sepia + '%)'
            var inverter = document.createElement('style');
            inverter.innerText = 'img.catsoop-darkmode-invert, video.catsoop-darkmode-invert {filter: ' + invertfilter + ';}\n\n'
            document.head.appendChild(inverter);
        }
    });
    // @license-end
    </script>
<!-- load in mathjax and CAT-SOOP-specific math rendering  -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    MathJax = {
      startup: {
        typeset: false,
      }
    }

    catsoop.render_math = function (elt) {
        if(elt.classList.contains('cs_displaymath')){
            var b = "\\[";
            var e = "\\]";
        }else{
            var b = "\\(";
            var e = "\\)";
        }
        elt.innerText = b + elt.innerText + e;
        MathJax.typeset([elt]);
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function (elt){
        if (elt === null) {
            return;
        }
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while(mathelts.length > 0){
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
          catsoop.render_all_math(document);
    });
    // @license-end
    </script>
<script id="MathJax-script" src="https://py.mit.edu/_static/_base/js/mathjax/tex-chtml-full-speech.js"></script>
<!-- load in diagram stuff -->
<script src="https://py.mit.edu/_static/_base/js/cs_diagrams.js" type="text/javascript"></script>
<script type="text/javascript">
        catsoop.diagram_sources = {};
    </script>
<!-- Syntax Highlighting -->
<script src="https://py.mit.edu/_static/_base/js/highlight/highlight.min.js" type="text/javascript"></script>
<script src="https://py.mit.edu/_static/_base/js/highlightjs-line-numbers.js" type="text/javascript"></script>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.syntax_highlighting = function (elt) {
        if (elt === null) {
            return;
        }
        elt.querySelectorAll('pre > code:not(.highlighted)').forEach((block) => {
            hljs.highlightBlock(block);
            var wrap = document.createElement("section");
            wrap.setAttribute("aria-label", "Code block");
            block.parentNode.replaceWith(wrap);
            wrap.append(block.parentNode);
            block.classList.add('highlighted');
        });
        elt.querySelectorAll('code.highlight-lines').forEach(function(b){
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0){
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
            b.classList.remove('highlight-lines');
        });
    }
    window.addEventListener('DOMContentLoaded', function(){
        catsoop.syntax_highlighting(document);
    });
    // @license-end
    </script>
<style>
      :root {
        --cs-base-bg-color: #0350ba;
        --cs-light-bg-color: #629ced;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<style>
.cs_top_menu_item {
  font-size: 0.88rem;
}
div.dropdown {
  -moz-transform: translateY(-1px);
}
img {
  max-width:100% !important;
}
</style>
<style>
[id^=cs_qdiv].question-lab101 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style2 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style2 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style1 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style1 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style3 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style3 [id$=nsubmits_left] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style4 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_style4 [id$=nsubmits_left] {
  display: none;
}
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.addEventListener("DOMContentLoaded", function(){
    sessionStorage.setItem("last-non-settings", catsoop.this_path);
});
// @license-end
</script>
<script type="text/javascript">
function reload_code_submit() {
    fetch("?action=render_single_question&name=code_submit")
      .then((result) => {return result.text();})
      .then(result => {
        document.getElementById("cs_qdiv_code_submit").innerHTML = result;
        catsoop.run_all_scripts("cs_qdiv_code_submit");
       });
}

</script>
<script src="https://py.mit.edu/_static/_handler/default/cs_ajax.js" type="text/javascript"></script>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
</head>
<body style="margin: 0px;">
<header id="cs_header">
<div aria-role="menubar" class="nav-container">
<div class="cs_header_text"><a href="https://py.mit.edu/spring24"><img src="https://py.mit.edu/_static/spring24/logo.gif"/> 6.101</a></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_a47c0b052b07cf284d5c1a10c5c01779">Information<span aria-hidden="true" class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_a47c0b052b07cf284d5c1a10c5c01779" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox"/>
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/basics" onblur="catsoop.topMenuFocus(event);" role="menuitem">Basics and Schedule</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/grading" onblur="catsoop.topMenuFocus(event);" role="menuitem">Grading Policies</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/academic_integrity" onblur="catsoop.topMenuFocus(event);" role="menuitem">Academic Integrity</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/help" onblur="catsoop.topMenuFocus(event);" role="menuitem">Getting Help</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/staff" onblur="catsoop.topMenuFocus(event);" role="menuitem">Staff List</a></div></div>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/readings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Readings</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/queue" onblur="catsoop.topMenuFocus(event);" role="menuitem">Queue</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/progress" onblur="catsoop.topMenuFocus(event);" role="menuitem">Progress</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/infrastructure" onblur="catsoop.topMenuFocus(event);" role="menuitem">Infrastructure</a>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_642a2edbf159466086177d546846c245">gvargas1<span aria-hidden="true" class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_642a2edbf159466086177d546846c245" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox"/>
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/ssh_keys" onblur="catsoop.topMenuFocus(event);" role="menuitem">Manage SSH Keys</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/_util/user_settings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Settings</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/labs/symbolic_algebra?loginaction=logout" onblur="catsoop.topMenuFocus(event);" role="menuitem">Log Out</a></div></div><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_top_navigation" id="cs_breadcrumbs"><li><a href="https://py.mit.edu/spring24">Home</a></li><li><a href="https://py.mit.edu/spring24/labs/symbolic_algebra">Symbolic Algebra</a></li></nav>
<div class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<div class="cs_page_body" role="main">
<center><h1 class="cs_content_header">Symbolic Algebra</h1></center>
<style>
html {
    color: #333;
}
</style>
<h2 aria-hidden="true">Table of Contents</h2><ul aria-label="Table of Contents" role="navigation"><li><a href="#_preparation">1) Preparation</a></li><li><a href="#_introduction">2) Introduction</a></li><li><a href="#_basic_symbols">3) Basic Symbols</a></li><li><a href="#_binary_operations">4) Binary Operations</a></li><li><a href="#_display">5) Display</a></li><ul><li><a href="#_parenthesization">5.1) Parenthesization</a></li></ul><li><a href="#_using_python_operators_with_symbolic_expressions">6) Using Python Operators with Symbolic Expressions</a></li><li><a href="#_evaluation">7) Evaluation</a></li><li><a href="#_equality">8) Equality</a></li><li><a href="#_derivatives">9) Derivatives</a></li><li><a href="#_simplification">10) Simplification</a></li><li><a href="#_parsing_symbolic_expressions">11) Parsing Symbolic Expressions</a></li><ul><li><a href="#_tokenizing">11.1) Tokenizing</a></li><li><a href="#_parsing">11.2) Parsing</a></li></ul><li><a href="#_code_submission">12) Code Submission</a></li><li><a href="#_additional_optional_extensions">13) Additional (Optional) Extensions</a></li></ul>
<p><a class="anchor" name="catsoop_section_1"></a><a class="anchor" name="_preparation"></a><h2 class="cs_section_title">1) Preparation<a class="cs_permalink" href="#_preparation">§</a></h2></p>
<div class="callout callout-note"><div class="callout-title">Note</div>
<p>You may wish to read the whole lab before implementing
any code, so that you can make a more complete plan before diving in.  Try
making a plan for your code, including the following:</p><ul>
<li>Which classes are you going to implement?  Which classes are subclasses of which classes?</li>
<li>What attributes are stored in each class?</li>
<li>What methods does each class have?</li>
</ul><p>As you work through, be on the lookout for opportunities to take advantage
of inheritance to avoid repetitious code!</p><p>Throughout the lab, you should not use Python's <code>eval</code>,
<code>exec</code>, <code>isinstance</code>, or <code>type</code> built-ins, nor should you be explicitly
checking for the type of any particular object, except where we have indicated
that it is okay to do so.  Instead of explicitly checking the types of our
objects and determining our behavior based on those results, our goal is to
use Python's own mechanism of method/attribute lookup to implement these
different behaviors without the need to do any type checking of our own.</p><p>Things that are considered "explicit type checking" include not only checks
using <code>type</code> or <code>isinstance</code>, but also using unique class attributes as a
way to ask the same question one would ask of
<code>isinstance</code> or <code>type</code> (what class is this object an instance of?).</p>
</div>
<p>This lab assumes you have Python 3.11 or later installed on your machine (3.12
recommended).</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="symbolic_algebra.zip" href="https://py.mit.edu/spring24/lab_distribution.zip?path=%5B%22spring24%22%2C+%22labs%22%2C+%22symbolic_algebra%22%5D"><tt>symbolic_algebra.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit
at the end of this lab.  Importantly, you should not add any imports
to the file.</p>
<p>Note that passing all of the tests on the server will require that
your code runs reasonably efficiently.</p>
<p>Your raw score for this lab will be counted out of 5 points.  Your score for
the lab is based on:</p>
<ul>
<li>passing the style check (1 point)</li>
<li>passing the tests in <code>test.py</code> (4 points)</li>
</ul>
<div class="callout callout-error"><div class="callout-title">Reminder: Academic Integrity</div>
<p>Please also review the <a href="https://py.mit.edu/spring24/info/academic_integrity">academic-integrity policies</a> before
continuing.  In particular, <strong>note that you are not allowed to use any code
other than that which you have written yourself, including code from online sources.</strong></p>
</div>
<p><a class="anchor" name="catsoop_section_2"></a><a class="anchor" name="_introduction"></a><h2 class="cs_section_title">2) Introduction<a class="cs_permalink" href="#_introduction">§</a></h2></p>
<p>In this lab, we will develop a Python framework for symbolic algebra.  In such
a system, algebraic expressions including variables and numbers are not
immediately evaluated but rather are stored in symbolic form.</p>
<p>These kinds of systems abound in the "real world," and they can be incredibly
useful.  Examples of similar systems include Wolfram Alpha and <a href="https://www.sympy.org/en/index.html">Sympy</a> (a really impressive
open-source Python module for symbolic algebra).  We won't quite approach the
sophistication of those kinds of packages in this lab, but we'll get a pretty
good start in that direction!</p>
<p>We'll start by implementing support for basic arithmetic (<code>+</code>, <code>-</code>, <code>*</code>, and
<code>/</code>) on variables and numbers, and then we'll add support for simplification
and differentiation of these symbolic expressions.  Ultimately, this system
will be able to support interactions such as the following:</p>
<pre><code class="language-py">&gt;&gt;&gt; x = Var('x')
&gt;&gt;&gt; y = Var('y')
&gt;&gt;&gt; print(x + y)
x + y
&gt;&gt;&gt; z = x + 2*x*y + x
&gt;&gt;&gt; print(z)
x + 2 * x * y + x
&gt;&gt;&gt; print(z.deriv('x'))  # derivative of z with respect to x
1 + 2 * x * 0 + y * (2 * 1 + x * 0) + 1
&gt;&gt;&gt; print(z.deriv('x').simplify())
1 + y * 2 + 1
&gt;&gt;&gt; print(z.deriv('y'))  # derivative of z with respect to y
0 + 2 * x * 1 + y * (2 * 0 + x * 0) + 0
&gt;&gt;&gt; print(z.deriv('y').simplify())
2 * x
&gt;&gt;&gt; z.eval({'x': 3, 'y': 7})  # evaluate an expression with particular values for the variables
48
</code></pre>
<p><a class="anchor" name="catsoop_section_3"></a><a class="anchor" name="_basic_symbols"></a><h2 class="cs_section_title">3) Basic Symbols<a class="cs_permalink" href="#_basic_symbols">§</a></h2></p>
<p>In this week's code distribution, we have provided a very minimal skeleton,
containing a small definition for three classes:</p>
<ul>
<li><code>Symbol</code> will be our base class; all other classes we create will inherit from this class, and any behavior that is common between all expressions (that is, all behavior that is not unique to a particular <em>kind</em> of symbolic expression) should be implemented here.</li>
<li>Instances of <code>Var</code> represent variables (such as <span class="cs_math_to_render">x</span> or <span class="cs_math_to_render">y</span>).</li>
<li>Instances of <code>Num</code> represent numbers within symbolic expressions.</li>
</ul>
<p>Take a look at the <code>Var</code> and <code>Num</code> classes.  Note that each has <code>__init__</code>,
<code>__repr__</code>, and <code>__str__</code> defined for you already.  Importantly, while you
are welcome to add additional machinery to these objects if you want to, it
will be important that the existing instance variables continue to work as
they do in the provided skeletons (our test suite relies on this behavior).</p>
<p><a class="anchor" name="catsoop_section_4"></a><a class="anchor" name="_binary_operations"></a><h2 class="cs_section_title">4) Binary Operations<a class="cs_permalink" href="#_binary_operations">§</a></h2></p>
<p>So far, our system is somewhat uninteresting.  It lets us represent variables
and numbers, but in order to be able to represent meaningful expressions, we
also need ways of combining these primitive symbols together.  In particular,
we will represent these kinds of combinations as <em>binary operations</em>.  You
should implement a class called <code>BinOp</code> to represent a binary operation.
Because it is a type of symbolic expression, <code>BinOp</code> should be a subclass of
<code>Symbol</code>.</p>
<p>We will start with four subclasses of <code>BinOp</code>:</p>
<ul>
<li><code>Add</code>, to represent an addition</li>
<li><code>Sub</code>, to represent a subtraction</li>
<li><code>Mul</code>, to represent a multiplication</li>
<li><code>Div</code>, to represent a division</li>
</ul>
<p>By virtue of being binary operations, each instance of any of these classes
should have two instance variables:</p>
<ul>
<li><code>left</code>: a <code>Symbol</code> instance representing the left-hand operand</li>
<li><code>right</code>: a <code>Symbol</code> instance representing the right-hand operand</li>
</ul>
<p>For example, <code>Add(Add(Var('x'), Num(3)), Num(2))</code> represents the symbolic
expression <span class="cs_math_to_render">x + 3 + 2</span>.  The <code>left</code> attribute of this instance should be the
<code>Add</code> instance <code>Add(Var('x'), Num(3))</code>, and the <code>right</code> attribute
should be the <code>Num</code> instance <code>Num(2)</code>.</p>
<p>Importantly, instances of <code>BinOp</code> (or subclasses thereof) <strong>should <em>only</em> have
these two instance attributes</strong>.  You are welcome to store additional
information in class attributes, but each instance should only store <code>left</code> and
<code>right</code>.</p>
<div class="question"><b>Check Yourself:</b><p>The structure of each of these classes' <code>__init__</code> methods is likely to be
almost the same (if not exactly the same).  What does that suggest about
how/where you should implement <code>__init__</code>?</p><p><span id="queue_checkyourself_1"></span></p></div>
<p>These constructors should also accept integers, floats, or strings as their arguments.
<code>Add(2, 'x')</code>, for example, should create an instance <code>Add(Num(2), Var('x'))</code>.
<strong>It is okay to use <code>isinstance</code> or <code>type</code> in this context, to check if the
arguments passed to the constructor are strings or numbers.</strong></p>
<p>Note: it is good style to include docstrings for classes. According to <a href="https://peps.python.org/pep-0257/">PEP257
style guidelines</a>, "The docstring for a class
should summarize its behavior and list the public methods and instance variables."
For our purposes, a one-line sentence summary should suffice.</p>
<p><a class="anchor" name="catsoop_section_5"></a><a class="anchor" name="_display"></a><h2 class="cs_section_title">5) Display<a class="cs_permalink" href="#_display">§</a></h2></p>
<p>As of right now, attempting to print an instance of <code>BinOp</code> (or a subclass
thereof) will not really tell us much useful information.  In this section,
we'll improve on Python's ability to display these objects.</p>
<p>Python has two different ways to get a representation of an object as
a string. First, <code>repr(obj)</code> (which calls <code>obj.__repr__()</code> under-the-hood) should
produce a string containing a representation that, when passed back into
Python, would evaluate to an equivalent object. Second, <code>str(obj)</code> (which calls
<code>obj.__str__()</code> under-the-hood) should produce a human-readable string
representation.</p>
<div class="question"><b>Check Yourself:</b><p>Take a look at the <code>__repr__</code> and <code>__str__</code> methods in <code>Var</code> and <code>Num</code>.  What
is the difference between them?</p><p><span id="queue_checkyourself_2"></span></p></div>
<p>Implement <code>__repr__</code> and <code>__str__</code> in appropriate places (avoiding repeating
code where possible), such that, for any symbolic expression <code>sym</code>, <code>repr(sym)</code>
will produce a string containing a Python expression that, when evaluated,
will result in a symbolic expression equivalent to <code>sym</code>.  Similarly, <code>str(sym)</code>
should produce a human-readable representation, given by
<code>left_string + ' ' + operator + ' ' + right_string</code>, where <code>left_string</code> and <code>right_string</code> are the
string representations of the <code>left</code> and <code>right</code> attributes, respectively, and
<code>operator</code> is a string representation of the operator associated with the
specific class in question.  For example:</p>
<pre><code class="language-py">&gt;&gt;&gt; z = Add(Var('x'), Sub(Var('y'), Num(2)))
&gt;&gt;&gt; repr(z)  # notice that this result, if fed back into Python, produces an equivalent object.
"Add(Var('x'), Sub(Var('y'), Num(2)))"
&gt;&gt;&gt; str(z)  # this result cannot necessarily be fed back into Python, but it looks nicer.
'x + y - 2'
</code></pre>
<p>Note: The test cases are checking that your code is avoiding
unnecessary repetition. You will need to create an additional class attribute
in the subclasses of <code>BinOp</code> that stores the operation associated with the
class ("+", "-", etc.). <b> This class attribute string should not contain spaces!</b></p>
<p>Note: you may access a string containing the class name using the following syntax:</p>
<pre><code class="language-py">&gt;&gt;&gt; z = Num(2)
&gt;&gt;&gt; z.__class__.__name__
Num
</code></pre>
<p><a class="anchor" name="catsoop_section_5_1"></a><a class="anchor" name="_parenthesization"></a><h3 class="cs_section_title">5.1) Parenthesization<a class="cs_permalink" href="#_parenthesization">§</a></h3></p>
<p>Note that, while a <code>__repr__</code> implementation that follows the rules described
above works well for complicated expressions (as seen in the expressions
in the last example above), a <code>__str__</code> implementation that
follows those rules results in some possible ambiguities or erroneous
interpretations.  In particular, consider the expression
<code>Mul(Var('x'), Add(Var('y'), Var('z')))</code>.  According to the rules above for
<code>__str__</code>, that
expression's string representation would be <code>"x * y + z"</code>, but the internal
structure of the expression suggests something different!  It would be nice for
the string representation instead to be <code>"x * (y + z)"</code>, to better align with the
actual structure represented by the expression.</p>
<p>To address this, we add rules for parenthesization as follows, where <code>B</code> is the <code>BinOp</code>
instance whose string representation we are finding<a class="anchor" name="catsoop_footnote_ref_1"></a><a href="#catsoop_footnote_1"><sup>1</sup></a>:</p>
<ul>
<li>If <code>B.left</code> and/or <code>B.right</code>
themselves represent expressions with lower precedence than <code>B</code>, wrap their string
representations in parentheses (here, precedence is defined using the
standard
"<a href="https://en.wikipedia.org/wiki/Order_of_operations#Mnemonics" target="_blank">PEMDAS</a>"
ordering).</li>
<li>As a special case, if <code>B</code> represents a subtraction or a division and <code>B.right</code>
represents an expression with <em>the same precedence</em> as <code>B</code>, wrap <code>B.right</code>'s string
representation in parentheses.</li>
</ul>
<p>Individual numbers or variables should never be wrapped in parentheses.</p>
<div class="question"><b>Check Yourself:</b><p>Think about the rules for parenthesization described above in terms of algebraic expressions and
work through parenthesizing some example expressions by hand to get a feel for
how these rules work.  Do these rules seem to work in a general sense -- will they
always work across
different operations and across different levels of expression complexity?  Why do
they work?  Why are subtraction and division treated differently from addition
and multiplication?</p><p><span id="queue_checkyourself_3"></span></p></div>
<div class="question"><b>Check Yourself:</b><p><p>Importantly, you should implement the behavior for <strong>str</strong> and <strong>repr</strong> without
explicitly checking the type of <code>self</code>, <code>self.left</code>, or <code>self.right</code>.</p>
<p>In order to pass the test cases, your code will need to do this by storing a couple of
additional class attributes:</p>
<ul>
<li>All symbols should have a class attribute called <code>precedence</code>, which should be a number representing precedence.  Greater numbers should represent greater precedence.
What classes should have the highest precedence? What classes should have the
same precedence?</li>
<li>All binary operations should have a class attribute called <code>wrap_right_at_same_precedence</code>, which should be a Boolean that indicates whether to add parentheses
around the right side of the expression in the special case described above.
</li></ul></p><p><span id="queue_checkyourself_4"></span></p></div>

<p><a class="anchor" name="catsoop_section_6"></a><a class="anchor" name="_using_python_operators_with_symbolic_expressions"></a><h2 class="cs_section_title">6) Using Python Operators with Symbolic Expressions<a class="cs_permalink" href="#_using_python_operators_with_symbolic_expressions">§</a></h2></p>
<p>Entering expressions of the form <code>Add(Var('x'), Add(Num(3), Num(2)))</code> can get a
little bit tedious.  It would be much nicer, for example, to be able to enter
that expression as <code>Var('x') + Num(3) + Num(2)</code>.</p>
<p>Add methods to appropriate class(es) in your file such that, for any
arbitrary symbolic expressions <code>E1</code> and <code>E2</code>:</p>
<ul>
<li><code>E1 + E2</code> results in an instance <code>Add(E1, E2)</code><br/>(note: you can override the behavior of <code>+</code> with the <code>__add__</code> and <code>__radd__</code> "dunder" methods)</li>
<li><code>E1 - E2</code> results in an instance <code>Sub(E1, E2)</code><br/>(note: you can override the behavior of <code>-</code> with the <code>__sub__</code> and <code>__rsub__</code> "dunder" methods)</li>
<li><code>E1 * E2</code> results in an instance <code>Mul(E1, E2)</code><br/>(note: you can override the behavior of <code>*</code> with the <code>__mul__</code> and <code>__rmul__</code> "dunder" methods)</li>
<li><code>E1 / E2</code> results in an instance <code>Div(E1, E2)</code><br/>(note: you can override the behavior of <code>/</code> with the <code>__truediv__</code> and <code>__rtruediv__</code> "dunder" methods)</li>
</ul>
<div class="question"><b>Check Yourself:</b><p>To pass the test cases you will need to avoid duplicating code when implementing these behaviors!  In what
class(es) should you implement <code>__add__</code>?</p><p><span id="queue_checkyourself_5"></span></p></div>
<p>These behaviors should work so long as <em>at least one</em> of <code>E1</code> and <code>E2</code> is a
symbolic expression, and the other is either a symbolic expression, a number,
or a string.</p>
<p>For example:</p>
<pre><code class="language-py">&gt;&gt;&gt; Var('a') * Var('b')
Mul(Var('a'), Var('b'))
&gt;&gt;&gt; 2 + Var('x')
Add(Num(2), Var('x'))
&gt;&gt;&gt; Num(3) / 2
Div(Num(3), Num(2))
&gt;&gt;&gt; Num(3) + 'x'
Add(Num(3), Var('x'))
</code></pre>
<div class="callout callout-note"><div class="callout-title">Note</div>
<p>We have seen <code>__add__</code>, <code>__sub__</code>, <code>__mul__</code>, and <code>__truediv__</code> before, but
what about the versions with the <code>r</code> on the front of them?  They represent
the same operations but with the operands swapped.</p><p>It turns out that Python has a small set of rules for deciding which of
these methods to call in various situations.  For example, consider the small
expression <code>x + y</code>.  In order to decide what to do here, Python will:</p><ol>
<li>If <code>x</code> is not a built-in type, and it has an <code>__add__</code> method, invoke <code>x.__add__(y)</code>.</li>
<li>Otherwise, if <code>x</code> and <code>y</code> are of different types, and if <code>y</code> has an <code>__radd__</code> method, invoke <code>y.__radd__(x)</code>.</li>
</ol><p>In the context of our program, implementing both <code>__add__</code> and <code>__radd__</code> will allow both of the following expressions to work:</p><pre><code class="language-python">&gt;&gt;&gt; x = Var('x')
&gt;&gt;&gt; x + 2  # here, __add__ will be called
Add(Var('x'), Num(2))
&gt;&gt;&gt; 2 + x  # here, __radd__ will be called
Add(Num(2), Var('x'))
</code></pre><p>Feel free to ask us if you have questions about this!  The page of the
Python documentation about the <a href="https://docs.python.org/3/reference/datamodel.html">Python Data
Model</a> has more information
about these methods as well.</p>
</div>
<p>Note that you should be able to implement this behavior without additional
explicit type checking.</p>
<p><a class="anchor" name="catsoop_section_7"></a><a class="anchor" name="_evaluation"></a><h2 class="cs_section_title">7) Evaluation<a class="cs_permalink" href="#_evaluation">§</a></h2></p>
<p>Next, we'll add support for evaluating expressions for particular values of
variables.  Add method(s) to your class(es) such that, for any symbolic
expression <code>sym</code>, <code>sym.eval(mapping)</code> will find a numerical value (meaning a
<code>float</code> or an <code>int</code>, not an instance of <code>Num</code>) for the given expression.  <code>mapping</code>
should be a dictionary mapping variable names to values.</p>
<p>For example:</p>
<pre><code class="language-py">&gt;&gt;&gt; z = Add(Var('x'), Sub(Var('y'), Mul(Var('z'), Num(2))))
&gt;&gt;&gt; z.eval({'x': 7, 'y': 3, 'z': 9})
-8
&gt;&gt;&gt; z.eval({'x': 3, 'y': 10, 'z': 2})
9
</code></pre>
<p>In the test cases we'll run, the given dictionary will not always contain all of
the bindings needed to evaluate the expression fully. The test cases
will expect you to raise a <code>NameError</code>, rather than just letting Python's normal
exceptions happen, if a provided dictionary does not contain all the necessary
bindings.</p>
<p>Hint: in order to avoid repetition, you might consider defining helper methods
in your <code>BinOp</code> subclasses that performs the desired Python operation on the left
and right sub-expressions.</p>
<p>Note that representing mathematically undefined expressions like <code>0 / 0</code> or
<code>x / 0</code> using our <code>Symbol</code> classes should not cause errors. The tests do not attempt
to evaluate undefined expressions, but you may add code to handle these cases
if you want.</p>
<p><a class="anchor" name="catsoop_section_8"></a><a class="anchor" name="_equality"></a><h2 class="cs_section_title">8) Equality<a class="cs_permalink" href="#_equality">§</a></h2></p>
<p>Next, we'll add support for checking if two expressions are equal.</p>
<p>Currently, if you try running the following example at the bottom of your
<code>lab.py</code> file you should see the commented Boolean values output.</p>
<pre><code class="language-python">a = Num(4)
b = Num(4)
print(a == b)        # False
print(a == Num(4.0)) # False
print(a == a)        # True
print(4 == 4.0)      # True
</code></pre>
<p>Even though Python can normally compare floats and ints for equality, currently
instances of our <code>Symbol</code> class ignore the inner attributes of <code>a</code> and <code>b</code>.
Instead, by default classes in Python check for equality by determining whether
the two objects share the same id using  <a href="https://docs.python.org/3/reference/expressions.html#is"><code>is</code></a>.
The <code>is</code> keyword essentially tests if two references are pointing to the same object in
memory (which is why <code>a == a</code> evaluates to True!)</p>
<p>In order to specify what we want equality to mean for <code>Num</code> (and other Symbol
objects), we need to implement the <code>__eq__</code> <a href="https://docs.python.org/3/reference/datamodel.html#object.__eq__">dunder method</a> to overide Python's default behavior. For the purposes
of this lab, we will ignore simplifying the expression and the associative
property and determine equality by testing whether the expression contains
equivalent objects in the same order.</p>
<p>For example:</p>
<pre><code class="language-python">&gt;&gt;&gt; Sub(Num(4), Var('y')) == Sub(Num(4), Var('y'))
True
&gt;&gt;&gt; Add(Num(4), Num(1)) == Num(5)
False
&gt;&gt;&gt; Mul(Num(4), Var('y')) == Mul(Var('y'), Num(4))
False
&gt;&gt;&gt; Div(Num(1), Add(Num(4.0), Var('z'))) == Div(Num(1.0), Add(Num(4), Var('z')))
True
&gt;&gt;&gt; Num(4) != Var('z')
True # implementing equality correctly also handles inequality checks as well!
</code></pre>
<p>In order to pass the test cases, your code will need to both correctly
check for equality (and inequality!) as well as avoid unnecessary
repetition / implementations of the <code>__eq__</code> method. You may however, use <code>type</code>
or <code>isinstance</code> as part of this method.</p>
<p><a class="anchor" name="catsoop_section_9"></a><a class="anchor" name="_derivatives"></a><h2 class="cs_section_title">9) Derivatives<a class="cs_permalink" href="#_derivatives">§</a></h2></p>
<p>Next, we'll make the computer do our 18.01 homework for us.  Well, not quite.
But we'll implement support for symbolic differentiation.  In particular, we
would like to implement the following rules for partial derivatives (where <span class="cs_math_to_render">x</span>
is an arbitrary variable, <span class="cs_math_to_render">c</span> is a constant or a variable other than <span class="cs_math_to_render">x</span>, and
<span class="cs_math_to_render">u</span> and <span class="cs_math_to_render">v</span> are arbitrary expressions):</p>
<p><div class="cs_displaymath cs_math_to_render" style="text-align:center;padding-bottom:10px;">\frac{\partial}{\partial x}c = 0</div></p>
<p><div class="cs_displaymath cs_math_to_render" style="text-align:center;padding-bottom:10px;">\frac{\partial}{\partial x}x = 1</div></p>
<p><div class="cs_displaymath cs_math_to_render" style="text-align:center;padding-bottom:10px;">\frac{\partial}{\partial x}\left(u + v\right) = \frac{\partial}{\partial x}u + \frac{\partial}{\partial x}v</div></p>
<p><div class="cs_displaymath cs_math_to_render" style="text-align:center;padding-bottom:10px;">\frac{\partial}{\partial x}\left(u - v\right) = \frac{\partial}{\partial x}u - \frac{\partial}{\partial x}v</div></p>
<p><div class="cs_displaymath cs_math_to_render" style="text-align:center;padding-bottom:10px;">\frac{\partial}{\partial x}\left(u\cdot v\right) = u\left(\frac{\partial}{\partial x}v\right) + v\left(\frac{\partial}{\partial x}u\right)</div></p>
<p><div class="cs_displaymath cs_math_to_render" style="text-align:center;padding-bottom:10px;">\frac{\partial}{\partial x}\left(\frac{u}{v}\right) = \frac{v\left(\frac{\partial}{\partial x}u\right) - u\left(\frac{\partial}{\partial x}v\right)}{v^2}</div></p>
<p>Even though it may not be obvious from looking at first glance, these
mathematical definitions are recursive! That is to say, partial derivatives of
compound expressions are defined in terms of partial derivatives of component
parts, which may suggest strategies for implementing these rules in your
program!</p>
<p>Implement differentiation by adding a method called <code>deriv</code> to your classes.
This method should take a single argument (a string containing the name of the
variable with respect to which we are differentiating), and it should return a
symbolic expression representing the result of the differentiation.  For example:</p>
<pre><code class="language-py">&gt;&gt;&gt; x = Var('x')
&gt;&gt;&gt; y = Var('y')
&gt;&gt;&gt; z = 2*x - x*y + 3*y
&gt;&gt;&gt; print(z.deriv('x'))  # unsimplified, but the following gives us (2 - y)
2 * 1 + x * 0 - (x * 0 + y * 1) + 3 * 0 + y * 0
&gt;&gt;&gt; print(z.deriv('y'))  # unsimplified, but the following gives us (-x + 3)
2 * 0 + x * 0 - (x * 1 + y * 0) + 3 * 1 + y * 0
&gt;&gt;&gt; w = Div(x, y)
&gt;&gt;&gt; print(w.deriv('x'))
(y * 1 - x * 0) / (y * y)
&gt;&gt;&gt; print(repr(w.deriv('x')))  # deriv always returns a new Symbol object
Div(Sub(Mul(Var('y'), Num(1)), Mul(Var('x'), Num(0))), Mul(Var('y'), Var('y')))
</code></pre>
<p>Importantly, we would like computing any derivative to result in a symbolic
expression.  Make sure that your code has this property!</p>
<p><a class="anchor" name="catsoop_section_10"></a><a class="anchor" name="_simplification"></a><h2 class="cs_section_title">10) Simplification<a class="cs_permalink" href="#_simplification">§</a></h2></p>
<p>The above code works, but it leads to output that is not very readable (it is
very difficult to see, for example, that the above examples correspond to <span class="cs_math_to_render">2-y</span>
and <span class="cs_math_to_render">-x+3</span>, respectively).  To help with this, add a method called
<code>simplify</code> to your class(es).  <code>simplify</code> should take no arguments, and it
should return a simplified form of the expression, according to the following
rules:</p>
<ul>
<li>Any binary operation on two numbers should simplify to a single number containing the result.</li>
<li>Adding <span class="cs_math_to_render">0</span> to (or subtracting <span class="cs_math_to_render">0</span> from) any expression <span class="cs_math_to_render">E</span> should simplify to <span class="cs_math_to_render">E</span>.</li>
<li>Multiplying or dividing any expression <span class="cs_math_to_render">E</span> by <span class="cs_math_to_render">1</span> should simplify to <span class="cs_math_to_render">E</span>.</li>
<li>Multiplying any expression <span class="cs_math_to_render">E</span> by <span class="cs_math_to_render">0</span> should simplify to <span class="cs_math_to_render">0</span>.</li>
<li>Dividing <span class="cs_math_to_render">0</span> by any expression <span class="cs_math_to_render">E</span> should simplify to <span class="cs_math_to_render">0</span>.</li>
<li>A single number or variable always simplifies to itself.</li>
</ul>
<div class="question"><b>Check Yourself:</b><p>Think about the simplification rules described above in terms of algebraic expressions and
work through simplifying some example expressions by hand to get a feel for how
these rules work.  Do these rules seem to work in a general sense -- will they always
work across our different operations and across different levels of expression complexity,
producing sensible simplifications?
Why?</p><p><span id="queue_checkyourself_6"></span></p></div>
<p>Your simplification method does not need to handle cases like <span class="cs_math_to_render">3 + (x + 2)</span>,
where the terms that could be combined are separated from each other in the
tree.  In fact, our test cases are expecting <strong>only</strong> the above rules to be
implemented.  Implementing extra rules here can be a great opportunity for
extra practice, but it will cause some test cases to fail (so maybe best to
implement such things only after submitting!).</p>
<p>For example, continuing from above:</p>
<pre><code class="language-py">&gt;&gt;&gt; z = 2*x - x*y + 3*y
&gt;&gt;&gt; print(z.simplify())
2 * x - x * y + 3 * y
&gt;&gt;&gt; print(z.deriv('x'))
2 * 1 + x * 0 - (x * 0 + y * 1) + 3 * 0 + y * 0
&gt;&gt;&gt; print(z.deriv('x').simplify())
2 - y
&gt;&gt;&gt; print(z.deriv('y'))
2 * 0 + x * 0 - (x * 1 + y * 0) + 3 * 1 + y * 0
&gt;&gt;&gt; print(z.deriv('y').simplify())
0 - x + 3
&gt;&gt;&gt; Add(Add(Num(2), Num(-2)), Add(Var('x'), Num(0))).simplify()
Var('x')
</code></pre>
<p>Notes:</p>
<ul>
<li>
<p>Your <code>simplify</code> method should not mutate self.</p>
</li>
<li>
<p>Simplification should always result in a symbolic expression.  Make sure that your code has this property!</p>
</li>
<li>
<p>You may use type checking to determine whether a symbol represents a <code>Num</code> as part
of implementing this behavior.</p>
</li>
</ul>
<p><a class="anchor" name="catsoop_section_11"></a><a class="anchor" name="_parsing_symbolic_expressions"></a><h2 class="cs_section_title">11) Parsing Symbolic Expressions<a class="cs_permalink" href="#_parsing_symbolic_expressions">§</a></h2></p>
<p>Next, we would like to support parsing strings into symbolic expressions (to
provide yet another means of input).  For example, we would like to do
something like:</p>
<pre><code class="language-py">&gt;&gt;&gt; expression('(x * (2 + 3))')
Mul(Var('x'), Add(Num(2), Num(3)))
</code></pre>
<p>Define a stand-alone function called <code>expression</code>, which takes a single string as input.  This string should contain either:</p>
<ul>
<li>a single variable name,</li>
<li>a single number, or</li>
<li>a fully parenthesized expression of the form <code>(E1 op E2)</code>, representing a binary operation (where <code>E1</code> and <code>E2</code> are themselves strings representing expressions, and <code>op</code> is one of <code>+</code>, <code>-</code>, <code>*</code>, or <code>/</code>).</li>
</ul>
<p>You may assume that the string is always well-formed and fully parenthesized
(you do not need to handle erroneous input), but it should work for arbitrarily
deep nesting of expressions.</p>
<p>This process is often broken down into two pieces: <em>tokenizing</em> (to break the input string into meaningful units) and <em>parsing</em> (to build our internal representation from those units).</p>
<p><a class="anchor" name="catsoop_section_11_1"></a><a class="anchor" name="_tokenizing"></a><h3 class="cs_section_title">11.1) Tokenizing<a class="cs_permalink" href="#_tokenizing">§</a></h3></p>
<p>A good helper function to write is <code>tokenize</code>, which should take a string as
described above as input and should output a list of meaningful <em>tokens</em>
(parentheses, variable names, numbers, or operands).</p>
<p>For our purposes, you may assume that variables are always single-character
alphabetic characters and that all numbers are positive or negative integers or floats.
You may also assume that there are spaces separating operands and operators.</p>
<p>As an example:</p>
<pre><code class="language-py">&gt;&gt;&gt; tokenize("(x * (2 + 3))")
['(', 'x', '*', '(', '2', '+', '3', ')', ')']
</code></pre>
<p>Note that your code should also be able to handle numbers with more than one
digit and negative numbers!  A number like -200.5, for example, should be
represented by a single token <code>'-200.5'</code>.</p>
<p><a class="anchor" name="catsoop_section_11_2"></a><a class="anchor" name="_parsing"></a><h3 class="cs_section_title">11.2) Parsing<a class="cs_permalink" href="#_parsing">§</a></h3></p>
<p>Another helper function, <code>parse</code>, could take the output of <code>tokenize</code> and
convert it into an appropriate instance of <code>Symbol</code> (or some subclass thereof).
For example:</p>
<pre><code class="language-py">&gt;&gt;&gt; tokens = tokenize("(x * (2 + 3))")
&gt;&gt;&gt; parse(tokens)
Mul(Var('x'), Add(Num(2), Num(3)))
</code></pre>
<p>Our "little language" for representing symbolic expressions can be parsed using
a <em>recursive-descent</em> parser.  One way to structure <code>parse</code> is as follows:</p>
<pre><code class="language-py">def parse(tokens):
   def parse_expression(index):
       pass  # your code here
   parsed_expression, next_index = parse_expression(0)
   return parsed_expression
</code></pre>
<p>The function <code>parse_expression</code> is a recursive function that takes as an argument an integer indexing into the <code>tokens</code> list and returns a pair of values:</p>
<ul>
<li>the expression found starting at the location given by <code>index</code> (an instance of one of the <code>Symbol</code> subclasses), and</li>
<li>the index beyond where this expression ends (e.g., if the expression ends at the token with index <code>6</code> in the <code>tokens</code> list, then the returned value should be <code>7</code>).</li>
</ul>
<p>In the definition of this procedure, we make sure that we call it with the value <code>index</code> corresponding to the start of an expression.  So, we need to handle three cases.  Let <code>token</code> be the token at location <code>index</code>; the cases are:</p>
<ul>
<li>
<p><strong>Number</strong>: If <code>token</code> represents an integer or a float, then make a corresponding <code>Num</code> instance and return that, paired with <code>index + 1</code> (since a number is represented by a single token).</p>
</li>
<li>
<p><strong>Variable</strong>: If <code>token</code> represents a variable name (a single alphabetic character), then make a corresponding <code>Var</code> instance and return that, paired with <code>index + 1</code> (since a variable is represented by a single token).</p>
</li>
<li>
<p><strong>Operation</strong>: Otherwise, the sequence of tokens starting at <code>index</code> must be of the form: <code>(E1 op E2)</code>.  Therefore, <code>token</code> must be <code>(</code>.  In this case, we need to recursively parse the two subexpressions, combine them into an appropriate instance of a subclass of <code>BinOp</code> (determined by <code>op</code>), and return that instance, along with the index of the token beyond the final right parenthesis.</p>
</li>
</ul>
<p>Implement the <code>expression</code> function in your code (possibly using the helper functions
described above).  <strong>Your implementation of the function <code>expression</code> should not use
Python's built-in <code>eval</code>, <code>exec</code>, <code>type</code>, or <code>isinstance</code> functions.</strong></p>
<p>However, you can <i>try</i> to cast a string to a float:</p>
<pre><code class="language-py">&gt;&gt;&gt; float("1")
1.0
&gt;&gt;&gt; float("-6.5")
-6.5
&gt;&gt;&gt; float("x")
...
ValueError: could not convert string to float: 'x'
</code></pre>
<p><a class="anchor" name="catsoop_section_12"></a><a class="anchor" name="_code_submission"></a><h2 class="cs_section_title">12) Code Submission<a class="cs_permalink" href="#_code_submission">§</a></h2></p>
<p>When you have tested your code sufficiently on your own machine, submit your
modified <code>lab.py</code> using the <code>6.101-submit</code> script.</p>
<p>The following command should submit the lab, assuming that the last argument
<code>/path/to/lab.py</code> is replaced by the location of your <code>lab.py</code> file:</p>
<pre><code class="language-nohighlight">$ 6.101-submit -a symbolic_algebra /path/to/lab.py
</code></pre>
<p>Running that script should submit your file to be checked.  After
submitting your file, information about the checking process can be
found below:</p>
<p>
<!--START question code_submit --><section aria-label="Question">
<div class="question question-lab101" id="cs_qdiv_code_submit" style="position: static">
<div id="code_submit_rendered_question">
<div id="catsoop_preamble_code_submit"></div>
<div id="catsoop_prompt_code_submit" style="display: inline;"></div>Results below are from a submission made at 4:45pm on 26 Apr 2024.<br/>Making additional submissions should cause this display to update automatically; or you can click <a href="javascript:reload_code_submit();">here</a> or reload the page to see updated results.<br/> <br/><a download="symbolic_algebra_gvargas1.py" href="https://py.mit.edu/spring24/submission_viewer?lab=labs/symbolic_algebra&amp;name=code_submit&amp;as=gvargas1&amp;sub=-1&amp;download=1"> Download Most Recent Submission</a><br/><a href="https://py.mit.edu/spring24/submission_viewer?lab=labs/symbolic_algebra&amp;name=code_submit&amp;as=gvargas1&amp;sub=-1" target="_blank"> View Most Recent Submission</a><br/><a href="https://py.mit.edu/spring24/submission_viewer?lab=labs/symbolic_algebra&amp;name=code_submit&amp;as=gvargas1" target="_blank"> View Submission History</a><br/><br/>
</div><div>
<span id="code_submit_buttons">
<button class="submit btn btn-catsoop" id="code_submit_submit" onclick="catsoop.submit('code_submit');" style="margin-top: 10px;">Submit</button></span>
<span id="code_submit_loading_wrapper" role="status">
<span id="code_submit_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="code_submit_score_display" role="status"></span>
<div class="nsubmits_left" id="code_submit_nsubmits_left" role="status">You have submitted this assignment 42 times.</div></div>
<div id="code_submit_solution_container">
<div id="code_submit_solution">
</div>
<div id="code_submit_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="code_submit_message" role="status">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.getElementById("code_submit_score_display").innerHTML = '';
// @license-end
</script>
<div class="callout callout-tip"><b>Style Grade</b><br/> <br/><b>This submission passed our style checks.</b></div><h3>Test Results:</h3><p>Your code passed 26 of 26 tests.</p><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py test_style</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed all 4 test cases.</b><p>Your code ran for 0.482998 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 22 deselected / 4 selected

test.py::test_style_inheritance <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                   [ 25%]</span>
test.py::test_style_binop <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                         [ 50%]</span>
test.py::test_style_attributes <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                    [ 75%]</span>
test.py::test_style_repetition <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                    [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">4 passed</span>, <span style="color: #aa5500">22 deselected</span><span style="color: #00aa00"> in 0.27s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py _combinations</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed all 2 test cases.</b><p>Your code ran for 0.476601 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 24 deselected / 2 selected

test.py::test_combinations_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                     [ 50%]</span>
test.py::test_combinations_style_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                               [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">2 passed</span>, <span style="color: #aa5500">24 deselected</span><span style="color: #00aa00"> in 0.26s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py _display</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed all 7 test cases.</b><p>Your code ran for 1.450460 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 19 deselected / 7 selected

test.py::test_display_inheritance <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                 [ 14%]</span>
test.py::test_display_repr_behavior <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                               [ 28%]</span>
test.py::test_display_repr_style <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                  [ 42%]</span>
test.py::test_display_str_behavior_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                             [ 57%]</span>
test.py::test_display_str_behavior_01 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                             [ 71%]</span>
test.py::test_display_str_behavior_02 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                             [ 85%]</span>
test.py::test_display_str_style <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                   [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">7 passed</span>, <span style="color: #aa5500">19 deselected</span><span style="color: #00aa00"> in 1.24s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py _eval</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed all 4 test cases.</b><p>Your code ran for 0.528939 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 22 deselected / 4 selected

test.py::test_eval_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                             [ 25%]</span>
test.py::test_eval_01 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                             [ 50%]</span>
test.py::test_eval_style_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                       [ 75%]</span>
test.py::test_eval_style_01 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                       [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">4 passed</span>, <span style="color: #aa5500">22 deselected</span><span style="color: #00aa00"> in 0.30s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py _eq</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed this test case.</b><p>Your code ran for 0.476069 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 25 deselected / 1 selected

test.py::test_eq_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                               [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">1 passed</span>, <span style="color: #aa5500">25 deselected</span><span style="color: #00aa00"> in 0.26s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py _deriv</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed all 2 test cases.</b><p>Your code ran for 0.585749 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 24 deselected / 2 selected

test.py::test_deriv_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                            [ 50%]</span>
test.py::test_deriv_style_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                      [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">2 passed</span>, <span style="color: #aa5500">24 deselected</span><span style="color: #00aa00"> in 0.36s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py _simplify</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed all 4 test cases.</b><p>Your code ran for 1.210528 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 22 deselected / 4 selected

test.py::test_simplify_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                         [ 25%]</span>
test.py::test_simplify_01 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                         [ 50%]</span>
test.py::test_simplify_02 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                         [ 75%]</span>
test.py::test_simplify_style <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                      [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">4 passed</span>, <span style="color: #aa5500">22 deselected</span><span style="color: #00aa00"> in 0.99s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div><div class="callout callout-tip"><p><b>Testing:</b> <code>python3 test.py _parse</code> with a timeout of 2.0 seconds</p><b class="text-success">Your code passed all 2 test cases.</b><p>Your code ran for 0.496067 seconds.</p><button onclick="if(this.nextElementSibling.style.display === 'none'){this.nextElementSibling.style.display = 'block';}else{this.nextElementSibling.style.display = 'none';}">Show/Hide Output</button><div style="display:none"><p>This test produced the following output:</p><p><div style="font-family: monospace;white-space: pre-wrap; word-wrap: break-word; font-size:75%"><span style="font-weight: bold">============================= test session starts ==============================</span>
platform linux -- Python 3.12.1, pytest-8.0.0, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /run
<span style="font-weight: bold">collecting ... </span>collected 26 items / 24 deselected / 2 selected

test.py::test_parse_00 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                            [ 50%]</span>
test.py::test_parse_01 <span style="color: #00aa00">PASSED</span><span style="color: #00aa00">                                            [100%]</span>
<span style="color: #00aa00">======================= </span><span style="color: #00aa00"></span><span style="font-weight: bold; color: #00aa00">2 passed</span>, <span style="color: #aa5500">24 deselected</span><span style="color: #00aa00"> in 0.27s</span><span style="color: #00aa00"> =======================</span>
</div></p></div></div></div>
</div>
</section>
<!--END question code_submit -->
</p>
<p><a class="anchor" name="catsoop_section_13"></a><a class="anchor" name="_additional_optional_extensions"></a><h2 class="cs_section_title">13) Additional (Optional) Extensions<a class="cs_permalink" href="#_additional_optional_extensions">§</a></h2></p>
<p>We think the program we've built here is pretty impressive!  But there
are many opportunities to improve and/or extend its behavior to do
even more impressive things. If you have the time and interest, there
are a number of ways that you could expand on this framework. Note that some
extensions may break the behavior the test cases are expecting, so it is a
good idea to finish and submit the lab before working on the optional extensions.
Some ideas are listed below:</p>
<ul>
<li>
<p>adding additional operations, including support for derivatives,
simplification, etc.</p>
</li>
<li>
<p>adding additional rules for simplification similar to those we've
seen above (for example, for any expression <span class="cs_math_to_render">u</span>, <span class="cs_math_to_render">u/u</span> could
simplify to <span class="cs_math_to_render">1</span>)</p>
</li>
<li>
<p>adding support for <a href="https://py.mit.edu/spring24/labs/symbolic_algebra/solver">solving systems of linear equations</a></p>
</li>
<li>
<p>modifying your code to be able to handle situations like <span class="cs_math_to_render">3 + (x+2)</span>,
where simplification is possible in theory, but where the
methods described above won't fully simplify the expression</p>
</li>
<li>
<p>adding more simplification rules relating addition to
multiplication, or multiplication to exponentiation.  For example,
could we simplify <span class="cs_math_to_render">x + x + x</span> to <span class="cs_math_to_render">3x</span>, or <span class="cs_math_to_render">(3y)(4y)</span> to <span class="cs_math_to_render">12y^2</span> ?</p>
</li>
<li>
<p>adding representations for polynomial expressions, which may provide
additional opportunities for simplification</p>
</li>
<li>
<p>modifying your linear equation solver so that it outputs partial
results even for systems that can't be solved (i.e., for systems
that are underconstrained)</p>
</li>
</ul>
<p>Feel free to implement your own ideas as well!</p>
<p><script src="https://py.mit.edu/submission_nudger/socket.io/socket.io.js" type="text/javascript"></script>
<script type="text/javascript">
catsoop.nudger_id = '419af91ec5c16cfe10d271bc41e4954b5585ebb567af4f5ae1f12bd988c5bb52';

var socket = io('https://py.mit.edu', {path: '/submission_nudger' + '/socket.io', autoConnect: false});

socket.on('connect', function(){
    socket.emit('hello', {id: catsoop.nudger_id});
});

socket.on('refresh', reload_code_submit);

socket.open();
</script></p>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
catsoop.all_questions = ['code_submit'];
catsoop.username = 'gvargas1';
catsoop.this_path = 'https://py.mit.edu/spring24/labs/symbolic_algebra';
catsoop.path_info = ['spring24', 'labs', 'symbolic_algebra'];
catsoop.course = 'spring24';
catsoop.url_root = 'https://py.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

// @license-end</script>
<div id="cs_footnotes"><br/> <hr/><b name="cs_footnotes">Footnotes</b><p><a class="anchor" name="catsoop_footnote_1"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">1</sup>Note that these
rules should be sufficient for the four operations we have implemented.  If we
wanted to add additional operations, we might need to reconsider these
rules. <a href="#catsoop_footnote_ref_1"><span class="noprint">(click to return to text)</span></a></p></div>
</div>
</div>
<div class="cs_right_menu"></div>
</div>
<footer>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation"><li><a href="https://py.mit.edu/spring24">Home</a></li><li><a href="https://py.mit.edu/spring24/labs/symbolic_algebra">Symbolic Algebra</a></li></nav>
<div class="cs_footer">
      This page was last updated on Thursday April 25, 2024 at 09:08:37 AM (revision <code>d183f020</code>).<br/> <br/>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.org" target="_blank">CAT-SOOP</a> v19.0.6+hg.3.118aecfb "Korat" (LTS) (development snapshot).<br/>
      CAT-SOOP is <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>, available under the terms<br/>of the <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br/>
<a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a><br/>
<a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</div>
</footer>
</body>
</html>

